// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040116C: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 * esp_12 = fp - 0x08;
l00401175:
	fs->ptr0000 = esp_12;
	null = (union Eq_7 *) ecx;
	esp_12 = esp_12 - 0x04;
	*esp_12 = 0x00;
	ebx = ebx + 0x01;
	ui8 al_32 = null ^ 0x00;
	ebp = ebp + 0x01;
	byte bh_30 = SLICE(ebx, byte, 8);
	byte bl_31 = (byte) ebx;
	int32 eax_33 = (word32) al_32;
	if (OVERFLOW(al_32))
		*(esp_12 - 0x04) = esp_12;
	ecx = ecx - 0x01;
	if (al_32 != 0x00 && ecx != 0x00)
		goto l00401175;
	byte bh_52 = bh_30 - al_32;
	ui32 ebx_53 = DPB(ebx, bh_52, 8);
	Eq_55 ebp_54 = ebp + ((char *) esp_12 + 1178533921)[eax_33];
	if (ebp_54 < 0x00)
	{
		Eq_2 eax_495 = DPB(eax_33, __inb(0xB8), 0);
		eax_495->a333D6692[eax_495].b0000 = eax_495->a333D6692[eax_495].b0000 - bl_31;
		edx[0x29B3C434] = (struct Eq_79) (edx[0x29B3C434] >> 0x5B);
		return eax_495;
	}
	byte al_93 = al_32 + 0x40 + (ebp_54 < 0x00);
	byte al_113 = al_93 + 116 + (DPB(eax_33, al_93, 0) < 0x6C1F0F8B);
	struct Eq_101 * esp_126 = *esp_12 + 0x04;
	int32 eax_114 = DPB(eax_33, al_113, 0);
	bool C_103 = cond(al_113);
l004011B2:
	cu8 al_127 = al_113 + 0x70 + C_103;
	byte al_130 = al_127 - 0x3A - (al_127 < 0x00);
	edx = DPB(edx, ~0x18, 8);
	word32 v21_137 = Mem27[esp_126 + 2005810352 + edx:word32] + ebx_53;
	Mem138[esp_126 + 2005810352 + edx:word32] = v21_137;
	Eq_2 eax_131 = DPB(eax_114, al_130, 0);
	if (v21_137 != 0x00)
	{
		*edi = esi->b0000;
		ds = esp_126->ptr0000;
		__wait();
		int32 * esp_159 = esp_126 + 0x01;
		al_113 = al_130 & 0x84;
		eax_114 = DPB(eax_114, al_130 & 0x84, 0);
		C_103 = false;
		esi = esi + 0x01;
		edi = edi + 0x01;
		esp_126 = (struct Eq_101 *) (esp_159 + 0x01);
		if (ecx == 0x00)
			goto l004011B2;
		*esp_159 = eax_114;
		byte al_166;
		__daa(al_130 & 0x84, &al_166);
	}
	byte v28_170 = esi->bE3ACC410 + bh_52;
	esi->bE3ACC410 = v28_170;
	Eq_2 esp_168 = esp_126 & ebx_53;
	if (!OVERFLOW(v28_170))
		;
	if (v28_170 == 0x00 && ecx != 0x01)
		return eax_131;
l0040126B:
	Eq_2 eax_206 = __indw(0x60) + 0x04;
	ui8 al_208 = (byte) eax_206;
	__outb(~0x09, al_208);
	do
	{
		__outb(edx, al_208);
		esi = esi + 0x01;
		if (eax_206 >= esp_168)
			*(esp_168 - 0x04) = (union Eq_192 *) cs;
		(union Eq_198 *) 0x9C053CDC = (union Eq_198 *) ss;
		esp_168 = (struct <anonymous> *) 0x9C053CDC;
		if (dl < esi->bCF1C1006)
			return eax_206;
		if (dl > esi->bCF1C1006)
		{
			*edi = (byte) __in(edx);
			ptr32 esp_470 = &eax_206->t0000;
			*(esp_470 - 0x04) = (union Eq_198 *) ss;
			edi = edi + 0x04;
			ds = *(esp_470 - 0x04);
			esp_168 = esp_470 - 0x02;
			eax_206 = (struct <anonymous> *) 3353287860;
		}
		uint32 eax_275 = (char *) eax_206 - 1480255772;
		int64 edx_eax_280 = (int64) eax_275;
		eax_206 = (word32) edx_eax_280;
		al_208 = (byte) edx_eax_280;
		edx = SLICE(edx_eax_280, word32, 32);
		dl = SLICE(edx_eax_280, byte, 32);
	} while (eax_275 > 0x00);
	Eq_133 v35_291 = eax_206->t0000 << ~0x04;
	eax_206->t0000 = v35_291;
	word32 * esi_288 = esi + 0x01;
	edi = edi + 0x01;
	Eq_264 C_294 = cond(v35_291);
	if (0x7A0E5AD1 != 0x00)
	{
		esi = (struct Eq_112 *) 0x7BA3CADB;
		eax_206 = (Eq_2) DPB(eax_206, 0x15, 0);
		if ((al_208 | 0x11) > 0x11)
		{
			if ((al_208 | 0x11) < 0x11)
				goto l0040126B;
			return eax_206;
		}
	}
	else
	{
		if (v35_291 < 0x00)
			goto l00401330;
		if (true)
		{
			while (true)
			{
				word32 esi_402 = esi_288 + 0x04 + Mem292[0x7A0E5A9B:word32] + C_294;
				__outdw(edx, DPB(*esi_288, 0x59, 8));
				ui64 al_esi_407 = SEQ(al_208, (word32) esi_402 + 0x04);
				Eq_342 eax_409 = SLICE(al_esi_407 + 0xE400000004, word32, 32);
				*(eax_409 - 0x35) = *(eax_409 - 0x35) | dl;
				esi_288 = (word32) (al_esi_407 + 0xE400000004);
				al_208 = (byte) __indw(0x96);
				if (eax_409 >= 3111001223)
					break;
				(byte *) 2891634814 = (byte *) ((byte *) 2891634814 & dl);
				C_294.u0 = false;
			}
			word32 eax_428 = __indw(~0x46);
			(word32 *) 826298759 = eax_428;
			uint32 eax_433 = DPB(eax_428, (byte) eax_428 | 0x31, 0);
			if (eax_433 < 3592526215)
				return eax_433 - 3592526215;
			else
				__hlt();
		}
		esi->bAC7EA618 = 252;
		esp_168 = esp_168 + 0x04;
	}
l00401330:
	Eq_289 esp_312 = esp_168 - (struct <anonymous> *) 0x04;
	esp_312->t0000 = ds;
	word32 esp_314;
	word32 eax_315;
	struct Eq_297 * fs_316;
	byte SZO_317;
	byte C_318;
	word32 ecx_319;
	word32 ebp_320;
	word32 ebx_321;
	byte al_322;
	byte O_323;
	word32 esi_324;
	byte Z_325;
	byte bh_326;
	byte SCZO_327;
	byte SO_328;
	byte dh_329;
	word32 edx_330;
	word32 edi_331;
	struct Eq_313 * ds_332;
	byte bl_333;
	byte ah_334;
	byte dl_335;
	struct Eq_317 * ss_336;
	byte CZ_337;
	byte S_338;
	struct Eq_320 * cs_339;
	fn6EA78D63();
}

