// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401005: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	word32 edx_39 = edx + esi + esi + (fp + 0x10) + (fp + 0x10);
	fn004010CE(edx_39 + 2069943438, ebx, ebp, edi, dwLoc2C, 0x00, esi);
	fn004010CE(edx_39 + 2069943438, ebx, ebp, edi, ebp, dwArg14, dwArg20);
	return edx_39 + 2069943438;
}

// 004010CE: void fn004010CE(Register word32 eax, Register (ptr Eq_17) ebx, Register word32 ebp, Register word32 edi, Stack word32 dwArg00, Stack word32 dwArg18, Stack word32 dwArg24)
void fn004010CE(word32 eax, Eq_17 * ebx, word32 ebp, word32 edi, word32 dwArg00, word32 dwArg18, word32 dwArg24)
{
	word32 eax_38 = DPB(dwArg00, 0x00, 0);
	fn00401695(dwLoc30, fp - 0x28);
	*(fp - 0x1C) = fp - 0x28;
	*(fp - 0x20) = eax_38 + 27772;
	*(fp - 0x24) = eax_38 + 27772;
	*(fp - 0x28) = eax_38 + 27772;
	word32 esp_140;
	word32 eax_141;
	byte SZO_142;
	word32 ebp_143;
	word32 edx_144;
	byte C_145;
	word16 ax_146;
	word16 cx_147;
	word32 ecx_148;
	byte SCZO_149;
	word32 esi_150;
	struct Eq_87 * ebx_151;
	word32 edi_152;
	word16 si_153;
	struct Eq_90 * fs_154;
	byte al_155;
	byte Z_156;
	byte dh_157;
	byte dl_158;
	byte bh_159;
	word16 bx_160;
	ebx->ptr0018();
	ptr32 esp_162;
	word32 eax_163;
	byte SZO_164;
	word32 ebp_165;
	word32 edx_166;
	byte C_167;
	word16 ax_168;
	word16 cx_169;
	word32 ecx_170;
	byte SCZO_171;
	word32 esi_172;
	<anonymous> ** ebx_173;
	word32 edi_174;
	word16 si_175;
	struct Eq_114 * fs_176;
	byte al_177;
	byte Z_178;
	byte dh_179;
	byte dl_180;
	byte bh_181;
	word16 bx_182;
	ebx_151->ptr001C();
	*(esp_162 - 0x04) = eax_163 + 0x06;
	*(esp_162 - 0x08) = eax_163 + 0x06;
	struct Eq_137 * esp_200;
	word32 eax_201;
	byte SZO_202;
	word32 ebp_203;
	word32 edx_204;
	byte C_205;
	word16 ax_206;
	word16 cx_207;
	word32 ecx_208;
	byte SCZO_209;
	word32 esi_210;
	word32 ebx_211;
	word32 edi_212;
	word16 si_213;
	struct Eq_151 * fs_214;
	byte al_215;
	byte Z_216;
	byte dh_217;
	byte dl_218;
	byte bh_219;
	word16 bx_220;
	(*ebx_173)();
	esp_200->dw0038 = ebx_211;
	esp_200->dw003C = esi_210;
	*(esp_200 - 0x04) = ebx_211;
	*(esp_200 - 0x04) = *(esp_200 - 0x04) - 0x04;
	struct Eq_182 * edi_237 = *(esp_200 - 0x04);
	*(esp_200 - 0x04) = eax_201;
	*(esp_200 - 0x08) = ecx_208;
	*(esp_200 - 0x0C) = esp_200 - 0x08;
	*(esp_200 - 0x10) = 0x40;
	*(esp_200 - 0x14) = esp_200->dw0020;
	*(esp_200 - 0x18) = esp_200->dw0014;
	esp_200->dw0018 = 0x00;
	*(esp_200 - 0x1C) = ~0x00;
	struct Eq_235 * esp_268;
	struct Eq_236 Eq_248::* eax_269;
	byte SZO_270;
	word32 edx_272;
	byte C_273;
	word16 ax_274;
	word16 cx_275;
	word32 ecx_276;
	byte SCZO_277;
	word32 esi_278;
	word32 ebx_279;
	word32 edi_280;
	word16 si_281;
	struct Eq_248 * fs_282;
	byte al_283;
	byte Z_284;
	byte dh_285;
	byte dl_286;
	byte bh_287;
	word16 bx_288;
	byte * ebp_271;
	edi_237->ptr0010();
	struct Eq_259 * eax_290 = eax_269 + (fs_282->*eax_269).dw002F / 0x0033;
	esp_268->dw0030 = esp_268->dw0030 + eax_290->dw0003;
	*(esp_268 - 0x04) = (struct Eq_259 **) eax_290;
	esp_268->dw0000 = *(esp_268 - 0x04);
	esp_268->dw0004 = esp_268->dw0000;
	word32 edi_316 = esp_268->dw0008;
	esp_268->dw0008 = esp_268->dw0004;
	word32 ebx_325 = esp_268->dw000C;
	word32 eax_321 = esp_268->dw0008;
	word16 bx_327 = (word16) ebx_325;
	word32 * esi_329 = esp_268->ptr0010;
	esp_268->ptr0010 = eax_321 + 0x03;
	word32 * eax_339 = esp_268->ptr0010;
	word32 ecx_341 = *eax_339;
	esp_268->ptr0010 = eax_339;
	esp_268->dw003C = esp_268->dw003C ^ ecx_341;
	word32 * eax_351 = esp_268->ptr001C;
	word32 ecx_354 = esp_268->dw002C;
	esp_268->ptr0010 = eax_351;
	*(esp_268 - 0xF8) = esp_268->ptr0010;
	*(esp_268 - 244) = *(esp_268 - 0xF8);
	*(esp_268 - 0xF0) = ecx_354;
	*(esp_268 - 0xF8) = edi_316;
	int32 eax_372 = 0x00;
	do
	{
		*(esp_268 - 252) = eax_372;
		word32 eax_383 = *(esp_268 - 252);
		esp_268 - 0xEC + eax_372 = (byte *) (byte) eax_383;
		*(esp_268 - 252) = eax_383;
		*(esp_268 - 252) = *(esp_268 - 252) + 0x01;
		uint32 eax_397 = *(esp_268 - 252);
		*(esp_268 - 252) = eax_397;
		eax_372 = *(esp_268 - 252);
	} while (eax_397 < 0x0100);
	*(esp_268 - 252) = eax_372;
	word32 edi_413 = *(esp_268 - 0xF8);
	*(esp_268 - 0xF8) = *(esp_268 - 252);
	*(esp_268 - 0xF8) = &esp_268->dw003C + 0x02;
	byte * eax_424 = *(esp_268 - 0xF8);
	ptr32 esp_427 = esp_268 - 244;
	if (*eax_424 != 121)
	{
		struct Eq_497 * edi_665 = *(eax_424 - 0x04);
		do
		{
			ptr32 esp_666;
			word32 eax_667;
			byte SZO_668;
			word32 ebp_669;
			word32 edx_670;
			byte C_671;
			word16 ax_672;
			word16 cx_673;
			word32 ecx_674;
			byte SCZO_675;
			word32 esi_676;
			word32 ebx_677;
			struct Eq_515 * edi_678;
			word16 si_679;
			struct Eq_517 * fs_680;
			byte al_681;
			byte Z_682;
			byte dh_683;
			byte dl_684;
			byte bh_685;
			word16 bx_686;
			edi_665->ptr0018();
			*(esp_666 - 0x04) = eax_667;
			ptr32 esp_692;
			word32 eax_693;
			byte SZO_694;
			word32 ebp_695;
			word32 edx_696;
			byte C_697;
			word16 ax_698;
			word16 cx_699;
			word32 ecx_700;
			byte SCZO_701;
			word32 esi_702;
			word32 ebx_703;
			struct Eq_544 * edi_704;
			word16 si_705;
			struct Eq_546 * fs_706;
			byte al_707;
			byte Z_708;
			byte dh_709;
			byte dl_710;
			byte bh_711;
			word16 bx_712;
			edi_678->ptr0010();
			*(esp_692 - 0x04) = eax_693;
			ptr32 esp_718;
			word32 eax_719;
			byte SZO_720;
			word32 ebp_721;
			word32 edx_722;
			byte C_723;
			word16 ax_724;
			word16 cx_725;
			word32 ecx_726;
			byte SCZO_727;
			word32 esi_728;
			word32 ebx_729;
			struct Eq_573 * edi_730;
			word16 si_731;
			struct Eq_575 * fs_732;
			byte al_733;
			byte Z_734;
			byte dh_735;
			byte dl_736;
			byte bh_737;
			word16 bx_738;
			edi_704->ptr0018();
			*(esp_718 - 0x04) = eax_719;
			ptr32 esp_744;
			word32 eax_745;
			byte SZO_746;
			word32 ebp_747;
			word32 edx_748;
			byte C_749;
			word16 ax_750;
			word16 cx_751;
			word32 ecx_752;
			byte SCZO_753;
			word32 esi_754;
			word32 ebx_755;
			struct Eq_602 * edi_756;
			word16 si_757;
			struct Eq_604 * fs_758;
			byte al_759;
			byte Z_760;
			byte dh_761;
			byte dl_762;
			byte bh_763;
			word16 bx_764;
			edi_730->ptr0018();
			*(esp_744 - 0x04) = eax_745;
			ptr32 esp_770;
			word32 eax_771;
			byte SZO_772;
			word32 ebp_773;
			word32 edx_774;
			byte C_775;
			word16 ax_776;
			word16 cx_777;
			word32 ecx_778;
			byte SCZO_779;
			word32 esi_780;
			word32 ebx_781;
			struct Eq_631 * edi_782;
			word16 si_783;
			struct Eq_633 * fs_784;
			byte al_785;
			byte Z_786;
			byte dh_787;
			byte dl_788;
			byte bh_789;
			word16 bx_790;
			edi_756->ptr0018();
			*(esp_770 - 0x04) = eax_771;
			word32 esp_798;
			word32 eax_799;
			byte SZO_800;
			word32 ebp_801;
			word32 edx_802;
			byte C_803;
			word16 ax_804;
			word16 cx_805;
			word32 ecx_806;
			byte SCZO_807;
			word32 esi_808;
			word32 ebx_809;
			struct Eq_660 * edi_810;
			word16 si_811;
			struct Eq_662 * fs_812;
			byte al_813;
			byte Z_814;
			byte dh_815;
			byte dl_816;
			byte bh_817;
			word16 bx_818;
			edi_782->ptr0018();
			word32 esp_819;
			word32 eax_820;
			byte SZO_821;
			word32 ebp_822;
			word32 edx_823;
			byte C_824;
			word16 ax_825;
			word16 cx_826;
			word32 ecx_827;
			byte SCZO_828;
			word32 esi_829;
			word32 ebx_830;
			struct Eq_688 * edi_831;
			word16 si_832;
			struct Eq_690 * fs_833;
			byte al_834;
			byte Z_835;
			byte dh_836;
			byte dl_837;
			byte bh_838;
			word16 bx_839;
			edi_810->ptr0018();
			ptr32 esp_840;
			word32 eax_841;
			byte SZO_842;
			word32 edx_844;
			byte C_845;
			word16 ax_846;
			word16 cx_847;
			word32 ecx_848;
			byte SCZO_849;
			word16 si_853;
			struct Eq_710 * fs_854;
			byte al_855;
			byte Z_856;
			byte dh_857;
			byte dl_858;
			byte bh_859;
			edi_831->ptr0010();
			*(esp_840 - 0x04) = eax_841;
			word32 eax_864 = *(esp_840 - 0x04);
			*(esp_840 - 0x04) = eax_864 + 0x01;
			word32 eax_876 = *(esp_840 - 0x04);
			cu16 ax_879 = (word16) eax_876 - cx_847;
			*(esp_840 - 0x04) = DPB(eax_876, ax_879, 0);
			word32 eax_886 = *(esp_840 - 0x04);
		} while (ax_879 < 0x00);
		*(esp_840 - 0x04) = eax_886;
		eax_424 = (byte *) *(esp_840 - 0x04);
		esp_427 = esp_840;
	}
	struct Eq_459 * esp_453 = esp_427 - 0x04;
	esp_453->ptr0000 = eax_424;
	byte * eax_456 = esp_453->ptr0000;
	esp_453->ptr0000 = ebp_271;
	*(esp_453 - 0x04) = (byte **) eax_456;
	word32 eax_463 = *(esp_453 - 0x04);
	*(esp_453 - 0x04) = esi_329;
	*(esp_453 - 0x08) = eax_463;
	*(esp_453 - 0x08) = edi_413;
	uint32 edi_475 = esp_453->dw011C;
	*(esp_453 - 0x0C) = 0x00;
	int32 esi_481 = 0x00;
	word32 eax_486 = *(esp_453 - 0x0C);
	int32 ebp_490 = 0x00;
	*(esp_453 - 0x0C) = ebx_325;
	do
	{
		struct Eq_777 * esp_503 = esp_427 - 0x10;
		word32 ebx_506 = (word32) esp_503->a0018[ebp_490];
		*(esp_503 - 0x04) = eax_486;
		ptr32 edx_512 = esp_503->ptr0014;
		*(esp_503 - 0x04) = *(esp_503 - 0x04);
		int32 eax_516 = *(esp_503 - 0x04);
		word32 edx_518 = (word32) (edx_512 + eax_516);
		*(esp_503 - 0x04) = eax_516;
		word32 eax_524 = *(esp_503 - 0x04);
		word32 ecx_530 = ebx_506 + esi_481;
		word32 edx_533 = edx_518 + ecx_530;
		int32 edx_537 = DPB(edx_533, 0x00, 8);
		*(esp_503 - 0x04) = eax_524 + 0x01;
		*(esp_503 - 0x04) = *(esp_503 - 0x04);
		uint32 eax_551 = *(esp_503 - 0x04);
		*(esp_503 - 0x04) = eax_551;
		esi_481 = edx_537;
		word32 eax_558 = *(esp_503 - 0x04);
		if (eax_551 >= edi_475)
		{
			*(esp_503 - 0x04) = eax_558;
			*(esp_503 - 0x04) = 0x00;
			eax_558 = *(esp_503 - 0x04);
		}
		byte dl_565 = esp_503->a0018[edx_537];
		*(esp_503 - 0x04) = eax_558;
		word32 eax_569 = *(esp_503 - 0x04);
		esp_503->a0018[ebp_490] = dl_565;
		*(esp_503 - 0x04) = eax_569;
		int32 eax_575 = *(esp_503 - 0x04);
		ebp_490 = ebp_490 + 0x01;
		ptr32 edx_581 = esp_503->a0018 + edx_537;
		ptr32 edx_584 = edx_581 - eax_575;
		bx_327 = DPB(bx_327, eax_575 + 0x01 + edx_584, 8);
		*(esp_503 - 0x04) = eax_575;
		int32 eax_593 = *(esp_503 - 0x04);
		eax_593 + edx_584 = (word16 *) bx_327;
		*(esp_503 - 0x04) = eax_593;
		*(esp_503 - 0x04) = *(esp_503 - 0x04);
		*(esp_503 - 0x04) = *(esp_503 - 0x04);
		*(esp_503 - 0x04) = *(esp_503 - 0x04);
		eax_486 = *(esp_503 - 0x04);
	} while (SLICE(ebp_490, byte, 8) != 0x01);
	word32 ebx_638;
	word32 ebp_639;
	word32 edi_640;
	fn00401723(eax_38 + 27772, eax_38 + 0x6030, dwArg04, dwArg08, dwArg0C, dwArg0114, dwArg0118, dwArg0128, dwArg013C, dwArg0140, out ebx_638, out ebp_639, out edi_640);
	return;
}

// 00401695: void fn00401695(Stack word32 dwArg00, Stack ptr32 dwArg04)
void fn00401695(word32 dwArg00, ptr32 dwArg04)
{
	word32 eax_24 = dwArg00;
	while (true)
	{
		word16 ax_61 = DPB(eax_24, 0x00, 0) + 0x00;
		word32 eax_64 = DPB(eax_24, ax_61 + 42421, 0);
		if (ax_61 == 42419)
			break;
		eax_24 = eax_64 - 0x00010000;
	}
}

// 00401723: Register word32 fn00401723(Stack word32 dwArg00, Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack word32 dwArg10, Stack word32 dwArg0118, Stack word32 dwArg011C, Stack word32 dwArg012C, Stack word32 dwArg0140, Stack word32 dwArg0144, Register out ptr32 ebxOut, Register out ptr32 ebpOut, Register out ptr32 ediOut)
word32 fn00401723(word32 dwArg00, word32 dwArg04, word32 dwArg08, word32 dwArg0C, word32 dwArg10, word32 dwArg0118, word32 dwArg011C, word32 dwArg012C, word32 dwArg0140, word32 dwArg0144, ptr32 & ebxOut, ptr32 & ebpOut, ptr32 & ediOut)
{
	int32 esi_130 = 0x00;
	word32 ebp_131 = dwArg012C;
	ptr32 edi_129 = dwArg10;
	word32 edx_225 = dwArg00;
	if (true)
	{
		int32 eax_120 = 0x00;
		do
		{
			int32 eax_141 = DPB(eax_120 + 0x01, 0x00, 8);
			byte cl_148 = fp->a0018[eax_141];
			word32 ebx_168 = (word32) cl_148;
			word32 ebx_169 = ebx_168 + esi_130;
			int32 ebx_173 = DPB(ebx_169, 0x00, 8);
			byte dh_182 = fp->a0004[ebx_173 + 0x14];
			fp->a0018[eax_141] = dh_182;
			fp->a0004[ebx_173 + 0x14] = cl_148;
			word32 edx_220 = (word32) dh_182;
			byte dl_221 = (byte) edx_220;
			int32 edx_223 = DPB(edx_220, dl_221 + cl_148, 0);
			edx_225 = edx_223 + 0x14;
			ui32 ecx_229 = fp->a0004[edx_223 + 0x14];
			*(edi_129 - 0x01) = *(edi_129 - 0x01) ^ (word16) (ecx_229 << 0x08);
			esi_130 = ebx_173;
			edi_129 = edi_129 + 0x01;
			ebp_131 = ebp_131 - 0x01;
			eax_120 = eax_141;
		} while (ebp_131 != 0x00);
	}
	word32 edi_70;
	*ediOut = dwArg04;
	word32 ebp_76;
	*ebpOut = dwArg0C;
	word32 ebx_104;
	*ebxOut = edx_225;
	return dwArg011C;
}

