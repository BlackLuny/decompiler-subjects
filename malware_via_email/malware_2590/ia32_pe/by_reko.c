// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401027: FpuStack real64 fn00401027(Register (ptr Eq_3) eax, Register (ptr ui32) ecx, Register int32 edx, Register (ptr Eq_6) ebx, Register word32 ebp, Register (ptr Eq_8) esi, Register ui32 edi, Stack word32 dwArg00, Stack word32 dwArg03, FpuStack real64 rArg0, FpuStack real64 rArg6)
real64 fn00401027(Eq_3 * eax, ui32 * ecx, int32 edx, Eq_6 * ebx, word32 ebp, Eq_8 * esi, ui32 edi, word32 dwArg00, word32 dwArg03, real64 rArg0, real64 rArg6)
{
	eax->b006B = eax->b006B | al;
	__bound(ebp, ebx->dwBC27413);
	__outdw(497902791, edx *s 11);
	*(edi | edx *s 11) = esi->dw0004;
	*ecx = *ecx ^ fp + 0x03;
}

// 0041397C: Register Eq_49 Win32CrtStartup()
Eq_49 Win32CrtStartup()
{
	struct Eq_50 * esp_110;
	Eq_49 eax_246;
	Eq_49 eax_21 = CreateFileA(4389539, 0x80000000, 0x07, null, 0x03, 0x0182, 0x00);
	if (eax_21 == ~0x00)
	{
		GetFileSize(eax_21, 0x00);
		CloseHandle(eax_21);
		GetFileSize(eax_21, 0x00);
		Eq_49 eax_327 = CreateFileA(4389513, 0xE0000000, 0x04, null, 0x03, 0x0104, 0x00);
		if (eax_327 != ~0x00)
			goto l00413C54;
		GetFileSize(eax_327, 0x00);
		Eq_49 eax_361 = CreateFileA(4389658, 0x60000000, 0x06, null, 0x03, 0x04, 0x00);
		CloseHandle(eax_327);
		GetLastError();
		CloseHandle(eax_21);
		dwLoc0C = eax_361;
		if (CreateFileA(0x0042FAAF, 0xA0000000, 0x03, null, 0x03, 262, 0x00) == ~0x00)
		{
			GetCommandLineA();
			GetFileSize(eax_361, 0x00);
			dwLoc20 = CreateFileA(4389633, 0xE0000000, 0x04, null, 0x03, 0x0186, 0x00);
			esp_110 = fp - 88;
l00413ADA:
			struct Eq_50 * esp_112 = esp_110 - 0x04;
			esp_112->t0000 = dwLoc0C;
			GetFileSize(esp_112->t0000, esp_112->t0004);
			GetCommandLineA();
			esp_112->t0004.u0 = 0x00;
			esp_112->t0000 = dwLoc20;
			GetFileSize(esp_112->t0000, esp_112->t0004);
			esp_112->t0004.u0 = 0x00;
			esp_112->t0000.u0 = 0x0100;
			*(esp_112 - 0x04) = 0x03;
			*(esp_112 - 0x08) = 0x00;
			*(esp_112 - 0x0C) = 0x06;
			*(esp_112 - 0x10) = 0x20000000;
			*(esp_112 - 0x14) = 4389439;
			Eq_49 eax_138 = CreateFileW(*(esp_112 - 0x14), *(esp_112 - 0x10), *(esp_112 - 0x0C), *(esp_112 - 0x08), *(esp_112 - 0x04), esp_112->t0000, esp_112->t0004);
			esp_112->t0004.u0 = 0x0042FA99;
			GetCommandLineA();
			Eq_49 eax_144 = LoadLibraryA(esp_112->t0004);
			esp_112->t0004.u0 = 0x0042FB08;
			GetLastError();
			esp_112->t0000 = eax_144;
			GetLastError();
			dwLoc48 = GetProcAddress(esp_112->t0000, esp_112->t0004);
			GetLastError();
			GetLastError();
			esp_112->t0004.u0 = 0x00;
			esp_112->t0000.u0 = 288;
			*(esp_112 - 0x04) = 0x03;
			*(esp_112 - 0x08) = 0x00;
			*(esp_112 - 0x0C) = 0x06;
			*(esp_112 - 0x10) = 0xA0000000;
			*(esp_112 - 0x14) = 4389388;
			CreateFileA(*(esp_112 - 0x14), *(esp_112 - 0x10), *(esp_112 - 0x0C), *(esp_112 - 0x08), *(esp_112 - 0x04), esp_112->t0000, esp_112->t0004);
			esp_112->t0004.u0 = 0x00;
			esp_112->t0000.u0 = 0x0185;
			*(esp_112 - 0x04) = 0x03;
			*(esp_112 - 0x08) = 0x00;
			*(esp_112 - 0x0C) = 0x02;
			*(esp_112 - 0x10) = 0xE0000000;
			*(esp_112 - 0x14) = 0x0042FACC;
			CreateFileW(*(esp_112 - 0x14), *(esp_112 - 0x10), *(esp_112 - 0x0C), *(esp_112 - 0x08), *(esp_112 - 0x04), esp_112->t0000, esp_112->t0004);
			esp_112->t0004.u0 = 0x00;
			esp_112->t0000 = eax_138;
			GetFileSize(esp_112->t0000, esp_112->t0004);
			esp_112->t0004 = eax_21;
			CloseHandle(esp_112->t0004);
			esp_112->t0004.u0 = 0x00;
			esp_112->t0000.u0 = 0x20;
			*(esp_112 - 0x04) = 0x03;
			*(esp_112 - 0x08) = 0x00;
			*(esp_112 - 0x0C) = 0x00;
			*(esp_112 - 0x10) = 0xE0000000;
			*(esp_112 - 0x14) = 4389609;
			CreateFileW(*(esp_112 - 0x14), *(esp_112 - 0x10), *(esp_112 - 0x0C), *(esp_112 - 0x08), *(esp_112 - 0x04), esp_112->t0000, esp_112->t0004);
			esp_112->t0004.u0 = 0x00;
			GetCommandLineA();
			esp_112->t0000.u0 = 0x00;
			*(esp_112 - 0x04) = (union Eq_49 *) eax_21;
			CloseHandle(*(esp_112 - 0x04));
			*(esp_112 - 0x04) = 0x00;
			*(esp_112 - 0x08) = 0x01A2;
			*(esp_112 - 0x0C) = 0x03;
			*(esp_112 - 0x10) = 0x00;
			*(esp_112 - 0x14) = 0x03;
			*(esp_112 - 0x18) = 0x80000000;
			*(esp_112 - 0x1C) = 4389342;
			eax_246 = CreateFileA(*(esp_112 - 0x1C), *(esp_112 - 0x18), *(esp_112 - 0x14), *(esp_112 - 0x10), *(esp_112 - 0x0C), *(esp_112 - 0x08), *(esp_112 - 0x04));
			esp_110 = esp_112;
l00413C3D:
			if (eax_246 == ~0x00)
			{
				word32 esp_85;
				word32 ebp_86;
				byte SCZO_87;
				word32 eax_88;
				byte Z_89;
				dwLoc48();
			}
			goto l00413ADA;
		}
	}
	else
	{
		CreateFileA(4389485, 0x60000000, 0x05, null, 0x03, 0x0127, 0x00);
		CreateFileW(&globals->t42FA58, 0x20000000, 0x05, null, 0x03, 288, 0x00);
		eax_246 = CreateFileA(4389414, 0x60000000, 0x04, null, 0x03, 0x01A0, 0x00);
		esp_110 = fp - 0x60;
		if (eax_246 != ~0x00)
			goto l00413C3D;
		GetLastError();
		dwLoc14 = dwLoc40 - 2143666719;
	}
	ptr32 esp_274;
	word32 ebp_275;
	byte SCZO_276;
	word32 eax_277;
	byte Z_278;
	dwLoc14();
	*(esp_274 - 0x04) = 0x00;
	*(esp_274 - 0x08) = dwLoc08;
	GetFileSize(*(esp_274 - 0x08), *(esp_274 - 0x04));
	*(esp_274 - 0x04) = 0x00;
	*(esp_274 - 0x08) = dwLoc24;
	GetFileSize(*(esp_274 - 0x08), *(esp_274 - 0x04));
}

