// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040102C: Register word32 fn0040102C(Register out ptr32 ebpOut)
word32 fn0040102C(ptr32 & ebpOut)
{
	fn0040390E();
	MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	int32 eax_35 = MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	if (false)
		;
	else
	{
		word32 esp_40;
		word32 ebp_41;
		byte SCZO_42;
		word32 ebx_43;
		word32 esi_44;
		word32 edi_45;
		word32 eax_46;
		byte C_47;
		fn0145795D();
		return eax_46;
	}
}

// 0040390E: void fn0040390E()
void fn0040390E()
{
	MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	MessageBoxW((struct HWND__ *) ~0x00, null, null, 0x00);
	int32 dwLoc08_40 = 0x00;
	while (dwLoc08_40 < 5000000)
	{
		operator delete(fp - 0x18);
		dwLoc08_40 = dwLoc08_40 + 0x01;
	}
	return;
}

// 00404836: Register Eq_67 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	word32 esp_36;
	word32 ebp_37;
	word32 eax_38;
	struct Eq_77 * fs_39;
	byte SCZO_40;
	word32 ebx_41;
	word32 esi_42;
	word32 edi_43;
	byte SZO_44;
	byte C_45;
	word32 ecx_46;
	byte Z_47;
	byte al_48;
	byte bl_49;
	byte CZ_50;
	_set_app_type();
	globals->dw40745C = globals->dw40745C | ~0x00;
	globals->dw407460 = globals->dw407460 | ~0x00;
	word32 esp_62;
	word32 ebp_63;
	word32 * eax_64;
	struct Eq_104 * fs_65;
	byte SCZO_66;
	word32 ebx_67;
	word32 esi_68;
	word32 edi_69;
	byte SZO_70;
	byte C_71;
	word32 ecx_72;
	byte Z_73;
	byte al_74;
	byte bl_75;
	byte CZ_76;
	_p__fmode();
	word32 ecx_78 = globals->dw407458;
	*eax_64 = ecx_78;
	word32 esp_80;
	word32 ebp_81;
	word32 * eax_82;
	struct Eq_127 * fs_83;
	byte SCZO_84;
	word32 ebx_85;
	word32 esi_86;
	word32 edi_87;
	byte SZO_88;
	byte C_89;
	word32 ecx_90;
	byte Z_91;
	byte al_92;
	byte bl_93;
	byte CZ_94;
	_p__commode();
	word32 ecx_96 = globals->dw407454;
	*eax_82 = ecx_96;
	word32 eax_99 = *adjust_fdiv;
	globals->dw407464 = eax_99;
	fn004049B5();
	ptr32 esp_103 = fp - 0x94;
	if (globals->dw406830 == 0x00)
	{
		*(fp - 0x98) = 0x004049B2;
		ptr32 esp_268;
		word32 ebp_269;
		word32 eax_270;
		struct Eq_299 * fs_271;
		byte SCZO_272;
		word32 ebx_273;
		word32 esi_274;
		word32 edi_275;
		byte SZO_276;
		byte C_277;
		word32 ecx_278;
		byte Z_279;
		byte al_280;
		byte bl_281;
		byte CZ_282;
		_setusermatherr();
		esp_103 = esp_268;
	}
	fn004049A0();
	word32 * esp_104 = esp_103 - 0x04;
	*esp_104 = 0x00406010;
	*(esp_104 - 0x04) = 0x0040600C;
	ptr32 esp_108;
	word32 ebp_109;
	word32 eax_110;
	struct Eq_184 * fs_111;
	byte SCZO_112;
	word32 ebx_113;
	word32 esi_114;
	word32 edi_115;
	byte SZO_116;
	byte C_117;
	word32 ecx_118;
	byte Z_119;
	byte al_120;
	byte bl_121;
	byte CZ_122;
	initterm();
	*(esp_108 - 0x08) = fp - 0x70;
	*(esp_108 - 0x0C) = globals->dw40744C;
	*(esp_108 - 0x10) = fp - 0x68;
	*(esp_108 - 0x14) = fp - 116;
	*(esp_108 - 0x18) = fp - 100;
	ptr32 esp_141;
	word32 ebp_142;
	word32 eax_143;
	struct Eq_236 * fs_144;
	byte SCZO_145;
	word32 ebx_146;
	word32 esi_147;
	word32 edi_148;
	byte SZO_149;
	byte C_150;
	word32 ecx_151;
	byte Z_152;
	byte al_153;
	byte bl_154;
	byte CZ_155;
	_getmainargs();
	*(esp_141 - 0x08) = 0x00406008;
	*(esp_141 - 0x0C) = 0x00406000;
	struct Eq_262 * esp_161;
	word32 ebp_162;
	word32 eax_163;
	struct Eq_265 * fs_164;
	byte SCZO_165;
	word32 ebx_166;
	word32 esi_167;
	word32 edi_168;
	byte SZO_169;
	byte C_170;
	word32 ecx_171;
	byte Z_172;
	byte al_173;
	cu8 bl_174;
	byte CZ_175;
	initterm();
	cu8 * esi_179 = *acmdln;
	if (*esi_179 == 0x22)
	{
		do
		{
			esi_179 = esi_179 + 0x01;
			cu8 al_246 = *esi_179;
		} while (al_246 == bl_174 || al_246 == 0x22);
		if (*esi_179 == 0x22)
		{
l00404925:
			esi_179 = esi_179 + 0x01;
		}
	}
	else
	{
		while (*esi_179 > 0x20)
			esi_179 = esi_179 + 0x01;
	}
	cu8 al_188 = *esi_179;
	if (al_188 == bl_174 || al_188 > 0x20)
	{
		Eq_341 eax_204;
		esp_161->t001C = fp - 0x60;
		GetStartupInfoA(esp_161->t001C);
		if (0x00 != 0x00)
			eax_204 = (word32) wLoc30;
		else
		{
			esp_161->t001C = (struct _STARTUPINFOA *) 0x0A;
			eax_204 = esp_161->t001C;
		}
		esp_161->t001C = eax_204;
		esp_161->ptr0018 = esi_179;
		esp_161->dw0014 = 0x00;
		&esp_161->t0010.u0->unused = 0x00;
		esp_161->t0010 = GetModuleHandleA(esp_161->t0010);
		ptr32 ebp_218;
		int32 eax_219 = fn0040102C(out ebp_218);
		*(ebp_218 - 0x68) = eax_219;
		esp_161->dw000C = eax_219;
		exit(esp_161->dw000C);
	}
	goto l00404925;
}

// 004049A0: void fn004049A0()
void fn004049A0()
{
	word32 esp_6;
	word32 ecx_7;
	controlfp();
	return;
}

// 004049B5: void fn004049B5()
void fn004049B5()
{
	return;
}

