// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040E119: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_12 = IsWindow(dwArg04);
	if ((eax_12 | 0x01) == 0x01)
		eax_12 = fn0040E153((byte) GetPrivateProfileIntA(fp - 0x04, fp - 0x04, 252, fp - 0x04), 252);
	return eax_12;
}

// 0040E153: Register ui32 fn0040E153(Register byte bl, Stack word32 dwArg00)
ui32 fn0040E153(byte bl, word32 dwArg00)
{
	Eq_34 eax_10 = VirtualAlloc(0x00, 85551, 0x3000, 0x40);
	word32 ecx_19 = 0x01F6;
	union Eq_48 * esi_25 = dwArg00 + 166;
	Eq_34 edi_26 = eax_10;
	uint32 edx_31 = DPB(3778601757, bl + 0x1D, 0);
	word32 ebp_192 = 0x00;
	do
	{
		*edi_26 = (word32) *edi_26 + (byte) ((char *) (*esi_25) + edx_31);
		word32 ebp_69 = ebp_192 - 460344;
		uint32 edx_189 = edx_31 >> 0x08;
		esi_25 = (union Eq_48 *) ((char *) esi_25 + 0x01);
		edi_26 = edi_26 + 0x01;
		ebp_192 = ebp_69 + 0x00070639;
		byte dl_190 = (byte) edx_189;
		if (0x04 == ebp_69 + 0x00070639)
		{
			edx_189 = 3778601757;
			dl_190 = 0x1D;
			ebp_192 = 0x00;
		}
		byte dl_80 = dl_190 + bl;
		edx_31 = DPB(edx_189, dl_80, 0);
		ecx_19 = ecx_195 - 0x01;
		word32 ecx_195 = ecx_19;
	} while (ecx_195 != 0x01);
	word32 esp_91;
	byte SCZO_94;
	ui32 ecx_96;
	word32 edx_97;
	byte dl_98;
	byte bl_99;
	struct Eq_106 * ebp_100;
	byte cl_101;
	byte SZO_102;
	byte Z_103;
	byte C_104;
	word32 ebx_105;
	byte al_106;
	byte ch_107;
	Eq_114 ss_108;
	byte bh_109;
	byte * esi_139;
	byte * edi_140;
	ui32 eax_142;
	eax_10();
	if (ecx_96 != eax_142)
	{
		__outb(0x96, al_106);
		word32 ecx_133 = ecx_96 - 0x01;
		if (ecx_96 != 0x01)
		{
			while (true)
			{
				eax_142 = DPB(eax_142, *esi_139, 0) + ebp_100->dw0023;
				word32 * esi_146 = esi_139 + 0x01;
				byte al_148 = (byte) eax_142;
				word32 ecx_151 = ecx_133 - 0x01;
				if (eax_142 != 0x00 || ecx_151 == 0x00)
					break;
				*edi_140 = al_148;
				(ui32 *) 0xA4E78057 = (ui32 *) 0xA4E78057 << 166;
				word32 * edi_175 = edi_140 + 0x01;
				*edi_175 = *esi_146;
				ecx_133 = DPB(ecx_151 + 0x01, 166, 0);
				esi_139 = (byte *) (esi_146 + 0x01);
				edi_140 = (byte *) (edi_175 + 0x01);
			}
			struct Eq_174 * ebp_155 = ebp_100 & eax_142;
			ebp_155->dwCC21B83C = ebp_155->dwCC21B83C + 0x01;
			Eq_184 esp_154 = esp_91 + 0x03 ^ ecx_151;
			*(esp_154 - 0x04) = (union Eq_114 *) ss_108;
			word32 v23_162 = Mem159[3024424002:word32] + (esp_154 - 0x04);
			(uint32 *) 3024424002 = v23_162;
			ebp_155->bE7230F55 = ebp_155->bE7230F55 & 166;
			return DPB(3441551110, (v23_162 < 0x00) + 118, 0);
		}
	}
	else
		return eax_142;
}

