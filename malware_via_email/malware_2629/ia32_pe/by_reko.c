// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401026: Register word32 fn00401026(Register byte al, Register word32 ebx)
word32 fn00401026(byte al, word32 ebx)
{
	while (true)
	{
		ptr32 esp_5;
		byte D_6;
		byte CZ_7;
		bu8 al_8;
		word16 ax_9;
		ptr32 ebx_10;
		byte SCZO_11;
		word32 eax_12;
		fn00400FEF();
		return eax_12;
		if (CZ)
			break;
		CZ = cond(*(ebx_10 - 118) * al_8);
		*(esp_5 - 0x04) = 0x6A;
	}
}

// 00411079: Register Eq_29 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	GetCurrentThreadId();
	Eq_33 eax_11 = GetModuleHandleA(&globals->t435624);
	GetCurrentProcessId();
	Eq_42 eax_20 = GetProcAddress(eax_11, &globals->t43562E);
	GetCurrentProcessId();
	GetProcessHeap();
	SizeofResource(0x00, eax_11);
	GetCommandLineA();
	Eq_63 eax_41 = eax_20();
	<anonymous> * eax_49 = (eax_41 ^ 0xC0000005) + 0x004110F5;
	ptr32 esp_51;
	word32 ebp_52;
	byte SCZO_53;
	word32 eax_54;
	byte SZO_55;
	byte C_56;
	byte al_57;
	word32 ebx_58;
	eax_49();
	*(esp_51 - 0x04) = (FARPROC *) eax_20;
	*(esp_51 - 0x08) = 0x00;
	SizeofResource(*(esp_51 - 0x08), *(esp_51 - 0x04));
	*(esp_51 - 0x04) = (FARPROC *) eax_20;
	GetFileType(*(esp_51 - 0x04));
	*(esp_51 - 0x04) = fp - 0x10;
	*(esp_51 - 0x08) = 0x40;
	*(esp_51 - 0x0C) = 0xFDA7;
	GetVersion();
	*(esp_51 - 0x10) = 0x00401000;
	VirtualProtect(*(esp_51 - 0x10), *(esp_51 - 0x0C), *(esp_51 - 0x08), *(esp_51 - 0x04));
	*(esp_51 - 0x04) = (union Eq_63 *) eax_41;
	GetCurrentProcessId();
	*(esp_51 - 0x08) = 0xFDA7;
	GetACP();
	*(esp_51 - 0x0C) = 0x00401000;
	GetCommandLineA();
	word32 esp_99;
	word32 ebp_100;
	byte SCZO_101;
	word32 eax_102;
	byte SZO_103;
	byte C_104;
	byte al_105;
	word32 ebx_106;
	(eax_41 - ~0x40411182)();
	GetCommandLineA();
	return fn00401026((byte) GetACP(), ebx_106);
}

