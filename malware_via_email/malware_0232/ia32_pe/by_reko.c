// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00403463: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	word32 esp_36;
	word32 ebp_37;
	word32 eax_38;
	struct Eq_12 * fs_39;
	byte SCZO_40;
	word32 ebx_41;
	word32 esi_42;
	word32 edi_43;
	byte SZO_44;
	byte C_45;
	word32 ecx_46;
	byte Z_47;
	byte al_48;
	byte bl_49;
	byte CZ_50;
	_set_app_type();
	globals->dw403798 = globals->dw403798 | ~0x00;
	globals->dw40379C = globals->dw40379C | ~0x00;
	word32 esp_62;
	word32 ebp_63;
	word32 * eax_64;
	struct Eq_39 * fs_65;
	byte SCZO_66;
	word32 ebx_67;
	word32 esi_68;
	word32 edi_69;
	byte SZO_70;
	byte C_71;
	word32 ecx_72;
	byte Z_73;
	byte al_74;
	byte bl_75;
	byte CZ_76;
	_p__fmode();
	word32 ecx_78 = globals->dw403674;
	*eax_64 = ecx_78;
	word32 esp_80;
	word32 ebp_81;
	word32 * eax_82;
	struct Eq_62 * fs_83;
	byte SCZO_84;
	word32 ebx_85;
	word32 esi_86;
	word32 edi_87;
	byte SZO_88;
	byte C_89;
	word32 ecx_90;
	byte Z_91;
	byte al_92;
	byte bl_93;
	byte CZ_94;
	_p__commode();
	word32 ecx_96 = globals->dw403670;
	*eax_82 = ecx_96;
	word32 eax_99 = *adjust_fdiv;
	globals->dw403794 = eax_99;
	fn004035F5();
	ptr32 esp_103 = fp - 0x94;
	if (globals->dw401230 == 0x00)
	{
		*(fp - 0x98) = 4208114;
		ptr32 esp_272;
		word32 ebp_273;
		word32 eax_274;
		struct Eq_234 * fs_275;
		byte SCZO_276;
		word32 ebx_277;
		word32 esi_278;
		word32 edi_279;
		byte SZO_280;
		byte C_281;
		word32 ecx_282;
		byte Z_283;
		byte al_284;
		byte bl_285;
		byte CZ_286;
		_setusermatherr();
		esp_103 = esp_272;
	}
	fn004035E0();
	word32 * esp_104 = esp_103 - 0x04;
	*esp_104 = 0x00401218;
	*(esp_104 - 0x04) = 0x00401214;
	ptr32 esp_108;
	word32 ebp_109;
	word32 eax_110;
	struct Eq_119 * fs_111;
	byte SCZO_112;
	word32 ebx_113;
	word32 esi_114;
	word32 edi_115;
	byte SZO_116;
	byte C_117;
	word32 ecx_118;
	byte Z_119;
	byte al_120;
	byte bl_121;
	byte CZ_122;
	initterm();
	*(esp_108 - 0x08) = fp - 0x70;
	*(esp_108 - 0x0C) = globals->dw403668;
	*(esp_108 - 0x10) = fp - 0x68;
	*(esp_108 - 0x14) = fp - 116;
	*(esp_108 - 0x18) = fp - 100;
	ptr32 esp_141;
	word32 ebp_142;
	word32 eax_143;
	struct Eq_171 * fs_144;
	byte SCZO_145;
	word32 ebx_146;
	word32 esi_147;
	word32 edi_148;
	byte SZO_149;
	byte C_150;
	word32 ecx_151;
	byte Z_152;
	byte al_153;
	byte bl_154;
	byte CZ_155;
	_getmainargs();
	*(esp_141 - 0x08) = 0x00401210;
	*(esp_141 - 0x0C) = 0x00401204;
	struct Eq_197 * esp_161;
	word32 ebp_162;
	word32 eax_163;
	struct Eq_200 * fs_164;
	byte SCZO_165;
	word32 ebx_166;
	word32 esi_167;
	word32 edi_168;
	byte SZO_169;
	byte C_170;
	word32 ecx_171;
	byte Z_172;
	byte al_173;
	cu8 bl_174;
	byte CZ_175;
	initterm();
	cu8 * esi_179 = *acmdln;
	if (*esi_179 == 0x22)
	{
		do
		{
			esi_179 = esi_179 + 0x01;
			cu8 al_249 = *esi_179;
		} while (al_249 == bl_174 || al_249 == 0x22);
		if (*esi_179 == 0x22)
		{
l00403552:
			esi_179 = esi_179 + 0x01;
		}
	}
	else
	{
		while (*esi_179 > 0x20)
			esi_179 = esi_179 + 0x01;
	}
	cu8 al_188 = *esi_179;
	if (al_188 == bl_174 || al_188 > 0x20)
	{
		Eq_276 eax_204;
		esp_161->t001C = fp - 0x60;
		GetStartupInfoA(esp_161->t001C);
		if (0x00 != 0x00)
			eax_204 = (word32) wLoc30;
		else
		{
			&esp_161->t001C.u0->unused = 0x0A;
			eax_204 = esp_161->t001C;
		}
		esp_161->t001C = eax_204;
		esp_161->ptr0018 = esi_179;
		esp_161->dw0014 = 0x00;
		&esp_161->t0010.u0->unused = 0x00;
		Eq_276 eax_214 = GetModuleHandleA(esp_161->t0010);
		esp_161->t0010 = eax_214;
		fn004035FC(dwArg00, dwArg04, dwArg08, dwArg0C);
		esp_161->t001C = eax_214;
		exit(esp_161->t001C);
	}
	goto l00403552;
}

// 004035E0: void fn004035E0()
void fn004035E0()
{
	word32 esp_6;
	word32 ecx_7;
	controlfp();
	return;
}

// 004035F5: void fn004035F5()
void fn004035F5()
{
	return;
}

// 004035FC: void fn004035FC(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack word32 dwArg10)
void fn004035FC(word32 dwArg04, word32 dwArg08, word32 dwArg0C, word32 dwArg10)
{
	word32 esp_18;
	MFC42.DLL!Ordinal_1576();
	return;
}

