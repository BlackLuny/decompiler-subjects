// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004020B8: Register Eq_2 Win32CrtStartup()
Eq_2 Win32CrtStartup()
{
	Eq_2 eax_10 = SwitchDesktop(dwArg04);
	if (eax_10 == 0x00)
		eax_10 = fn004020ED((byte) GetPrivateProfileIntA(fp - 0x04, fp - 0x04, 0xF5, fp - 0x04), 0xF5);
	return eax_10;
}

// 004020ED: Register word32 fn004020ED(Register byte bl, Stack word32 dwArg00)
word32 fn004020ED(byte bl, word32 dwArg00)
{
fn004020ED_entry:
	word32 ecx_27 = 0x01E3
	word32 * esp_28 = fp - 0x04
	union Eq_38 * esi_100 = dwArg00 + 181
	Eq_42 edi_101 = VirtualAlloc(0x00, 84440, 0x3000, 0x40)
	uint32 edx_37 = DPB(0x29E95BEB, bl + ~0x14, 0)
	word32 ebp_104 = 0x00
	goto l00402144
l004020ED:
l00402144:
	uint32 * esp_50 = esp_28 - 0x04
	*esp_50 = edx_37
	*(esp_50 - 0x04) = ecx_27
	word32 ecx_59 = *(esp_50 - 0x04)
	*edi_101 = (word32) *edi_101 + (byte) ((char *) (*esi_100) + *esp_50)
	uint32 edx_63 = *esp_50
	esp_28 = esp_50 + 0x01
	esi_100 = (union Eq_38 *) ((char *) esi_100 + 0x01)
	edi_101 = edi_101 + 0x01
	ebp_104 = ebp_104 + 0x01
	uint32 edx_111 = edx_63 >> 0x08
	byte dl_102 = (byte) (edx_63 >> 0x08)
	branch 0x04 != ebp_104 l00402183
l00402177:
	edx_111 = 0x29E95BEB
	dl_102 = ~0x14
	ebp_104 = 0x00
l00402183:
	byte dl_86 = dl_102 + bl
	word32 ecx_88 = ecx_59 - 237239
	edx_37 = DPB(edx_111, dl_86, 0)
	ecx_27 = ecx_88 + 237238
	branch ecx_88 != 237238 l00402144
l00402195:
	<anonymous> * eax_93 = *esp_28
	word32 eax_96
	byte SCZO_97
	byte SZO_105
	byte C_106
	byte Z_107
	eax_93()
	branch false l00402183
l0040219C:
	return eax_96
fn004020ED_exit:
}

