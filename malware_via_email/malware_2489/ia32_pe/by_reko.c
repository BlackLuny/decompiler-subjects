// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0041196D: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	if ((IsWindow(dwArg04) | 0x01) != 0x01)
		;
	else
		GetPrivateProfileIntA(fp - 0x04, fp - 0x04, 252, fp - 0x04);
}

// 004119A7: FpuStack real64 fn004119A7(Register word32 ebx, Register (ptr Eq_27) ds, Stack word32 dwArg00, FpuStack real64 rArg0, FpuStack real64 rArg5)
real64 fn004119A7(word32 ebx, Eq_27 * ds, word32 dwArg00, real64 rArg0, real64 rArg5)
{
	Eq_30 eax_9 = VirtualAlloc(0x00, 0x00014813, 0x3000, 0x40);
	word32 ecx_104 = 0x01F6;
	union Eq_44 * esi_24 = dwArg00 + 166;
	Eq_30 edi_26 = eax_9;
	uint32 edx_100 = DPB(0xA7E0DA0C, bl + 0x0C, 0);
	word32 ebp_44 = 0x00;
	do
	{
		*edi_26 = (word32) *edi_26 + (byte) ((char *) (*esi_24) + edx_100);
		word32 ebp_78 = ebp_44 - 460344;
		uint32 edx_583 = edx_100 >> 0x08;
		esi_24 = (union Eq_44 *) ((char *) esi_24 + 0x01);
		edi_26 = edi_26 + 0x01;
		ebp_44 = ebp_78 + 0x00070639;
		byte dl_585 = (byte) edx_583;
		if (0x04 == ebp_78 + 0x00070639)
		{
			edx_583 = 0xA7E0DA0C;
			dl_585 = 0x0C;
			ebp_44 = 0x00;
		}
		edx_100 = DPB(edx_583, dl_585 + bl, 0);
		ecx_104 = ecx_597 - 0x01;
		word32 ecx_597 = ecx_104;
	} while (ecx_597 != 0x01);
	ptr32 esp_121;
	struct Eq_97 * eax_122;
	struct Eq_98 * edi_123;
	byte SCZO_124;
	struct Eq_100 * esi_125;
	struct Eq_97 * ecx_126;
	struct Eq_102 * edx_127;
	byte dl_128;
	word32 ebp_130;
	byte cl_131;
	byte SZO_132;
	byte Z_133;
	byte C_134;
	byte ah_135;
	byte FPUF_136;
	byte bh_137;
	byte dh_138;
	byte D_139;
	byte ch_140;
	byte al_142;
	Eq_116 gs_143;
	word16 si_144;
	struct Eq_118 * ss_145;
	word16 dx_146;
	byte CZP_148;
	Eq_121 ds_149;
	byte SCZDOP_150;
	byte O_151;
	byte SO_153;
	bool P_147;
	byte bl_129;
	word16 bx_152;
	struct Eq_128 * ebx_141;
	eax_9();
	if (ecx_126 == eax_122)
		return rArg0;
	edi_123->b0000 = esi_125->b0000;
	cu8 dh_207 = dh_138 + edx_127->b27799F2C;
	*(esi_125 - 0x07) = *(esi_125 - 0x07) - bl_129 - (dh_207 < 0x00);
	ui8 ch_216 = ch_140 ^ ((edi_123->a0001))[ebx_141].b0000;
	byte * ecx_217 = DPB(ecx_126, ch_216, 8);
	word32 ecx_219 = DPB(ecx_217, cl_131 | *ecx_217, 0);
	edi_123->bF329B773 = edi_123->bF329B773 | ch_216;
	struct Eq_177 * edx_208 = DPB(edx_127, dh_207, 8);
	edx_208->t0000.u3 = gs_143;
	*(esp_121 - 0x04) = esp_121;
	Eq_187 al_204 = (byte) ebp_130;
	struct Eq_97 * ebp_205 = eax_122;
	word16 dx_209 = DPB(dx_146, dh_207, 8);
	byte ** edi_232 = &edi_123->a0001->b0000 + 0x01;
	ptr32 esp_235 = esp_121 - 0x04;
	byte * eax_238 = DPB(ebp_130, esi_125->b0001, 0);
	struct Eq_202 * esi_242 = DPB(&esi_125->b0001 + 0x01, ss_145, 0);
	Eq_206 edi_333;
	struct Eq_202 * eax_322;
	Eq_208 SCZDOP_330;
	Eq_208 C_328;
	ci8 al_321;
	word32 * esp_306;
	struct Eq_212 * ecx_251;
	byte cl_248;
	byte * eax_261;
	byte al_258;
	byte ah_257;
	if (al_204 >= ((edi_123->a0001))[0x00].b0000)
	{
		__outdw(edx_208, DPB(eax_238, 0xE0, 8));
		eax_122->dw97EB3155 = eax_122->dw97EB3155 - 113;
		ebx_141->dw4E346030 = ebx_141->dw4E346030 & 117;
		eax_261 = (byte *) esi_242[0x04];
		ah_257 = SLICE(eax_261, byte, 8);
		al_258 = (byte) eax_261;
		esi_242 = esi_242 + 0x08;
		ecx_251 = ecx_219 - 0x01;
		cl_248 = (byte) (ecx_219 - 0x01);
		if (ebx_141->dw4E346030 != 0x00 && ecx_219 != 0x01)
			goto l00411BB7;
		*(esp_121 - 0x08) = (struct Eq_177 **) edx_208;
		eax_238 = DPB(eax_261, al_258 & 0x5D, 0);
		esp_235 = esp_121 - 0x08;
		if (*(eax_122 - 0x20) != ~0x46)
			esi_242 = ebx_141->ptrF85DE09B;
		*eax_238 = *eax_238 + 4219829683;
		ecx_219 = DPB(ecx_219 - 0x01, 0x70, 8);
	}
	else
	{
		bl_129 = 0x7D;
		ebx_141 = DPB(ebx_141, 0x7D, 0);
		bx_152 = DPB(bx_152, 0x7D, 0);
	}
	do
	{
		eax_238 = eax_238 - 0x01;
		__outb(dx_209, (byte) eax_238);
		esi_242 = esi_242 + 0x01;
	} while (P_147);
	byte ** esp_477 = esp_235 - 0x04;
	*esp_477 = (byte **) eax_238;
	byte * esp_479 = *esp_477;
	*esp_479 = (byte) (struct Eq_338 *) 2069701674;
	struct Eq_338 * esp_486 = *esp_479;
	(ui32 *) 0x6934828A = (ui32 *) 0x6934828A & 0x33;
	esp_486->t0002 = ds_149;
	edi_333 = *(ebx_141 - 0x10) *s 0x28;
	ecx_251 = ecx_219 - 0x01;
	Eq_208 SCZO_508 = cond(edi_333);
	P_147 = cond(rArg0 - rArg5);
	esp_306 = (word32 *) &esp_486->t0002;
	cl_248 = (byte) ecx_251;
	eax_322 = esi_242;
	al_321 = (byte) esi_242;
	esi_242 = (struct Eq_202 *) (eax_238 + -1490356131);
	ebp_205 = ecx_251->dw0000 *s ~0x0C;
	C_328 = SCZO_508;
	SCZDOP_330 = SCZO_508;
l00411B9A:
	struct Eq_202 ***** esp_365 = esp_306 - 0x04;
	*esp_365 = (struct Eq_202 *****) eax_322;
	*(esp_365 - (struct Eq_202 *****) 0x04) = (union Eq_208 *) SCZDOP_330;
	edi_232 = edi_333 + Mem368[esi_242 + 0x00:word32] + C_328 & esp_365 - 0x04;
	__outb(0x23, al_321);
	int64 edx_eax_373 = ecx_251->dw0000 *s eax_322;
	struct Eq_202 * esp_371 = *(esp_365 - (struct Eq_202 *****) 0x04);
	byte * eax_374 = (word32) edx_eax_373;
	Mem382[eax_374 - 0x03 + 0x00:byte] = Mem368[eax_374 - 0x03 + 0x00:byte] & cl_248;
	esp_235 = esp_371 + 0x04;
	edx_208 = SLICE(edx_eax_373, word32, 32);
	if (OVERFLOW(*(eax_374 - (byte *) 0x03)))
		;
	eax_261 = eax_374 & 2939252024;
	ah_257 = SLICE(eax_374 & 2939252024, byte, 8);
	al_258 = (byte) (eax_374 & 2939252024);
	if (P_147)
	{
		esp_371->t0000 = eax_374 & 2939252024;
		*(esp_371 - 0x04) = (union Eq_390 *) false;
		*(esp_371 - 0x08) = 0x29;
		word32 esp_418;
		word32 eax_419;
		word32 edi_420;
		byte SCZO_421;
		word32 esi_422;
		word32 ecx_423;
		word32 edx_424;
		byte dl_425;
		byte bl_426;
		word32 ebp_427;
		byte cl_428;
		byte SZO_429;
		byte Z_430;
		byte C_431;
		byte ah_432;
		byte FPUF_433;
		byte bh_434;
		byte dh_435;
		byte D_436;
		byte ch_437;
		word32 ebx_438;
		byte al_439;
		struct Eq_424 * gs_440;
		word16 si_441;
		struct Eq_426 * ss_442;
		word16 dx_443;
		byte P_444;
		byte CZP_445;
		struct Eq_430 * ds_446;
		byte SCZDOP_447;
		byte O_448;
		word16 bx_449;
		byte SO_450;
		fnC041EC45();
		return rArg0;
	}
l00411BB7:
	byte v49_265 = *eax_261 - ah_257;
	*eax_261 = v49_265;
	__outb(edx_208, al_258);
	struct Eq_274 * esi_269 = esi_242 + 0x01;
	Mem272[esi_269 + 627751054 + edx_208:word32] = __rcr(Mem266[esi_269 + 627751054 + edx_208:word32], cl_248, cond(v49_265));
	struct Eq_288 * edi_282 = (char *) edi_232 + 0x04;
	if (P_147)
	{
		*eax_261 = __rol(*eax_261, 0x01);
		*eax_261 = __rol(*eax_261, ~0x32);
	}
	*eax_261 = *eax_261 - ah_257 - (eax_261 < *edi_232);
	__outb(edx_208, al_258);
	int32 v52_286 = ebx_141->dw0000 >> cl_248;
	ebx_141->dw0000 = v52_286;
	byte * eax_291 = DPB(eax_261, __inb(0x5E), 0);
	edi_282->dwAD16E82B = __rcr(edi_282->dwAD16E82B, cl_248, cond(v52_286));
	bl_129 = bl_129 + ecx_251->b0009 + ((edi_282->dwAD16E82B & 0x01 << cl_248) != 0x00);
	__sti();
	ebp_205 = &ebp_205->dw97EB3155 + 0x1A0533AB;
	esp_306 = esp_235 - 0x04;
	*esp_306 = (word32) cond(ebp_205);
	ebx_141 = DPB(ebx_141, bl_129, 0);
	esi_269[0x05] = (struct Eq_274) (esi_269[0x05] ^ ebx_141);
	bx_152 = DPB(bx_152, bl_129, 0);
	rArg0 = rArg0 / edx_208->t0000;
	__arpl(esi_269[0x05], bx_152, &esi_269[0x05]);
	Eq_517 eax_316 = esi_269[0x05];
	al_321 = (byte) eax_316 + 0x5C + ((byte) (eax_291 + -215399529) < edi_282->b0004);
	edi_282->b0005 = __in(edx_208);
	Eq_208 SCZO_324 = cond(al_321);
	esi_242 = esi_269 + 0x09;
	eax_322 = (struct Eq_202 *) DPB(eax_316, al_321, 0);
	C_328 = SCZO_324;
	SCZDOP_330 = SCZO_324;
	edi_333 = &edi_282->b0005 + 0x01;
	if (al_321 >= 0x00)
		__hlt();
	goto l00411B9A;
}

