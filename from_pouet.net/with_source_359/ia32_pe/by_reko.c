// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 00401000: void fn00401000()
void fn00401000()
{
	Eq_2 edx_16 = globals->t4020DA;
	bcu8 bl_17 = 0x00;
	do
	{
		*edx_16 = bl_17 >> 0x01;
		struct Eq_12 * edx_11 = (word32) edx_16 + 0x01;
		edx_11->b0000 = bl_17;
		edx_11->b0001 = bl_17;
		edx_16 = &edx_11->b0001 + 0x02;
		bl_17 = bl_17 + 0x01;
	} while (bl_17 != 0x00);
	return;
}

// 0040101B: void fn0040101B()
void fn0040101B()
{
	__wait();
}

// 00401172: Register Eq_29 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	Eq_2 eax_6 = GlobalAlloc(0x00, 500000);
	if (eax_6 != 0x00)
	{
		globals->t4020E2 = eax_6;
		globals->t4020DA = eax_6;
		Mem78[0x004020D6:word32] = eax_6 + 2000;
		globals->t40208A = GetModuleHandleW(null);
		globals->t40208E = LoadIconW(0x00, (WCHAR *) 0x7F00);
		Eq_75 eax_95 = LoadCursorW(0x00, (WCHAR *) 0x7F00);
		globals->t402092 = eax_95;
		if (DPB(eax_95, RegisterClassW(&globals->t40207A), 0) != null)
		{
			Eq_42 eax_130 = CreateWindowExW(0x00, &globals->t402000, &globals->t402012, 0x10CF0000, 0x8000, 0x8000, 0x0280, 500, null, null, globals->t40208A, null);
			if (eax_130 != null)
			{
				globals->t4020A2 = eax_130;
				globals->t4020A6 = GetDC(eax_130);
				fn00401000();
				fn0040101B();
				while (true)
				{
					*(fp - 0x04) = 0x01;
					*(fp - 0x08) = 0x00;
					*(fp - 0x0C) = 0x00;
					*(fp - 0x10) = 0x00;
					*(fp - 0x14) = 0x004020AA;
					PeekMessageW(*(fp - 0x14), *(fp - 0x10), *(fp - 0x0C), *(fp - 0x08), *(fp - 0x04));
					if (globals->dw4020AE == 0x12)
						break;
					*(fp - 0x04) = 0x004020AA;
					TranslateMessage(*(fp - 0x04));
					*(fp - 0x04) = 0x004020AA;
					DispatchMessageW(*(fp - 0x04));
					fn0040101B();
					globals->dw4020DE = globals->dw4020DE + 0x01;
				}
l00401285:
				*(fp - 0x04) = (HDC *) globals->t4020A6;
				*(fp - 0x08) = (HWND *) globals->t4020A2;
				ReleaseDC(*(fp - 0x08), *(fp - 0x04));
				*(fp - 0x04) = (union Eq_2 *) globals->t4020E2;
				GlobalFree(*(fp - 0x04));
				*(fp - 0x04) = globals->dw4020B2;
				ExitProcess(*(fp - 0x04));
			}
		}
	}
	MessageBoxW(null, &globals->t402022, null, 0x10);
	goto l00401285;
}

