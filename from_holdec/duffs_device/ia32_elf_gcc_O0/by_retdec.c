//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

// ------------------- Function Prototypes --------------------

void copy1_eight_times(int16_t * to, int16_t * from, int32_t count);
void copy1_four_times(int16_t * to, int16_t * from, int32_t count);
void copy2_eight_times(int16_t * to, int16_t * from, int32_t n);
void copy2_four_times(int16_t * to, int16_t * from, int32_t n);

// ------------------------ Functions -------------------------

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x80483f4 - 0x8048497
// Line range:    4 - 19
void copy1_four_times(int16_t * to, int16_t * from, int32_t count) {
    int32_t v1 = count / 64; // 0x8048408
    int32_t v2 = count % 4; // 0x804841e
    int16_t * v3; // bp+832
    int16_t * v4; // bp+833
    int16_t * v5; // bp+834
    int16_t * v6; // bp+835
    int16_t * v7; // bp+828
    int16_t * v8; // bp+829
    int16_t * v9; // bp+830
    int16_t * v10; // bp+831
    int32_t v11; // 0x804848c27
    if (v2 != 1) {
        // 0x8048425
        if (v2 <= 1) {
            // 0x8048496
            return;
        }
        // 0x8048430
        switch (v2) {
            case 2: {
                v4 = to;
                v8 = from;
              lab_0x8048464:
                // 0x8048464
                *v4 = *v8;
                v3 = (int16_t *)((int32_t)v4 + 2);
                v7 = (int16_t *)((int32_t)v8 + 2);
                v11 = v1;
                // branch -> 0x8048478
                goto lab_0x8048478_2;
                break;
            }
            case 3: {
                v5 = to;
                v9 = from;
              lab_0x8048450_2:
                // 0x8048450
                *v5 = *v9;
                v4 = (int16_t *)((int32_t)v5 + 2);
                v8 = (int16_t *)((int32_t)v9 + 2);
                // branch -> 0x8048464
                goto lab_0x8048464;
                break;
            }
        }
        // 0x8048496
        return;
    }
    v3 = to;
    v7 = from;
    v11 = v1;
  lab_0x8048478_2:
    // 0x8048478
    *v3 = *v7;
    int32_t v12 = v11 - 1; // 0x804848c
    if (v12 <= 0) {
        // 0x8048496
        return;
    }
    v6 = (int16_t *)((int32_t)v3 + 2);
    v10 = (int16_t *)((int32_t)v7 + 2);
    // 0x804843c
    *v6 = *v10;
    v5 = (int16_t *)((int32_t)v6 + 2);
    v9 = (int16_t *)((int32_t)v10 + 2);
    // branch -> 0x8048450
    // 0x8048450
    *v5 = *v9;
    v4 = (int16_t *)((int32_t)v5 + 2);
    v8 = (int16_t *)((int32_t)v9 + 2);
    // branch -> 0x8048464
    // 0x8048464
    *v4 = *v8;
    v3 = (int16_t *)((int32_t)v4 + 2);
    v7 = (int16_t *)((int32_t)v8 + 2);
    v11 = v12;
    // branch -> 0x8048478
    goto lab_0x8048478_2;
}

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x8048498 - 0x8048585
// Line range:    21 - 44
void copy1_eight_times(int16_t * to, int16_t * from, int32_t count) {
    int32_t v1 = count / 0x4000; // 0x80484ac
    int16_t * v2; // bp+844
    int16_t * v3; // bp+845
    int16_t * v4; // bp+846
    int16_t * v5; // bp+847
    int16_t * v6; // bp+848
    int16_t * v7; // bp+849
    int16_t * v8; // bp+850
    int16_t * v9; // bp+851
    int16_t * v10; // bp+836
    int16_t * v11; // bp+837
    int16_t * v12; // bp+838
    int16_t * v13; // bp+839
    int16_t * v14; // bp+840
    int16_t * v15; // bp+841
    int16_t * v16; // bp+842
    int16_t * v17; // bp+843
    int32_t v18; // 0x8048576
    int32_t v19; // 0x804857634
    switch (count % 8) {
        case 0: {
            v9 = to;
            v17 = from;
            v19 = v1;
          lab_0x80484d6_2:
            // 0x80484d6
            *v9 = *v17;
            v8 = (int16_t *)((int32_t)v9 + 2);
            v16 = (int16_t *)((int32_t)v17 + 2);
            // branch -> 0x80484ea
            // 0x80484ea
            *v8 = *v16;
            v7 = (int16_t *)((int32_t)v8 + 2);
            v15 = (int16_t *)((int32_t)v16 + 2);
            // branch -> 0x80484fe
            // 0x80484fe
            *v7 = *v15;
            v6 = (int16_t *)((int32_t)v7 + 2);
            v14 = (int16_t *)((int32_t)v15 + 2);
            // branch -> 0x8048512
            // 0x8048512
            *v6 = *v14;
            v5 = (int16_t *)((int32_t)v6 + 2);
            v13 = (int16_t *)((int32_t)v14 + 2);
            // branch -> 0x8048526
            // 0x8048526
            *v5 = *v13;
            v4 = (int16_t *)((int32_t)v5 + 2);
            v12 = (int16_t *)((int32_t)v13 + 2);
            // branch -> 0x804853a
            // 0x804853a
            *v4 = *v12;
            v3 = (int16_t *)((int32_t)v4 + 2);
            v11 = (int16_t *)((int32_t)v12 + 2);
            // branch -> 0x804854e
            // 0x804854e
            *v3 = *v11;
            v2 = (int16_t *)((int32_t)v3 + 2);
            v10 = (int16_t *)((int32_t)v11 + 2);
            // branch -> 0x8048562
            // 0x8048562
            *v2 = *v10;
            v18 = v19 - 1;
            if (v18 > 0) {
                v9 = (int16_t *)((int32_t)v2 + 2);
                v17 = (int16_t *)((int32_t)v10 + 2);
                v19 = v18;
                goto lab_0x80484d6_2;
            }
            // 0x8048584
            return;
        }
        case 1: {
            v2 = to;
            v10 = from;
          lab_0x8048562:
            // 0x8048562
            *v2 = *v10;
            v18 = v1 - 1;
            if (v18 > 0) {
                v9 = (int16_t *)((int32_t)v2 + 2);
                v17 = (int16_t *)((int32_t)v10 + 2);
                v19 = v18;
                goto lab_0x80484d6_2;
            }
            // 0x8048584
            return;
        }
        case 2: {
            v3 = to;
            v11 = from;
          lab_0x804854e:
            // 0x804854e
            *v3 = *v11;
            v2 = (int16_t *)((int32_t)v3 + 2);
            v10 = (int16_t *)((int32_t)v11 + 2);
            // branch -> 0x8048562
            goto lab_0x8048562;
            break;
        }
        case 3: {
            v4 = to;
            v12 = from;
          lab_0x804853a:
            // 0x804853a
            *v4 = *v12;
            v3 = (int16_t *)((int32_t)v4 + 2);
            v11 = (int16_t *)((int32_t)v12 + 2);
            // branch -> 0x804854e
            goto lab_0x804854e;
            break;
        }
        case 4: {
            v5 = to;
            v13 = from;
          lab_0x8048526:
            // 0x8048526
            *v5 = *v13;
            v4 = (int16_t *)((int32_t)v5 + 2);
            v12 = (int16_t *)((int32_t)v13 + 2);
            // branch -> 0x804853a
            goto lab_0x804853a;
            break;
        }
        case 5: {
            v6 = to;
            v14 = from;
          lab_0x8048512:
            // 0x8048512
            *v6 = *v14;
            v5 = (int16_t *)((int32_t)v6 + 2);
            v13 = (int16_t *)((int32_t)v14 + 2);
            // branch -> 0x8048526
            goto lab_0x8048526;
            break;
        }
        case 6: {
            v7 = to;
            v15 = from;
          lab_0x80484fe:
            // 0x80484fe
            *v7 = *v15;
            v6 = (int16_t *)((int32_t)v7 + 2);
            v14 = (int16_t *)((int32_t)v15 + 2);
            // branch -> 0x8048512
            goto lab_0x8048512;
            break;
        }
        case 7: {
            v8 = to;
            v16 = from;
            // 0x80484ea
            *v8 = *v16;
            v7 = (int16_t *)((int32_t)v8 + 2);
            v15 = (int16_t *)((int32_t)v16 + 2);
            // branch -> 0x80484fe
            goto lab_0x80484fe;
        }
    }
}

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x8048586 - 0x8048611
// Line range:    46 - 76
void copy2_four_times(int16_t * to, int16_t * from, int32_t n) {
    // 0x8048586
    if (n < 1) {
        // 0x804860f
        return;
    }
    while (true) {
        // 0x8048595
        int16_t * v1; // bp+821
        int16_t * v2; // bp+822
        int16_t * v3; // bp+823
        int16_t * v4; // bp+816
        int16_t * v5; // bp+817
        int16_t * v6; // bp+818
        int32_t v7; // 0x8048605
        switch (4 - n) {
            default: {
                // 0x80485ac
                *to = *from;
                v3 = (int16_t *)((int32_t)to + 2);
                v6 = (int16_t *)((int32_t)from + 2);
                // branch -> 0x80485c3
                // 0x80485c3
                *v3 = *v6;
                v2 = (int16_t *)((int32_t)v3 + 2);
                v5 = (int16_t *)((int32_t)v6 + 2);
                // branch -> 0x80485da
                // 0x80485da
                *v2 = *v5;
                v1 = (int16_t *)((int32_t)v2 + 2);
                v4 = (int16_t *)((int32_t)v5 + 2);
                // branch -> 0x80485f1
                // 0x80485f1
                *v1 = *v4;
                v7 = n - 4;
                if (v7 == 0) {
                    // break (via goto) -> 0x804860f
                    goto lab_0x804860f_25;
                }
                from = (int16_t *)((int32_t)v4 + 2);
                n = v7;
                to = (int16_t *)((int32_t)v1 + 2);
                // continue -> 0x8048595
                continue;
            }
            case 2: {
              lab_0x80485da:
                // 0x80485da
                *v2 = *v5;
                // branch -> 0x80485f1
            }
            case 3: {
                v1 = to;
                v4 = from;
                // 0x80485f1
                *v1 = *v4;
                v7 = n - 4;
                if (v7 == 0) {
                    // break (via goto) -> 0x804860f
                    goto lab_0x804860f_25;
                }
                from = (int16_t *)((int32_t)v4 + 2);
                n = v7;
                to = (int16_t *)((int32_t)v1 + 2);
                // continue -> 0x8048595
                continue;
            }
            case 1: {
                v3 = to;
                v6 = from;
              lab_0x80485c3:
                // 0x80485c3
                *v3 = *v6;
                v2 = (int16_t *)((int32_t)v3 + 2);
                v5 = (int16_t *)((int32_t)v6 + 2);
                // branch -> 0x80485da
                goto lab_0x80485da;
                break;
            }
        }
        while (true) {
            // 0x8048595
            int16_t * v8; // 0x80485cf_8
            int16_t * v9; // 0x80485d3_8
            int16_t * v10; // 0x80485e6_8
            int16_t * v11; // 0x80485ea_8
            int16_t v12; // 0x80485c6
            int16_t v13; // 0x80485dd
            switch (4 - n) {
                default: {
                    // 0x80485ac
                }
                case 2: {
                  lab_0x80485da_2:
                    // 0x80485da
                    v13 = *v5;
                    *v2 = v13;
                    v10 = (int16_t *)((int32_t)v2 + 2);
                    v11 = (int16_t *)((int32_t)v5 + 2);
                    // branch -> 0x80485f1
                    v1 = v10;
                    v4 = v11;
                }
                case 3: {
                    v1 = to;
                }
                case 1: {
                  lab_0x80485c3_2:
                    // 0x80485c3
                    v12 = *v6;
                    *v3 = v12;
                    v8 = (int16_t *)((int32_t)v3 + 2);
                    v9 = (int16_t *)((int32_t)v6 + 2);
                    v2 = v8;
                    v5 = v9;
                    // branch -> 0x80485da
                    goto lab_0x80485da_2;
                    break;
                }
            }
            while (true) {
                // 0x8048595
                switch (4 - n) {
                    default: {
                        // 0x80485ac
                    }
                    case 2: {
                      lab_0x80485da_3:
                        // 0x80485da
                        v13 = *v5;
                        *v2 = v13;
                        v10 = (int16_t *)((int32_t)v2 + 2);
                        v11 = (int16_t *)((int32_t)v5 + 2);
                        // branch -> 0x80485f1
                        v1 = v10;
                        v4 = v11;
                    }
                    case 3: {
                        v1 = to;
                    }
                    case 1: {
                      lab_0x80485c3_3:
                        // 0x80485c3
                        v12 = *v6;
                        *v3 = v12;
                        v8 = (int16_t *)((int32_t)v3 + 2);
                        v9 = (int16_t *)((int32_t)v6 + 2);
                        v2 = v8;
                        v5 = v9;
                        // branch -> 0x80485da
                        goto lab_0x80485da_3;
                        break;
                    }
                }
                while (true) {
                    // 0x8048595
                    switch (4 - n) {
                        default: {
                            // 0x80485ac
                        }
                        case 2: {
                          lab_0x80485da_4:
                            // 0x80485da
                            v13 = *v5;
                            *v2 = v13;
                            v10 = (int16_t *)((int32_t)v2 + 2);
                            v11 = (int16_t *)((int32_t)v5 + 2);
                            // branch -> 0x80485f1
                            v1 = v10;
                            v4 = v11;
                        }
                        case 3: {
                            v1 = to;
                        }
                        case 1: {
                          lab_0x80485c3_4:
                            // 0x80485c3
                            v12 = *v6;
                            *v3 = v12;
                            v8 = (int16_t *)((int32_t)v3 + 2);
                            v9 = (int16_t *)((int32_t)v6 + 2);
                            v2 = v8;
                            v5 = v9;
                            // branch -> 0x80485da
                            goto lab_0x80485da_4;
                            break;
                        }
                    }
                    while (true) {
                        // 0x8048595
                        switch (4 - n) {
                            default: {
                                // 0x80485ac
                            }
                            case 2: {
                              lab_0x80485da_5:
                                // 0x80485da
                                v13 = *v5;
                                *v2 = v13;
                                v10 = (int16_t *)((int32_t)v2 + 2);
                                v11 = (int16_t *)((int32_t)v5 + 2);
                                // branch -> 0x80485f1
                                v1 = v10;
                                v4 = v11;
                            }
                            case 3: {
                                v1 = to;
                            }
                            case 1: {
                              lab_0x80485c3_5:
                                // 0x80485c3
                                v12 = *v6;
                                *v3 = v12;
                                v8 = (int16_t *)((int32_t)v3 + 2);
                                v9 = (int16_t *)((int32_t)v6 + 2);
                                v2 = v8;
                                v5 = v9;
                                // branch -> 0x80485da
                                goto lab_0x80485da_5;
                                break;
                            }
                        }
                        while (true) {
                            // 0x8048595
                            switch (4 - n) {
                                default: {
                                    // 0x80485ac
                                }
                                case 2: {
                                  lab_0x80485da_6:
                                    // 0x80485da
                                    v13 = *v5;
                                    *v2 = v13;
                                    v10 = (int16_t *)((int32_t)v2 + 2);
                                    v11 = (int16_t *)((int32_t)v5 + 2);
                                    // branch -> 0x80485f1
                                    v1 = v10;
                                    v4 = v11;
                                }
                                case 3: {
                                    v1 = to;
                                }
                                case 1: {
                                  lab_0x80485c3_6:
                                    // 0x80485c3
                                    v12 = *v6;
                                    *v3 = v12;
                                    v8 = (int16_t *)((int32_t)v3 + 2);
                                    v9 = (int16_t *)((int32_t)v6 + 2);
                                    v2 = v8;
                                    v5 = v9;
                                    // branch -> 0x80485da
                                    goto lab_0x80485da_6;
                                    break;
                                }
                            }
                            while (true) {
                                // 0x8048595
                                switch (4 - n) {
                                    default: {
                                        // 0x80485ac
                                    }
                                    case 2: {
                                      lab_0x80485da_7:
                                        // 0x80485da
                                        v13 = *v5;
                                        *v2 = v13;
                                        v10 = (int16_t *)((int32_t)v2 + 2);
                                        v11 = (int16_t *)((int32_t)v5 + 2);
                                        // branch -> 0x80485f1
                                        v1 = v10;
                                        v4 = v11;
                                    }
                                    case 3: {
                                        v1 = to;
                                    }
                                    case 1: {
                                      lab_0x80485c3_7:
                                        // 0x80485c3
                                        v12 = *v6;
                                        *v3 = v12;
                                        v8 = (int16_t *)((int32_t)v3 + 2);
                                        v9 = (int16_t *)((int32_t)v6 + 2);
                                        v2 = v8;
                                        v5 = v9;
                                        // branch -> 0x80485da
                                        goto lab_0x80485da_7;
                                        break;
                                    }
                                }
                                while (true) {
                                    // 0x8048595
                                    switch (4 - n) {
                                        default: {
                                            // 0x80485ac
                                        }
                                        case 2: {
                                          lab_0x80485da_8:
                                            // 0x80485da
                                            v13 = *v5;
                                            *v2 = v13;
                                            v10 = (int16_t *)((int32_t)v2 + 2);
                                            v11 = (int16_t *)((int32_t)v5 + 2);
                                            // branch -> 0x80485f1
                                            v1 = v10;
                                            v4 = v11;
                                        }
                                        case 3: {
                                            v1 = to;
                                        }
                                        case 1: {
                                          lab_0x80485c3_8:
                                            // 0x80485c3
                                            v12 = *v6;
                                            *v3 = v12;
                                            v8 = (int16_t *)((int32_t)v3 + 2);
                                            v9 = (int16_t *)((int32_t)v6 + 2);
                                            v2 = v8;
                                            v5 = v9;
                                            // branch -> 0x80485da
                                            goto lab_0x80485da_8;
                                            break;
                                        }
                                    }
                                    while (true) {
                                        // 0x8048595
                                        switch (4 - n) {
                                            default: {
                                                // 0x80485ac
                                            }
                                            case 2: {
                                              lab_0x80485da_9:
                                                // 0x80485da
                                                v13 = *v5;
                                                *v2 = v13;
                                                v10 = (int16_t *)((int32_t)v2 + 2);
                                                v11 = (int16_t *)((int32_t)v5 + 2);
                                                // branch -> 0x80485f1
                                                v1 = v10;
                                                v4 = v11;
                                            }
                                            case 3: {
                                                v1 = to;
                                            }
                                            case 1: {
                                              lab_0x80485c3_9:
                                                // 0x80485c3
                                                v12 = *v6;
                                                *v3 = v12;
                                                v8 = (int16_t *)((int32_t)v3 + 2);
                                                v9 = (int16_t *)((int32_t)v6 + 2);
                                                v2 = v8;
                                                v5 = v9;
                                                // branch -> 0x80485da
                                                goto lab_0x80485da_9;
                                                break;
                                            }
                                        }
                                        while (true) {
                                            // 0x8048595
                                            switch (4 - n) {
                                                default: {
                                                    // 0x80485ac
                                                }
                                                case 2: {
                                                  lab_0x80485da_10:
                                                    // 0x80485da
                                                    v13 = *v5;
                                                    *v2 = v13;
                                                    v10 = (int16_t *)((int32_t)v2 + 2);
                                                    v11 = (int16_t *)((int32_t)v5 + 2);
                                                    // branch -> 0x80485f1
                                                    v1 = v10;
                                                    v4 = v11;
                                                }
                                                case 3: {
                                                    v1 = to;
                                                }
                                                case 1: {
                                                  lab_0x80485c3_10:
                                                    // 0x80485c3
                                                    v12 = *v6;
                                                    *v3 = v12;
                                                    v8 = (int16_t *)((int32_t)v3 + 2);
                                                    v9 = (int16_t *)((int32_t)v6 + 2);
                                                    v2 = v8;
                                                    v5 = v9;
                                                    // branch -> 0x80485da
                                                    goto lab_0x80485da_10;
                                                    break;
                                                }
                                            }
                                            while (true) {
                                                // 0x8048595
                                                switch (4 - n) {
                                                    default: {
                                                        // 0x80485ac
                                                    }
                                                    case 2: {
                                                      lab_0x80485da_11:
                                                        // 0x80485da
                                                        v13 = *v5;
                                                        *v2 = v13;
                                                        v10 = (int16_t *)((int32_t)v2 + 2);
                                                        v11 = (int16_t *)((int32_t)v5 + 2);
                                                        // branch -> 0x80485f1
                                                        v1 = v10;
                                                        v4 = v11;
                                                    }
                                                    case 3: {
                                                        v1 = to;
                                                    }
                                                    case 1: {
                                                      lab_0x80485c3_11:
                                                        // 0x80485c3
                                                        v12 = *v6;
                                                        *v3 = v12;
                                                        v8 = (int16_t *)((int32_t)v3 + 2);
                                                        v9 = (int16_t *)((int32_t)v6 + 2);
                                                        v2 = v8;
                                                        v5 = v9;
                                                        // branch -> 0x80485da
                                                        goto lab_0x80485da_11;
                                                        break;
                                                    }
                                                }
                                                while (true) {
                                                    // 0x8048595
                                                    switch (4 - n) {
                                                        default: {
                                                            // 0x80485ac
                                                        }
                                                        case 2: {
                                                          lab_0x80485da_12:
                                                            // 0x80485da
                                                            v13 = *v5;
                                                            *v2 = v13;
                                                            v10 = (int16_t *)((int32_t)v2 + 2);
                                                            v11 = (int16_t *)((int32_t)v5 + 2);
                                                            // branch -> 0x80485f1
                                                            v1 = v10;
                                                            v4 = v11;
                                                        }
                                                        case 3: {
                                                            v1 = to;
                                                        }
                                                        case 1: {
                                                          lab_0x80485c3_12:
                                                            // 0x80485c3
                                                            v12 = *v6;
                                                            *v3 = v12;
                                                            v8 = (int16_t *)((int32_t)v3 + 2);
                                                            v9 = (int16_t *)((int32_t)v6 + 2);
                                                            v2 = v8;
                                                            v5 = v9;
                                                            // branch -> 0x80485da
                                                            goto lab_0x80485da_12;
                                                            break;
                                                        }
                                                    }
                                                    while (true) {
                                                        // 0x8048595
                                                        switch (4 - n) {
                                                            default: {
                                                                // 0x80485ac
                                                            }
                                                            case 2: {
                                                              lab_0x80485da_13:
                                                                // 0x80485da
                                                                v13 = *v5;
                                                                *v2 = v13;
                                                                v10 = (int16_t *)((int32_t)v2 + 2);
                                                                v11 = (int16_t *)((int32_t)v5 + 2);
                                                                // branch -> 0x80485f1
                                                                v1 = v10;
                                                                v4 = v11;
                                                            }
                                                            case 3: {
                                                                v1 = to;
                                                            }
                                                            case 1: {
                                                              lab_0x80485c3_13:
                                                                // 0x80485c3
                                                                v12 = *v6;
                                                                *v3 = v12;
                                                                v8 = (int16_t *)((int32_t)v3 + 2);
                                                                v9 = (int16_t *)((int32_t)v6 + 2);
                                                                v2 = v8;
                                                                v5 = v9;
                                                                // branch -> 0x80485da
                                                                goto lab_0x80485da_13;
                                                                break;
                                                            }
                                                        }
                                                        while (true) {
                                                            // 0x8048595
                                                            switch (4 - n) {
                                                                default: {
                                                                    // 0x80485ac
                                                                }
                                                                case 2: {
                                                                  lab_0x80485da_14:
                                                                    // 0x80485da
                                                                    v13 = *v5;
                                                                    *v2 = v13;
                                                                    v10 = (int16_t *)((int32_t)v2 + 2);
                                                                    v11 = (int16_t *)((int32_t)v5 + 2);
                                                                    // branch -> 0x80485f1
                                                                    v1 = v10;
                                                                    v4 = v11;
                                                                }
                                                                case 3: {
                                                                    v1 = to;
                                                                }
                                                                case 1: {
                                                                  lab_0x80485c3_14:
                                                                    // 0x80485c3
                                                                    v12 = *v6;
                                                                    *v3 = v12;
                                                                    v8 = (int16_t *)((int32_t)v3 + 2);
                                                                    v9 = (int16_t *)((int32_t)v6 + 2);
                                                                    v2 = v8;
                                                                    v5 = v9;
                                                                    // branch -> 0x80485da
                                                                    goto lab_0x80485da_14;
                                                                    break;
                                                                }
                                                            }
                                                            while (true) {
                                                                // 0x8048595
                                                                switch (4 - n) {
                                                                    default: {
                                                                        // 0x80485ac
                                                                    }
                                                                    case 2: {
                                                                      lab_0x80485da_15:
                                                                        // 0x80485da
                                                                        v13 = *v5;
                                                                        *v2 = v13;
                                                                        v10 = (int16_t *)((int32_t)v2 + 2);
                                                                        v11 = (int16_t *)((int32_t)v5 + 2);
                                                                        // branch -> 0x80485f1
                                                                        v1 = v10;
                                                                        v4 = v11;
                                                                    }
                                                                    case 3: {
                                                                        v1 = to;
                                                                    }
                                                                    case 1: {
                                                                      lab_0x80485c3_15:
                                                                        // 0x80485c3
                                                                        v12 = *v6;
                                                                        *v3 = v12;
                                                                        v8 = (int16_t *)((int32_t)v3 + 2);
                                                                        v9 = (int16_t *)((int32_t)v6 + 2);
                                                                        v2 = v8;
                                                                        v5 = v9;
                                                                        // branch -> 0x80485da
                                                                        goto lab_0x80485da_15;
                                                                        break;
                                                                    }
                                                                }
                                                                while (true) {
                                                                    // 0x8048595
                                                                    switch (4 - n) {
                                                                        default: {
                                                                            // 0x80485ac
                                                                        }
                                                                        case 2: {
                                                                          lab_0x80485da_16:
                                                                            // 0x80485da
                                                                            v13 = *v5;
                                                                            *v2 = v13;
                                                                            v10 = (int16_t *)((int32_t)v2 + 2);
                                                                            v11 = (int16_t *)((int32_t)v5 + 2);
                                                                            // branch -> 0x80485f1
                                                                            v1 = v10;
                                                                            v4 = v11;
                                                                        }
                                                                        case 3: {
                                                                            v1 = to;
                                                                        }
                                                                        case 1: {
                                                                          lab_0x80485c3_16:
                                                                            // 0x80485c3
                                                                            v12 = *v6;
                                                                            *v3 = v12;
                                                                            v8 = (int16_t *)((int32_t)v3 + 2);
                                                                            v9 = (int16_t *)((int32_t)v6 + 2);
                                                                            v2 = v8;
                                                                            v5 = v9;
                                                                            // branch -> 0x80485da
                                                                            goto lab_0x80485da_16;
                                                                            break;
                                                                        }
                                                                    }
                                                                    while (true) {
                                                                        // 0x8048595
                                                                        switch (4 - n) {
                                                                            default: {
                                                                                // 0x80485ac
                                                                            }
                                                                            case 2: {
                                                                              lab_0x80485da_17:
                                                                                // 0x80485da
                                                                                v13 = *v5;
                                                                                *v2 = v13;
                                                                                v10 = (int16_t *)((int32_t)v2 + 2);
                                                                                v11 = (int16_t *)((int32_t)v5 + 2);
                                                                                // branch -> 0x80485f1
                                                                                v1 = v10;
                                                                                v4 = v11;
                                                                            }
                                                                            case 3: {
                                                                                v1 = to;
                                                                            }
                                                                            case 1: {
                                                                              lab_0x80485c3_17:
                                                                                // 0x80485c3
                                                                                v12 = *v6;
                                                                                *v3 = v12;
                                                                                v8 = (int16_t *)((int32_t)v3 + 2);
                                                                                v9 = (int16_t *)((int32_t)v6 + 2);
                                                                                v2 = v8;
                                                                                v5 = v9;
                                                                                // branch -> 0x80485da
                                                                                goto lab_0x80485da_17;
                                                                                break;
                                                                            }
                                                                        }
                                                                        while (true) {
                                                                            // 0x8048595
                                                                            switch (4 - n) {
                                                                                default: {
                                                                                    // 0x80485ac
                                                                                }
                                                                                case 2: {
                                                                                  lab_0x80485da_18:
                                                                                    // 0x80485da
                                                                                    v13 = *v5;
                                                                                    *v2 = v13;
                                                                                    v10 = (int16_t *)((int32_t)v2 + 2);
                                                                                    v11 = (int16_t *)((int32_t)v5 + 2);
                                                                                    // branch -> 0x80485f1
                                                                                    v1 = v10;
                                                                                    v4 = v11;
                                                                                }
                                                                                case 3: {
                                                                                    v1 = to;
                                                                                }
                                                                                case 1: {
                                                                                  lab_0x80485c3_18:
                                                                                    // 0x80485c3
                                                                                    v12 = *v6;
                                                                                    *v3 = v12;
                                                                                    v8 = (int16_t *)((int32_t)v3 + 2);
                                                                                    v9 = (int16_t *)((int32_t)v6 + 2);
                                                                                    v2 = v8;
                                                                                    v5 = v9;
                                                                                    // branch -> 0x80485da
                                                                                    goto lab_0x80485da_18;
                                                                                    break;
                                                                                }
                                                                            }
                                                                            while (true) {
                                                                                // 0x8048595
                                                                                switch (4 - n) {
                                                                                    default: {
                                                                                        // 0x80485ac
                                                                                    }
                                                                                    case 2: {
                                                                                      lab_0x80485da_19:
                                                                                        // 0x80485da
                                                                                        v13 = *v5;
                                                                                        *v2 = v13;
                                                                                        v10 = (int16_t *)((int32_t)v2 + 2);
                                                                                        v11 = (int16_t *)((int32_t)v5 + 2);
                                                                                        // branch -> 0x80485f1
                                                                                        v1 = v10;
                                                                                        v4 = v11;
                                                                                    }
                                                                                    case 3: {
                                                                                        v1 = to;
                                                                                    }
                                                                                    case 1: {
                                                                                      lab_0x80485c3_19:
                                                                                        // 0x80485c3
                                                                                        v12 = *v6;
                                                                                        *v3 = v12;
                                                                                        v8 = (int16_t *)((int32_t)v3 + 2);
                                                                                        v9 = (int16_t *)((int32_t)v6 + 2);
                                                                                        v2 = v8;
                                                                                        v5 = v9;
                                                                                        // branch -> 0x80485da
                                                                                        goto lab_0x80485da_19;
                                                                                        break;
                                                                                    }
                                                                                }
                                                                                while (true) {
                                                                                    // 0x8048595
                                                                                    switch (4 - n) {
                                                                                        default: {
                                                                                            // 0x80485ac
                                                                                        }
                                                                                        case 2: {
                                                                                          lab_0x80485da_20:
                                                                                            // 0x80485da
                                                                                            v13 = *v5;
                                                                                            *v2 = v13;
                                                                                            v10 = (int16_t *)((int32_t)v2 + 2);
                                                                                            v11 = (int16_t *)((int32_t)v5 + 2);
                                                                                            // branch -> 0x80485f1
                                                                                            v1 = v10;
                                                                                            v4 = v11;
                                                                                        }
                                                                                        case 3: {
                                                                                            v1 = to;
                                                                                        }
                                                                                        case 1: {
                                                                                          lab_0x80485c3_20:
                                                                                            // 0x80485c3
                                                                                            v12 = *v6;
                                                                                            *v3 = v12;
                                                                                            v8 = (int16_t *)((int32_t)v3 + 2);
                                                                                            v9 = (int16_t *)((int32_t)v6 + 2);
                                                                                            v2 = v8;
                                                                                            v5 = v9;
                                                                                            // branch -> 0x80485da
                                                                                            goto lab_0x80485da_20;
                                                                                            break;
                                                                                        }
                                                                                    }
                                                                                    while (true) {
                                                                                        // 0x8048595
                                                                                        switch (4 - n) {
                                                                                            default: {
                                                                                                // 0x80485ac
                                                                                            }
                                                                                            case 2: {
                                                                                              lab_0x80485da_21:
                                                                                                // 0x80485da
                                                                                                v13 = *v5;
                                                                                                *v2 = v13;
                                                                                                v10 = (int16_t *)((int32_t)v2 + 2);
                                                                                                v11 = (int16_t *)((int32_t)v5 + 2);
                                                                                                // branch -> 0x80485f1
                                                                                                v1 = v10;
                                                                                                v4 = v11;
                                                                                            }
                                                                                            case 3: {
                                                                                                v1 = to;
                                                                                            }
                                                                                            case 1: {
                                                                                              lab_0x80485c3_21:
                                                                                                // 0x80485c3
                                                                                                v12 = *v6;
                                                                                                *v3 = v12;
                                                                                                v8 = (int16_t *)((int32_t)v3 + 2);
                                                                                                v9 = (int16_t *)((int32_t)v6 + 2);
                                                                                                v2 = v8;
                                                                                                v5 = v9;
                                                                                                // branch -> 0x80485da
                                                                                                goto lab_0x80485da_21;
                                                                                                break;
                                                                                            }
                                                                                        }
                                                                                        while (true) {
                                                                                            // 0x8048595
                                                                                            switch (4 - n) {
                                                                                                default: {
                                                                                                    // 0x80485ac
                                                                                                }
                                                                                                case 2: {
                                                                                                  lab_0x80485da_22:
                                                                                                    // 0x80485da
                                                                                                    v13 = *v5;
                                                                                                    *v2 = v13;
                                                                                                    v10 = (int16_t *)((int32_t)v2 + 2);
                                                                                                    v11 = (int16_t *)((int32_t)v5 + 2);
                                                                                                    // branch -> 0x80485f1
                                                                                                    v1 = v10;
                                                                                                    v4 = v11;
                                                                                                }
                                                                                                case 3: {
                                                                                                    v1 = to;
                                                                                                }
                                                                                                case 1: {
                                                                                                  lab_0x80485c3_22:
                                                                                                    // 0x80485c3
                                                                                                    v12 = *v6;
                                                                                                    *v3 = v12;
                                                                                                    v8 = (int16_t *)((int32_t)v3 + 2);
                                                                                                    v9 = (int16_t *)((int32_t)v6 + 2);
                                                                                                    v2 = v8;
                                                                                                    v5 = v9;
                                                                                                    // branch -> 0x80485da
                                                                                                    goto lab_0x80485da_22;
                                                                                                    break;
                                                                                                }
                                                                                            }
                                                                                            while (true) {
                                                                                                // 0x8048595
                                                                                                switch (4 - n) {
                                                                                                    default: {
                                                                                                        // 0x80485ac
                                                                                                    }
                                                                                                    case 2: {
                                                                                                      lab_0x80485da_23:
                                                                                                        // 0x80485da
                                                                                                        v13 = *v5;
                                                                                                        *v2 = v13;
                                                                                                        v10 = (int16_t *)((int32_t)v2 + 2);
                                                                                                        v11 = (int16_t *)((int32_t)v5 + 2);
                                                                                                        // branch -> 0x80485f1
                                                                                                        v1 = v10;
                                                                                                        v4 = v11;
                                                                                                    }
                                                                                                    case 3: {
                                                                                                        v1 = to;
                                                                                                    }
                                                                                                    case 1: {
                                                                                                      lab_0x80485c3_23:
                                                                                                        // 0x80485c3
                                                                                                        v12 = *v6;
                                                                                                        *v3 = v12;
                                                                                                        v8 = (int16_t *)((int32_t)v3 + 2);
                                                                                                        v9 = (int16_t *)((int32_t)v6 + 2);
                                                                                                        v2 = v8;
                                                                                                        v5 = v9;
                                                                                                        // branch -> 0x80485da
                                                                                                        goto lab_0x80485da_23;
                                                                                                        break;
                                                                                                    }
                                                                                                }
                                                                                                while (true) {
                                                                                                    // 0x8048595
                                                                                                    switch (4 - n) {
                                                                                                        default: {
                                                                                                            // 0x80485ac
                                                                                                        }
                                                                                                        case 2: {
                                                                                                          lab_0x80485da_24:
                                                                                                            // 0x80485da
                                                                                                            v13 = *v5;
                                                                                                            *v2 = v13;
                                                                                                            v10 = (int16_t *)((int32_t)v2 + 2);
                                                                                                            v11 = (int16_t *)((int32_t)v5 + 2);
                                                                                                            // branch -> 0x80485f1
                                                                                                            v1 = v10;
                                                                                                            v4 = v11;
                                                                                                        }
                                                                                                        case 3: {
                                                                                                            v1 = to;
                                                                                                        }
                                                                                                        case 1: {
                                                                                                          lab_0x80485c3_24:
                                                                                                            // 0x80485c3
                                                                                                            v12 = *v6;
                                                                                                            *v3 = v12;
                                                                                                            v8 = (int16_t *)((int32_t)v3 + 2);
                                                                                                            v9 = (int16_t *)((int32_t)v6 + 2);
                                                                                                            v2 = v8;
                                                                                                            v5 = v9;
                                                                                                            // branch -> 0x80485da
                                                                                                            goto lab_0x80485da_24;
                                                                                                            break;
                                                                                                        }
                                                                                                    }
                                                                                                    while (true) {
                                                                                                        // Detected a possible infinite recursion (goto support failed); quitting...
                                                                                                    }
                                                                                                  lab_0x804860f_25:
                                                                                                    // 0x804860f
                                                                                                    return;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                    }
                                                                                }
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x8048612 - 0x8048703
// Line range:    79 - 113
void copy2_eight_times(int16_t * to, int16_t * from, int32_t n) {
    // 0x8048612
    if (n < 1) {
        // 0x8048701
        return;
    }
    while (true) {
        // 0x8048629
        int16_t * v1; // bp+832
        int16_t * v2; // bp+833
        int16_t * v3; // bp+834
        int16_t * v4; // bp+835
        int16_t * v5; // bp+836
        int16_t * v6; // bp+837
        int16_t * v7; // bp+823
        int16_t * v8; // bp+824
        int16_t * v9; // bp+825
        int16_t * v10; // bp+826
        int16_t * v11; // bp+827
        int16_t * v12; // bp+828
        switch (8 - n) {
            default: {
                // 0x804863f
                *to = *from;
                // branch -> 0x8048656
                v6 = (int16_t *)((int32_t)to + 2);
                v12 = (int16_t *)((int32_t)from + 2);
            }
            case 1: {
                // 0x8048656
                *v6 = *v12;
                // branch -> 0x804866d
                v5 = (int16_t *)((int32_t)v6 + 2);
                v11 = (int16_t *)((int32_t)v12 + 2);
            }
            case 2: {
                // 0x804866d
                *v5 = *v11;
                // branch -> 0x8048684
                v4 = (int16_t *)((int32_t)v5 + 2);
                v10 = (int16_t *)((int32_t)v11 + 2);
            }
            case 3: {
                // 0x8048684
                *v4 = *v10;
                // branch -> 0x804869b
                v3 = (int16_t *)((int32_t)v4 + 2);
                v9 = (int16_t *)((int32_t)v10 + 2);
            }
            case 4: {
                // 0x804869b
                *v3 = *v9;
                // branch -> 0x80486b2
                v2 = (int16_t *)((int32_t)v3 + 2);
                v8 = (int16_t *)((int32_t)v9 + 2);
            }
            case 5: {
                // 0x80486b2
                *v2 = *v8;
                // branch -> 0x80486c9
                v1 = (int16_t *)((int32_t)v2 + 2);
                v7 = (int16_t *)((int32_t)v8 + 2);
            }
            case 6: {
                // 0x80486c9
                *v1 = *v7;
                // branch -> 0x80486e0
            }
            case 7: {
                int16_t * v13 = to; // bp+831
                int16_t * v14 = from; // bp+822
                // 0x80486e0
                *v13 = *v14;
                int32_t v15 = n - 8; // 0x80486f4
                if (v15 == 0) {
                    // break (via goto) -> 0x8048701
                    goto lab_0x8048701;
                }
                from = (int16_t *)((int32_t)v14 + 2);
                n = v15;
                to = (int16_t *)((int32_t)v13 + 2);
                // continue -> 0x8048629
                continue;
            }
        }
    }
  lab_0x8048701:;
}

// From module:   /tmp/a/decompiler-subjects/from_holdec/duffs_device/source.c
// Address range: 0x8048704 - 0x80487cf
// Line range:    115 - 124
int main(int argc, char ** argv) {
    // 0x8048704
    int32_t v1;
    int32_t size = v1; // bp-28
    int16_t * v2;
    int16_t * src = v2; // bp-24
    int16_t * v3;
    int16_t * dest = v3; // bp-20
    size = 200;
    src = (int16_t *)malloc(200);
    char * mem = malloc(size); // 0x804872c
    dest = (int16_t *)mem;
    copy1_four_times((int16_t *)mem, src, 100);
    copy1_eight_times(dest, src, 100);
    copy2_four_times(dest, src, 100);
    copy2_eight_times(dest, src, 100);
    return memcmp((char *)src, (char *)dest, size);
}

// --------------- Dynamically Linked Functions ---------------

// void * malloc(size_t size);
// int memcmp(const void * s1, const void * s2, size_t n);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: gcc (4.4.5)
// Detected language: C
// Detected functions: 5
// Decompiler release: VERSION
// Decompilation date: DATE
