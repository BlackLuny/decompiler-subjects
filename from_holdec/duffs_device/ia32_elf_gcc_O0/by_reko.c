// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080482B4: void _init()
void _init()
{
	if (globals->dw8049A58 != 0x00)
		fn08048304();
	frame_dummy();
	__do_global_ctors_aux();
	return;
}

// 08048304: void fn08048304()
void fn08048304()
{
	word32 esp_3;
	globals->ptr8049A64();
	return;
}

// 08048314: void fn08048314()
void fn08048314()
{
	word32 esp_3;
	globals->ptr8049A68();
	return;
}

// 08048324: void fn08048324()
void fn08048324()
{
	word32 esp_3;
	globals->ptr8049A6C();
	return;
}

// 08048340: void _start(Stack word32 dwArg00)
void _start(word32 dwArg00)
{
	__align(fp + 0x04);
	fn08048314();
	__hlt();
}

// 08048370: void __do_global_dtors_aux(Register word32 esi)
void __do_global_dtors_aux(word32 esi)
{
	if (globals->b8049A74 == 0x00)
	{
		uint32 eax_23 = globals->dw8049A78;
		if (eax_23 < 0x00)
			globals->dw8049A78 = eax_23 + 0x01;
		globals->b8049A74 = 0x01;
	}
	return;
}

// 080483D0: void frame_dummy()
void frame_dummy()
{
	if (globals->dw8049984 != 0x00 && 0x00 != 0x00)
	{
		word32 esp_28;
		word32 ebp_29;
		byte SCZO_30;
		word32 eax_31;
		byte SZO_32;
		byte C_33;
		byte Z_34;
		null();
	}
	return;
}

// 080483F4: void copy1_four_times(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void copy1_four_times(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	Eq_72 eax_118 = (word32) dwArg0C + 0x03;
	if (dwArg0C < 0x03)
		eax_118 = (word32) dwArg0C + 0x06;
	uint32 edx_21 = dwArg0C >> 0x1F >> 0x1E;
	int32 dwLoc08_17 = eax_118 >> 0x02;
	int32 eax_24 = ((word32) dwArg0C + edx_21 & 0x03) - edx_21;
	if (eax_24 == 0x01)
	{
l08048478:
		*dwArg04 = (word16) (word32) *dwArg08;
		int32 v14_57 = dwLoc08_17 - 0x01;
		dwArg04 = dwArg04 + 0x01;
		dwArg08 = dwArg08 + 0x01;
		dwLoc08_17 = v14_57;
		if (v14_57 <= 0x00)
			return;
		goto l0804843C;
	}
	if (eax_24 <= 0x01)
	{
		if (eax_24 != 0x00)
			return;
l0804843C:
		*dwArg04 = (word16) (word32) *dwArg08;
		dwArg04 = dwArg04 + 0x01;
		dwArg08 = dwArg08 + 0x01;
	}
	else
	{
		if (eax_24 == 0x02)
			goto l08048464;
		if (eax_24 != 0x03)
			return;
	}
	*dwArg04 = (word16) (word32) *dwArg08;
	dwArg04 = dwArg04 + 0x01;
	dwArg08 = dwArg08 + 0x01;
l08048464:
	*dwArg04 = (word16) (word32) *dwArg08;
	dwArg04 = dwArg04 + 0x01;
	dwArg08 = dwArg08 + 0x01;
	goto l08048478;
}

// 08048498: Register ptr32 copy1_eight_times(Stack word32 dwArg0C)
ptr32 copy1_eight_times(word32 dwArg0C)
{
	uint32 edx_20 = dwArg0C >> 0x1F >> 0x1D;
	uint32 eax_23 = ((word32) dwArg0C + edx_20 & 0x07) - edx_20;
	if (eax_23 > 0x07)
		return fp;
	else
	{
		<anonymous> * eax_36 = *((char *) globals->a8048894 + eax_23 * 0x04);
		ptr32 esp_37;
		word32 ebp_38;
		byte SCZO_39;
		word32 eax_40;
		word32 edx_41;
		byte SZO_42;
		byte C_43;
		byte S_44;
		byte CZ_45;
		eax_36();
		return esp_37;
	}
}

// 08048586: void copy2_four_times(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void copy2_four_times(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
copy2_four_times_entry:
	branch dwArg0C <= 0x00 l0804860B
	goto l0804858F
l08048586:
l0804858F:
	branch dwArg0C == 0x00 l0804860E
l08048595:
	word32 eax_33 = 0x04 - dwArg0C
	branch eax_33 == 0x02 l080485D9
l080485A2:
	branch eax_33 == 0x03 l080485F0
l080485A7:
	branch eax_33 == 0x01 l080485C2
l080485AC:
	*dwArg04 = (word16) (word32) *dwArg08
	dwArg04 = dwArg04 + 0x01
	dwArg08 = dwArg08 + 0x01
l080485C3:
	*dwArg04 = (word16) (word32) *dwArg08
	dwArg04 = dwArg04 + 0x01
	dwArg08 = dwArg08 + 0x01
l080485DA:
	*dwArg04 = (word16) (word32) *dwArg08
	dwArg04 = dwArg04 + 0x01
	dwArg08 = dwArg08 + 0x01
l080485F1:
	*dwArg04 = (word16) (word32) *dwArg08
	dwArg04 = dwArg04 + 0x01
	dwArg08 = dwArg08 + 0x01
	dwArg0C = dwArg0C - 0x04
	goto l0804858F
l0804860F:
	return
copy2_four_times_exit:
}

// 08048612: Register ptr32 copy2_eight_times(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Register out ptr32 ebpOut)
ptr32 copy2_eight_times(word32 dwArg04, word32 dwArg08, word32 dwArg0C, ptr32 & ebpOut)
{
	if (dwArg0C <= 0x00)
	{
l08048701:
		word32 ebp_37;
		*ebpOut = ebp;
		return fp;
	}
	else
	{
		while (true)
		{
			if (dwArg0C == 0x00)
				goto l08048701;
			uint32 eax_49 = 0x08 - dwArg0C;
			if (eax_49 <= 0x07)
				break;
			*dwArg04 = (word16) (word32) *dwArg08;
			struct Eq_284 * v11_68 = dwArg04 + 0x01;
			struct Eq_287 * v12_70 = dwArg08 + 0x01;
			v11_68->w0000 = (word16) (word32) v12_70->w0000;
			v11_68->w0002 = (word16) (word32) v12_70->w0002;
			v11_68->w0004 = (word16) (word32) v12_70->w0004;
			v11_68->w0006 = (word16) (word32) v12_70->w0006;
			v11_68->w0008 = (word16) (word32) v12_70->w0008;
			v11_68->w000A = (word16) (word32) v12_70->w000A;
			v11_68->w000C = (word16) (word32) v12_70->w000C;
			dwArg04 = (word16 *) (&v11_68->w000C + 0x01);
			dwArg08 = (word16 *) (&v12_70->w000C + 0x01);
			dwArg0C = dwArg0C - 0x08;
		}
		<anonymous> * eax_53 = *((char *) globals->a80488B4 + eax_49 * 0x04);
		ptr32 esp_54;
		word32 ebp_55;
		byte SCZO_56;
		byte SZO_57;
		byte Z_58;
		word32 eax_59;
		byte CZ_60;
		word32 edx_61;
		word16 dx_62;
		eax_53();
		return esp_54;
	}
}

// 08048704: void main(Register word32 ebp)
void main(word32 ebp)
{
	__align(fp - 0x04);
	fn08048324();
	fn08048324();
	copy1_four_times(200, 200, 100);
	struct Eq_387 * esp_25 = copy1_eight_times(100);
	esp_25->dw0008 = 100;
	esp_25->dw0004 = esp_25->dw0018;
	esp_25->dw0000 = esp_25->dw001C;
	copy2_four_times(dwArg00, dwArg04, dwArg08);
	esp_25->dw0008 = 100;
	esp_25->dw0004 = esp_25->dw0018;
	esp_25->dw0000 = esp_25->dw001C;
	word32 ebp_39;
	struct Eq_431 * esp_40 = copy2_eight_times(dwArg00, dwArg04, dwArg08, out ebp_39);
	esp_40->dw0008 = esp_40->dw0014;
	esp_40->dw0004 = esp_40->dw001C;
	esp_40->t0000 = esp_40->t0018;
	malloc(esp_40->t0000);
	return;
}

// 080487D0: void __libc_csu_fini()
void __libc_csu_fini()
{
	return;
}

// 080487E0: void __libc_csu_init(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C)
void __libc_csu_init(word32 dwArg04, word32 dwArg08, word32 dwArg0C)
{
	struct Eq_464 * ebx_16 = __i686.get_pc_thunk.bx(dwLoc14);
	_init();
	if (&ebx_16->ptr1189 - &ebx_16->ptr1189 >> 0x02 != 0x00)
	{
		do
		{
			word32 esp_60;
			word32 ebp_61;
			uint32 edi_62;
			uint32 esi_63;
			word32 ebx_64;
			byte SCZO_65;
			word32 eax_66;
			byte SZO_67;
			byte C_68;
			byte Z_69;
			ebx_16->ptr1189();
		} while (esi_63 + 0x01 < edi_62);
	}
	return;
}

// 0804883A: Register word32 __i686.get_pc_thunk.bx(Stack word32 dwArg00)
word32 __i686.get_pc_thunk.bx(word32 dwArg00)
{
	return dwArg00;
}

// 08048840: void __do_global_ctors_aux()
void __do_global_ctors_aux()
{
	<anonymous> * eax_11 = globals->ptr8049974;
	if (eax_11 != (<anonymous> *) ~0x00)
	{
		do
		{
			word32 esp_26;
			word32 ebp_27;
			word32 * ebx_28;
			byte SCZO_29;
			word32 eax_30;
			byte Z_31;
			eax_11();
		} while (*ebx_28 != ~0x00);
	}
	return;
}

// 0804886C: void _fini(Register word32 esi)
void _fini(word32 esi)
{
	__do_global_dtors_aux(esi);
	return;
}

