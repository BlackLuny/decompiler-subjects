// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 0800:01FA: void main(Register (ptr Eq_3) ds)
void main(Eq_3 * ds)
{
	fn0800_08FA(ds, 404);
	return;
}

// 0800:08FA: void fn0800_08FA(Register (ptr Eq_3) ds, Stack word16 wArg02)
void fn0800_08FA(Eq_3 * ds, word16 wArg02)
{
	fn0800_0B22(ds, fp + 0x04, wArg02);
	return;
}

// 0800:0B22: void fn0800_0B22(Register (ptr Eq_3) ds, Stack mp16 wArg02, Stack word16 wArg04)
void fn0800_0B22(Eq_3 * ds, mp16 wArg02, word16 wArg04)
{
	ci8 bLoc57_100 = 0x50;
	byte Eq_3::* di_102 = fp - 0x56;
	byte Eq_3::* si_106 = wArg04;
l0800_0B8C:
	byte al_36 = ds->*si_106;
	si_106 = si_106 + 0x01;
	byte al_104 = al_36;
	ax = DPB(ax, al_36, 0);
	if (al_36 == 0x00)
	{
		if (bLoc57_100 < 0x50)
			fn0800_0B50(fp - 0x02, fn0800_0B50(fp - 0x02, di_102));
		return;
	}
	if (al_36 != 0x25)
	{
l0800_0B95:
		ds->*di_102 = al_104;
		ci8 v15_99 = bLoc57_100 - 0x01;
		di_102 = di_102 + 0x01;
		bLoc57_100 = v15_99;
		if (v15_99 <= 0x00)
			di_102 = fn0800_0B50(fp - 0x02, di_102);
		goto l0800_0B8C;
	}
	al_104 = ds->*si_106;
	ax = DPB(ax, al_104, 0);
	si_106 = si_106 + 0x01;
	if (al_104 == 0x25)
		goto l0800_0B95;
	cu8 ch_112 = 0x00;
	byte bLoc8F_117 = 0x00;
l0800_0BCF:
	word16 ax_137 = DPB(ax, 0x00, 8);
	cu8 bl_141 = (byte) ax_137;
	byte dl_139 = (byte) ax_137;
	struct Eq_90 Eq_3::* bx_143 = DPB(ax_137, bl_141 - 0x20, 0);
	if (bl_141 < 0x80)
	{
		cu16 bx_181 = DPB(ax_137, (ds->*bx_143).b03BF, 0);
		cu16 ax_182 = bx_181;
		if (bx_181 > 0x17)
		{
l0800_100F:
			byte Eq_3::* si_155 = si_106;
			byte al_157 = 0x25;
			do
			{
				di_102 = fn0800_0B48(al_157, fp - 0x02, di_102, ds);
				byte al_166 = ds->*si_155;
				si_155 = si_155 + 0x01;
				al_157 = al_166;
			} while (al_166 != 0x00);
			break;
		}
		switch (fp - 0xA0)
		{
		case 0x00:
			if (ch_112 <= 0x00)
				goto l0800_0C44;
			break;
		case 0x01:
			if (ch_112 <= 0x00)
				goto l0800_0BCE;
			break;
		case 0x02:
			ax_182 = ds->*wArg02;
			wArg02 = wArg02 + 0x01;
			if (ch_112 < 0x02)
				goto l0800_0C8E;
			goto l0800_0C97;
		case 0x03:
			if (ch_112 <= 0x00)
				goto l0800_0BCE;
			break;
		}
	}
	goto l0800_100F;
}

// 0800:0B48: Register (memptr (ptr Eq_3) byte) fn0800_0B48(Register byte al, Register (memptr (ptr Eq_156) Eq_61) bp, Register (memptr (ptr Eq_3) byte) di, Register (ptr Eq_3) ds)
byte Eq_3::*fn0800_0B48(byte al, Eq_61 Eq_156::*bp, byte Eq_3::*di, Eq_3 * ds)
{
	ds->*di = al;
	ci8 v9_9 = ss->*(bp - 0x55) - 0x01;
	ss->*(bp - 0x55) = v9_9;
	if (v9_9 <= 0x00)
		return di + 0x01;
	else
	{
		byte Eq_3::* di_13 = fn0800_0B50(bp, di + 0x01);
		return di_13;
	}
}

// 0800:0B50: Register (memptr (ptr Eq_3) byte) fn0800_0B50(Register (memptr (ptr Eq_156) Eq_61) bp, Register (memptr (ptr Eq_3) byte) di)
byte Eq_3::*fn0800_0B50(Eq_61 Eq_156::*bp, byte Eq_3::*di)
{
	word16 sp_30;
	word16 bx_31;
	struct Eq_3 * ss_32;
	word16 cx_33;
	word16 dx_34;
	struct Eq_184 * es_35;
	union Eq_201 Eq_3::* bp_36;
	word16 ax_37;
	word16 di_38;
	byte SCZO_39;
	struct Eq_189 * cs_40;
	byte SZO_41;
	byte C_42;
	byte Z_43;
	(cs->*(ss->*bp).ptr000A)();
	if (ax_37 == 0x00)
		(ss_32->*(bp_36 - 0x02)).u1 = 0x01;
	(ss_32->*(bp_36 - 0x55)).u0 = 0x50;
	(ss_32->*(bp_36 - 88)).u1 = (word16) (ss_32->*(bp_36 - 88)).u1 + di_38;
	return bp_36 - 0x54;
}

