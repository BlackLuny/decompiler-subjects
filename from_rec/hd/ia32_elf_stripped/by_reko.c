// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 080484A0: void _init()
void _init()
{
	fn08048980();
	return;
}

// 080484E8: void _xstat()
void _xstat()
{
	word32 esp_3;
	globals->ptr8049A14();
	return;
}

// 080484F8: void __libc_init()
void __libc_init()
{
	word32 esp_3;
	globals->ptr8049A18();
	return;
}

// 08048508: void strcat()
void strcat()
{
	word32 esp_3;
	globals->ptr8049A1C();
	return;
}

// 08048518: void fread()
void fread()
{
	word32 esp_3;
	globals->ptr8049A20();
	return;
}

// 08048528: void fopen()
void fopen()
{
	word32 esp_3;
	globals->ptr8049A24();
	return;
}

// 08048538: void fclose()
void fclose()
{
	word32 esp_3;
	globals->ptr8049A28();
	return;
}

// 08048548: void sprintf()
void sprintf()
{
	word32 esp_3;
	globals->ptr8049A2C();
	return;
}

// 08048558: void atexit()
void atexit()
{
	word32 esp_3;
	globals->ptr8049A30();
	return;
}

// 08048568: void exit()
void exit()
{
	word32 esp_3;
	globals->ptr8049A34();
	return;
}

// 08048578: void __setfpucw()
void __setfpucw()
{
	word32 esp_3;
	globals->ptr8049A38();
	return;
}

// 08048588: void strlen()
void strlen()
{
	word32 esp_3;
	globals->ptr8049A3C();
	return;
}

// 080485A0: void fn080485A0(Register word32 esi, Register word32 edi, Stack word32 dwArg00)
void fn080485A0(word32 esi, word32 edi, word32 dwArg00)
{
	__align(fp + 0x04);
	__syscall(0x80);
	globals->ptr80499E8 = fp + 0x04 + (dwArg00 * 0x02) * 0x02 + 0x04;
	__setfpucw();
	__libc_init();
	atexit();
	_init();
	fn080488E0(null, dwArg00, fp + 0x04);
	exit();
	while (true)
		__syscall(0x80);
}

// 08048620: void fn08048620()
void fn08048620()
{
	word32 * ebx_24 = globals->a80499F8;
	if (globals->a80499F8 != 0x00)
	{
		do
		{
			<anonymous> * eax_25 = *ebx_24;
			word32 esp_26;
			word32 ebp_27;
			struct Eq_98 * ebx_28;
			byte SCZO_29;
			byte Z_30;
			word32 esi_31;
			word32 eax_32;
			eax_25();
			ebx_24 = (word32 *) &ebx_28->dw0004;
		} while (ebx_28->dw0004 != 0x00);
	}
	return;
}

// 08048660: void fn08048660(Register (ptr Eq_74) ebx, Stack ptr32 dwArg04, Stack uint32 dwArg08, Stack ptr32 dwArg0C)
void fn08048660(stat * ebx, ptr32 dwArg04, uint32 dwArg08, ptr32 dwArg0C)
{
	sprintf();
	char * dwLoc58_169 = null;
	while ((char *) 0x10 > dwLoc58_169)
	{
		sprintf();
		dwLoc58_169 = dwLoc58_169 + 0x01;
	}
	while (true)
	{
		dwLoc58_169 = dwLoc58_169 + 0x01;
		if (dwLoc58_169 > (char *) 0x0F)
			break;
		strcat();
	}
	strlen();
	_xstat(fp - 0x54 + (fp - 0x54), 0x080489DA, ebx);
	char * dwLoc58_108 = null;
	while ((char *) 0x10 > dwLoc58_108)
	{
		byte cl_120;
		word32 eax_111 = fp - 0x54 + dwLoc58_108;
		if (dwLoc58_108[dwArg04] > 0x1F && dwLoc58_108[dwArg04] <= 0x7E)
			cl_120 = dwLoc58_108[dwArg04];
		else
			cl_120 = 0x2E;
		Mem124[eax_111 + (fp - 0x54):byte] = cl_120;
		dwLoc58_108 = dwLoc58_108 + 0x01;
	}
	while (dwLoc58_108 <= (char *) 0x0F)
	{
		Mem106[fp - 0x54 + dwLoc58_108 + (fp - 0x54):byte] = 0x20;
		dwLoc58_108 = dwLoc58_108 + 0x01;
	}
	_xstat(fp - 0x54 + (fp - 0x54) + dwLoc58_108, 134515166, ebx);
	fopen("%s
", fp - (char *) 0x54);
	return;
}

// 080487F0: Register word32 fn080487F0(Register (ptr Eq_74) ebx, Stack word32 dwArg04)
word32 fn080487F0(stat * ebx, word32 dwArg04)
{
	fn08048950(dwArg04, fp - 0x5C);
	if (dwArg04 != 0x00)
	{
		fopen();
		if (dwArg04 != 0x00)
		{
			uint32 dwLoc18_36 = 0x00;
			while (dwLoc48 > dwLoc18_36)
			{
				fread();
				if (fp == 0x14)
					break;
				fn08048660(ebx, fp - 0x14, dwLoc18_36, fp - 0x14);
				dwLoc18_36 = dwLoc18_36 + (fp - 0x14);
			}
			fclose();
			return 0x00;
		}
		else
			exit(dwArg04);
	}
	else
		exit(dwArg04);
}

// 080488E0: void fn080488E0(Register (ptr Eq_74) ebx, Stack ui32 dwArg04, Stack ptr32 dwArg08)
void fn080488E0(stat * ebx, ui32 dwArg04, ptr32 dwArg08)
{
	int32 dwLoc08_15 = 0x01;
	while (dwArg04 > dwLoc08_15)
	{
		fn080487F0(ebx, dwArg08[dwLoc08_15]);
		dwLoc08_15 = dwLoc08_15 + 0x01;
	}
	return;
}

// 08048950: void fn08048950(Stack int32 dwArg04, Stack ptr32 dwArg08)
void fn08048950(int32 dwArg04, ptr32 dwArg08)
{
	_xstat();
	return;
}

// 08048980: void fn08048980()
void fn08048980()
{
	word32 * ebx_24 = &globals->dw80499EC;
	if (globals->dw80499EC != ~0x00)
	{
		do
		{
			<anonymous> * eax_25 = *ebx_24;
			word32 esp_26;
			word32 ebp_27;
			struct Eq_278 * ebx_28;
			byte SCZO_29;
			byte Z_30;
			word32 esi_31;
			word32 eax_32;
			eax_25();
			ebx_24 = (word32 *) &ebx_28->dwFFFFFFFC;
		} while (ebx_28->dwFFFFFFFC != ~0x00);
	}
	return;
}

// 080489C0: void _fini()
void _fini()
{
	fn08048620();
	return;
}

