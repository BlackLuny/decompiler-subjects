// subject.c
// Generated by decompiling subject.exe
// using Reko decompiler version VERSION

#include "subject.h"

// 004019E0: Register Eq_2 Win32CrtStartup()
DWORD Win32CrtStartup()
{
	fs->ptr0000 = fp - 0x14;
	word32 esp_33;
	word32 ebp_34;
	word32 eax_35;
	struct Eq_12 * fs_36;
	byte SCZO_37;
	word32 ebx_38;
	word32 esi_39;
	word32 edi_40;
	word32 ecx_41;
	word32 edx_42;
	byte SZO_43;
	byte C_44;
	byte Z_45;
	byte al_46;
	byte CZ_47;
	_set_app_type();
	globals->dw40312C = ~0x00;
	globals->dw403130 = ~0x00;
	word32 esp_53;
	word32 ebp_54;
	word32 * eax_55;
	struct Eq_35 * fs_56;
	byte SCZO_57;
	word32 ebx_58;
	word32 esi_59;
	word32 edi_60;
	word32 ecx_61;
	word32 edx_62;
	byte SZO_63;
	byte C_64;
	byte Z_65;
	byte al_66;
	byte CZ_67;
	_p__fmode();
	word32 ecx_69 = globals->dw403120;
	*eax_55 = ecx_69;
	word32 esp_71;
	word32 ebp_72;
	word32 * eax_73;
	struct Eq_58 * fs_74;
	byte SCZO_75;
	word32 ebx_76;
	word32 esi_77;
	word32 edi_78;
	word32 ecx_79;
	word32 edx_80;
	byte SZO_81;
	byte C_82;
	byte Z_83;
	byte al_84;
	byte CZ_85;
	_p__commode();
	word32 edx_87 = globals->dw40311C;
	*eax_73 = edx_87;
	word32 ecx_90 = *adjust_fdiv;
	globals->dw403128 = ecx_90;
	fn00401BE0();
	ptr32 esp_303 = &fp->dwFFFFFF68 + 0x01;
	word32 eax_92 = globals->dw403040;
	if (eax_92 == 0x00)
	{
		fp->dwFFFFFF68 = 4201424;
		ptr32 esp_287;
		word32 ebp_288;
		word32 eax_289;
		struct Eq_236 * fs_290;
		byte SCZO_291;
		word32 ebx_292;
		word32 esi_293;
		word32 edi_294;
		word32 ecx_295;
		word32 edx_296;
		byte SZO_297;
		byte C_298;
		byte Z_299;
		byte al_300;
		byte CZ_301;
		_setusermatherr();
		esp_303 = esp_287;
	}
	fn00401BB0();
	word32 * esp_97 = esp_303 - 0x04;
	*esp_97 = 0x00403014;
	*(esp_97 - 0x04) = 0x00403010;
	ptr32 * esp_101;
	word32 ebp_102;
	word32 eax_103;
	struct Eq_116 * fs_104;
	byte SCZO_105;
	word32 ebx_106;
	word32 esi_107;
	word32 edi_108;
	word32 ecx_109;
	word32 edx_110;
	byte SZO_111;
	byte C_112;
	byte Z_113;
	byte al_114;
	byte CZ_115;
	initterm();
	*esp_101 = fp - 0x70;
	*(esp_101 - 0x04) = globals->dw403114;
	*(esp_101 - 0x08) = fp - 0x68;
	*(esp_101 - 0x0C) = fp - 116;
	*(esp_101 - 0x10) = fp - 100;
	struct Eq_163 * esp_136;
	word32 ebp_137;
	word32 eax_138;
	struct Eq_166 * fs_139;
	byte SCZO_140;
	word32 ebx_141;
	word32 esi_142;
	word32 edi_143;
	word32 ecx_144;
	word32 edx_145;
	byte SZO_146;
	byte C_147;
	byte Z_148;
	byte al_149;
	byte CZ_150;
	_getmainargs();
	esp_136->dw000C = 0x0040300C;
	esp_136->dw0008 = 0x00403000;
	word32 esp_158;
	word32 ebp_159;
	word32 eax_160;
	struct Eq_191 * fs_161;
	byte SCZO_162;
	word32 ebx_163;
	word32 esi_164;
	word32 edi_165;
	word32 ecx_166;
	word32 edx_167;
	byte SZO_168;
	byte C_169;
	byte Z_170;
	byte al_171;
	byte CZ_172;
	initterm();
	ptr32 esp_176;
	word32 ebp_177;
	word32 eax_178;
	struct Eq_208 * fs_179;
	byte SCZO_180;
	word32 ebx_181;
	word32 esi_182;
	word32 edi_183;
	word32 ecx_184;
	word32 edx_185;
	byte SZO_186;
	byte C_187;
	byte Z_188;
	byte al_189;
	byte CZ_190;
	_p__acmdln();
	cu8 * esi_193 = dwLoc74;
	if (*dwLoc74 == 0x22)
	{
		do
		{
			esi_193 = esi_193 + 0x01;
			cu8 al_260 = *esi_193;
		} while (al_260 == 0x00 || al_260 == 0x22);
		if (*esi_193 == 0x22)
			esi_193 = esi_193 + 0x01;
	}
	else
	{
		while (*esi_193 > 0x20)
			esi_193 = esi_193 + 0x01;
	}
	while (true)
	{
		cu8 al_202 = *esi_193;
		if (al_202 == 0x00 || al_202 > 0x20)
			break;
		esi_193 = esi_193 + 0x01;
	}
	ui32 eax_220;
	*(esp_176 - 0x08) = fp - 0x60;
	GetStartupInfoA(*(esp_176 - 0x08));
	if (0x00 != 0x00)
		eax_220 = dwLoc30 & 0xFFFF;
	else
		eax_220 = 0x0A;
	*(esp_176 - 0x08) = eax_220;
	*(esp_176 - 0x0C) = (cu8 **) esi_193;
	*(esp_176 - 0x10) = 0x00;
	*(esp_176 - 0x14) = 0x00;
	Eq_329 eax_230 = GetModuleHandleA(*(esp_176 - 0x14));
	*(esp_176 - 0x14) = (HMODULE *) eax_230;
	fn00401BFC(dwArg00, dwArg04, dwArg08, dwArg0C);
	*(esp_176 - 0x08) = (HMODULE *) eax_230;
	exit(*(esp_176 - 0x08));
}

// 00401BB0: void fn00401BB0()
void fn00401BB0()
{
	word32 esp_6;
	byte SCZO_7;
	controlfp();
	return;
}

// 00401BE0: void fn00401BE0()
void fn00401BE0()
{
	return;
}

// 00401BFC: void fn00401BFC(Stack word32 dwArg04, Stack word32 dwArg08, Stack word32 dwArg0C, Stack word32 dwArg10)
void fn00401BFC(word32 dwArg04, word32 dwArg08, word32 dwArg0C, word32 dwArg10)
{
	word32 esp_18;
	MFC42.DLL!Ordinal_1576();
	return;
}

